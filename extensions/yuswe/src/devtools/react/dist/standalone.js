/*! For license information please see standalone.js.LICENSE.txt */
(()=>{var e={537:e=>{e.exports=function(){if("undefined"==typeof document||!document.addEventListener)return null;var t,r,i,o={};return o.copy=function(){var e=!1,t=null,r=!1;function i(){e=!1,t=null,r&&window.getSelection().removeAllRanges(),r=!1}return document.addEventListener("copy",(function(r){if(e){for(var i in t)r.clipboardData.setData(i,t[i]);r.preventDefault()}})),function(o){return new Promise((function(n,s){e=!0,"string"==typeof o?t={"text/plain":o}:o instanceof Node?t={"text/html":(new XMLSerializer).serializeToString(o)}:o instanceof Object?t=o:s("Invalid data type. Must be string, DOM node, or an object mapping MIME types to strings."),function e(t){try{if(document.execCommand("copy"))i(),n();else{if(t)throw i(),new Error("Unable to copy. Perhaps it's not available in your browser?");(function(){var e=document.getSelection();if(!document.queryCommandEnabled("copy")&&e.isCollapsed){var t=document.createRange();t.selectNodeContents(document.body),e.removeAllRanges(),e.addRange(t),r=!0}})(),e(!0)}}catch(e){i(),s(e)}}(!1)}))}}(),o.paste=(i=!1,document.addEventListener("paste",(function(e){if(i){i=!1,e.preventDefault();var o=t;t=null,o(e.clipboardData.getData(r))}})),function(e){return new Promise((function(o,n){i=!0,t=o,r=e||"text/plain";try{document.execCommand("paste")||(i=!1,n(new Error("Unable to paste. Pasting only works in Internet Explorer at the moment.")))}catch(e){i=!1,n(new Error(e))}}))}),"undefined"==typeof ClipboardEvent&&void 0!==window.clipboardData&&void 0!==window.clipboardData.setData&&(function(t){function r(e,t){return function(){e.apply(t,arguments)}}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],h(e,r(n,this),r(s,this))}function o(e){var t=this;return null===this._state?void this._deferreds.push(e):void c((function(){var r=t._state?e.onFulfilled:e.onRejected;if(null!==r){var i;try{i=r(t._value)}catch(t){return void e.reject(t)}e.resolve(i)}else(t._state?e.resolve:e.reject)(t._value)}))}function n(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void h(r(t,e),r(n,this),r(s,this))}this._state=!0,this._value=e,a.call(this)}catch(e){s.call(this,e)}}function s(e){this._state=!1,this._value=e,a.call(this)}function a(){for(var e=0,t=this._deferreds.length;t>e;e++)o.call(this,this._deferreds[e]);this._deferreds=null}function l(e,t,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=i}function h(e,t,r){var i=!1;try{e((function(e){i||(i=!0,t(e))}),(function(e){i||(i=!0,r(e))}))}catch(e){if(i)return;i=!0,r(e)}}var c=i.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)},d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var r=this;return new i((function(i,n){o.call(r,new l(e,t,i,n))}))},i.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&d(arguments[0])?arguments[0]:arguments);return new i((function(t,r){function i(n,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,(function(e){i(n,e)}),r)}e[n]=s,0==--o&&t(e)}catch(e){r(e)}}if(0===e.length)return t([]);for(var o=e.length,n=0;n<e.length;n++)i(n,e[n])}))},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i((function(t){t(e)}))},i.reject=function(e){return new i((function(t,r){r(e)}))},i.race=function(e){return new i((function(t,r){for(var i=0,o=e.length;o>i;i++)e[i].then(t,r)}))},e.exports?e.exports=i:t.Promise||(t.Promise=i)}(this),o.copy=function(e){return new Promise((function(t,r){if("string"!=typeof e&&!("text/plain"in e))throw new Error("You must provide a text/plain type.");var i="string"==typeof e?e:e["text/plain"];window.clipboardData.setData("Text",i)?t():r(new Error("Copying was rejected."))}))},o.paste=function(){return new Promise((function(e,t){var r=window.clipboardData.getData("Text");r?e(r):t(new Error("Pasting was rejected."))}))}),o}()},18:(e,t,r)=>{"use strict";var i=r(397);e.exports=y;var o,n=r(745),s=r(837),a=r(986),l=(o="function"==typeof Symbol&&"1"!==i.env._nodeLRUCacheForceNoSymbol?function(e){return Symbol(e)}:function(e){return"_"+e})("max"),h=o("length"),c=o("lengthCalculator"),d=o("allowStale"),u=o("maxAge"),f=o("dispose"),p=o("noDisposeOnSet"),_=o("lruList"),m=o("cache");function g(){return 1}function y(e){if(!(this instanceof y))return new y(e);"number"==typeof e&&(e={max:e}),e||(e={});var t=this[l]=e.max;(!t||"number"!=typeof t||t<=0)&&(this[l]=1/0);var r=e.length||g;"function"!=typeof r&&(r=g),this[c]=r,this[d]=e.stale||!1,this[u]=e.maxAge||0,this[f]=e.dispose,this[p]=e.noDisposeOnSet||!1,this.reset()}function v(e,t,r,i){var o=r.value;b(e,o)&&(E(e,r),e[d]||(o=void 0)),o&&t.call(i,o.value,o.key,e)}function w(e,t,r){var i=e[m].get(t);if(i){var o=i.value;b(e,o)?(E(e,i),e[d]||(o=void 0)):r&&e[_].unshiftNode(i),o&&(o=o.value)}return o}function b(e,t){if(!t||!t.maxAge&&!e[u])return!1;var r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[u]&&r>e[u]}function S(e){if(e[h]>e[l])for(var t=e[_].tail;e[h]>e[l]&&null!==t;){var r=t.prev;E(e,t),t=r}}function E(e,t){if(t){var r=t.value;e[f]&&e[f](r.key,r.value),e[h]-=r.length,e[m].delete(r.key),e[_].removeNode(t)}}function D(e,t,r,i,o){this.key=e,this.value=t,this.length=r,this.now=i,this.maxAge=o||0}Object.defineProperty(y.prototype,"max",{set:function(e){(!e||"number"!=typeof e||e<=0)&&(e=1/0),this[l]=e,S(this)},get:function(){return this[l]},enumerable:!0}),Object.defineProperty(y.prototype,"allowStale",{set:function(e){this[d]=!!e},get:function(){return this[d]},enumerable:!0}),Object.defineProperty(y.prototype,"maxAge",{set:function(e){(!e||"number"!=typeof e||e<0)&&(e=0),this[u]=e,S(this)},get:function(){return this[u]},enumerable:!0}),Object.defineProperty(y.prototype,"lengthCalculator",{set:function(e){"function"!=typeof e&&(e=g),e!==this[c]&&(this[c]=e,this[h]=0,this[_].forEach((function(e){e.length=this[c](e.value,e.key),this[h]+=e.length}),this)),S(this)},get:function(){return this[c]},enumerable:!0}),Object.defineProperty(y.prototype,"length",{get:function(){return this[h]},enumerable:!0}),Object.defineProperty(y.prototype,"itemCount",{get:function(){return this[_].length},enumerable:!0}),y.prototype.rforEach=function(e,t){t=t||this;for(var r=this[_].tail;null!==r;){var i=r.prev;v(this,e,r,t),r=i}},y.prototype.forEach=function(e,t){t=t||this;for(var r=this[_].head;null!==r;){var i=r.next;v(this,e,r,t),r=i}},y.prototype.keys=function(){return this[_].toArray().map((function(e){return e.key}),this)},y.prototype.values=function(){return this[_].toArray().map((function(e){return e.value}),this)},y.prototype.reset=function(){this[f]&&this[_]&&this[_].length&&this[_].forEach((function(e){this[f](e.key,e.value)}),this),this[m]=new n,this[_]=new a,this[h]=0},y.prototype.dump=function(){return this[_].map((function(e){if(!b(this,e))return{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}}),this).toArray().filter((function(e){return e}))},y.prototype.dumpLru=function(){return this[_]},y.prototype.inspect=function(e,t){var r="LRUCache {",i=!1;this[d]&&(r+="\n  allowStale: true",i=!0);var o=this[l];o&&o!==1/0&&(i&&(r+=","),r+="\n  max: "+s.inspect(o,t),i=!0);var n=this[u];n&&(i&&(r+=","),r+="\n  maxAge: "+s.inspect(n,t),i=!0);var a=this[c];a&&a!==g&&(i&&(r+=","),r+="\n  length: "+s.inspect(this[h],t),i=!0);var f=!1;return this[_].forEach((function(e){f?r+=",\n  ":(i&&(r+=",\n"),f=!0,r+="\n  ");var o=s.inspect(e.key).split("\n").join("\n  "),l={value:e.value};e.maxAge!==n&&(l.maxAge=e.maxAge),a!==g&&(l.length=e.length),b(this,e)&&(l.stale=!0),l=s.inspect(l,t).split("\n").join("\n  "),r+=o+" => "+l})),(f||i)&&(r+="\n"),r+="}"},y.prototype.set=function(e,t,r){var i=(r=r||this[u])?Date.now():0,o=this[c](t,e);if(this[m].has(e)){if(o>this[l])return E(this,this[m].get(e)),!1;var n=this[m].get(e).value;return this[f]&&(this[p]||this[f](e,n.value)),n.now=i,n.maxAge=r,n.value=t,this[h]+=o-n.length,n.length=o,this.get(e),S(this),!0}var s=new D(e,t,o,i,r);return s.length>this[l]?(this[f]&&this[f](e,t),!1):(this[h]+=s.length,this[_].unshift(s),this[m].set(e,this[_].head),S(this),!0)},y.prototype.has=function(e){return!!this[m].has(e)&&!b(this,this[m].get(e).value)},y.prototype.get=function(e){return w(this,e,!0)},y.prototype.peek=function(e){return w(this,e,!1)},y.prototype.pop=function(){var e=this[_].tail;return e?(E(this,e),e.value):null},y.prototype.del=function(e){E(this,this[m].get(e))},y.prototype.load=function(e){this.reset();for(var t=Date.now(),r=e.length-1;r>=0;r--){var i=e[r],o=i.e||0;if(0===o)this.set(i.k,i.v);else{var n=o-t;n>0&&this.set(i.k,i.v,n)}}},y.prototype.prune=function(){var e=this;this[m].forEach((function(t,r){w(e,r,!1)}))}},397:e=>{var t,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:n}catch(e){r=n}}();var a,l=[],h=!1,c=-1;function d(){h&&a&&(h=!1,a.length?l=a.concat(l):c=-1,l.length&&u())}function u(){if(!h){var e=s(d);h=!0;for(var t=l.length;t;){for(a=l,l=[];++c<t;)a&&a[c].run();c=-1,t=l.length}a=null,h=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===n||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new f(e,t)),1!==l.length||h||s(u)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},745:(e,t,r)=>{var i=r(397);"pseudomap"===i.env.npm_package_name&&"test"===i.env.npm_lifecycle_script&&(i.env.TEST_PSEUDOMAP="true"),"function"!=typeof Map||i.env.TEST_PSEUDOMAP?e.exports=r(503):e.exports=Map},503:e=>{var t=Object.prototype.hasOwnProperty;function r(e){if(!(this instanceof r))throw new TypeError("Constructor PseudoMap requires 'new'");if(this.clear(),e)if(e instanceof r||"function"==typeof Map&&e instanceof Map)e.forEach((function(e,t){this.set(t,e)}),this);else{if(!Array.isArray(e))throw new TypeError("invalid argument");e.forEach((function(e){this.set(e[0],e[1])}),this)}}function i(e,t){return e===t||e!=e&&t!=t}function o(e,t,r){this.key=e,this.value=t,this._index=r}function n(e,r){for(var o=0,n="_"+r,s=n;t.call(e,s);s=n+o++)if(i(e[s].key,r))return e[s]}e.exports=r,r.prototype.forEach=function(e,t){t=t||this,Object.keys(this._data).forEach((function(r){"size"!==r&&e.call(t,this._data[r].value,this._data[r].key)}),this)},r.prototype.has=function(e){return!!n(this._data,e)},r.prototype.get=function(e){var t=n(this._data,e);return t&&t.value},r.prototype.set=function(e,r){!function(e,r,n){for(var s=0,a="_"+r,l=a;t.call(e,l);l=a+s++)if(i(e[l].key,r))return void(e[l].value=n);e.size++,e[l]=new o(r,n,l)}(this._data,e,r)},r.prototype.delete=function(e){var t=n(this._data,e);t&&(delete this._data[t._index],this._data.size--)},r.prototype.clear=function(){var e=Object.create(null);e.size=0,Object.defineProperty(this,"_data",{value:e,enumerable:!1,configurable:!0,writable:!1})},Object.defineProperty(r.prototype,"size",{get:function(){return this._data.size},set:function(e){},enumerable:!0,configurable:!0}),r.prototype.values=r.prototype.keys=r.prototype.entries=function(){throw new Error("iterators are not implemented in this version")}},33:(e,t,r)=>{"use strict";const i=r(888);i.createWebSocketStream=r(541),i.Server=r(209),i.Receiver=r(548),i.Sender=r(116),e.exports=i},515:(e,t,r)=>{"use strict";const{EMPTY_BUFFER:i}=r(633);function o(e,t){if(0===e.length)return i;if(1===e.length)return e[0];const r=Buffer.allocUnsafe(t);let o=0;for(let t=0;t<e.length;t++){const i=e[t];r.set(i,o),o+=i.length}return o<t?r.slice(0,o):r}function n(e,t,r,i,o){for(let n=0;n<o;n++)r[i+n]=e[n]^t[3&n]}function s(e,t){const r=e.length;for(let i=0;i<r;i++)e[i]^=t[3&i]}function a(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function l(e){if(l.readOnly=!0,Buffer.isBuffer(e))return e;let t;return e instanceof ArrayBuffer?t=Buffer.from(e):ArrayBuffer.isView(e)?t=Buffer.from(e.buffer,e.byteOffset,e.byteLength):(t=Buffer.from(e),l.readOnly=!1),t}try{const t=r(447),i=t.BufferUtil||t;e.exports={concat:o,mask(e,t,r,o,s){s<48?n(e,t,r,o,s):i.mask(e,t,r,o,s)},toArrayBuffer:a,toBuffer:l,unmask(e,t){e.length<32?s(e,t):i.unmask(e,t)}}}catch(t){e.exports={concat:o,mask:n,toArrayBuffer:a,toBuffer:l,unmask:s}}},633:e=>{"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},279:e=>{"use strict";class t{constructor(e,t){this.target=t,this.type=e}}class r extends t{constructor(e,t){super("message",t),this.data=e}}class i extends t{constructor(e,t,r){super("close",r),this.wasClean=r._closeFrameReceived&&r._closeFrameSent,this.reason=t,this.code=e}}class o extends t{constructor(e){super("open",e)}}class n extends t{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const s={addEventListener(e,t,s){if("function"!=typeof t)return;function a(e){t.call(this,new r(e,this))}function l(e,r){t.call(this,new i(e,r,this))}function h(e){t.call(this,new n(e,this))}function c(){t.call(this,new o(this))}const d=s&&s.once?"once":"on";"message"===e?(a._listener=t,this[d](e,a)):"close"===e?(l._listener=t,this[d](e,l)):"error"===e?(h._listener=t,this[d](e,h)):"open"===e?(c._listener=t,this[d](e,c)):this[d](e,t)},removeEventListener(e,t){const r=this.listeners(e);for(let i=0;i<r.length;i++)r[i]!==t&&r[i]._listener!==t||this.removeListener(e,r[i])}};e.exports=s},905:e=>{"use strict";const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function r(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}e.exports={format:function(e){return Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>[t].concat(Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const i=Object.create(null);if(void 0===e||""===e)return i;let o,n,s=Object.create(null),a=!1,l=!1,h=!1,c=-1,d=-1,u=0;for(;u<e.length;u++){const f=e.charCodeAt(u);if(void 0===o)if(-1===d&&1===t[f])-1===c&&(c=u);else if(32===f||9===f)-1===d&&-1!==c&&(d=u);else{if(59!==f&&44!==f)throw new SyntaxError(`Unexpected character at index ${u}`);{if(-1===c)throw new SyntaxError(`Unexpected character at index ${u}`);-1===d&&(d=u);const t=e.slice(c,d);44===f?(r(i,t,s),s=Object.create(null)):o=t,c=d=-1}}else if(void 0===n)if(-1===d&&1===t[f])-1===c&&(c=u);else if(32===f||9===f)-1===d&&-1!==c&&(d=u);else if(59===f||44===f){if(-1===c)throw new SyntaxError(`Unexpected character at index ${u}`);-1===d&&(d=u),r(s,e.slice(c,d),!0),44===f&&(r(i,o,s),s=Object.create(null),o=void 0),c=d=-1}else{if(61!==f||-1===c||-1!==d)throw new SyntaxError(`Unexpected character at index ${u}`);n=e.slice(c,u),c=d=-1}else if(l){if(1!==t[f])throw new SyntaxError(`Unexpected character at index ${u}`);-1===c?c=u:a||(a=!0),l=!1}else if(h)if(1===t[f])-1===c&&(c=u);else if(34===f&&-1!==c)h=!1,d=u;else{if(92!==f)throw new SyntaxError(`Unexpected character at index ${u}`);l=!0}else if(34===f&&61===e.charCodeAt(u-1))h=!0;else if(-1===d&&1===t[f])-1===c&&(c=u);else if(-1===c||32!==f&&9!==f){if(59!==f&&44!==f)throw new SyntaxError(`Unexpected character at index ${u}`);{if(-1===c)throw new SyntaxError(`Unexpected character at index ${u}`);-1===d&&(d=u);let t=e.slice(c,d);a&&(t=t.replace(/\\/g,""),a=!1),r(s,n,t),44===f&&(r(i,o,s),s=Object.create(null),o=void 0),n=void 0,c=d=-1}}else-1===d&&(d=u)}if(-1===c||h)throw new SyntaxError("Unexpected end of input");-1===d&&(d=u);const f=e.slice(c,d);return void 0===o?r(i,f,s):(void 0===n?r(s,f,!0):r(s,n,a?f.replace(/\\/g,""):f),r(i,o,s)),i}}},921:e=>{"use strict";const t=Symbol("kDone"),r=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},840:(e,t,r)=>{"use strict";const i=r(796),o=r(515),n=r(921),{kStatusCode:s,NOOP:a}=r(633),l=Buffer.from([0,0,255,255]),h=Symbol("permessage-deflate"),c=Symbol("total-length"),d=Symbol("callback"),u=Symbol("buffers"),f=Symbol("error");let p;function _(e){this[u].push(e),this[c]+=e.length}function m(e){this[c]+=e.length,this[h]._maxPayload<1||this[c]<=this[h]._maxPayload?this[u].push(e):(this[f]=new RangeError("Max payload size exceeded"),this[f].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[f][s]=1009,this.removeListener("data",m),this.reset())}function g(e){this[h]._inflate=null,e[s]=1007,this[d](e)}e.exports=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!p){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;p=new n(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[d];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,r=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r}))})),e}decompress(e,t,r){p.add((i=>{this._decompress(e,t,((e,t)=>{i(),r(e,t)}))}))}compress(e,t,r){p.add((i=>{this._compress(e,t,((e,t)=>{i(),r(e,t)}))}))}_decompress(e,t,r){const n=this._isServer?"client":"server";if(!this._inflate){const e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=i.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[h]=this,this._inflate[c]=0,this._inflate[u]=[],this._inflate.on("error",g),this._inflate.on("data",m)}this._inflate[d]=r,this._inflate.write(e),t&&this._inflate.write(l),this._inflate.flush((()=>{const e=this._inflate[f];if(e)return this._inflate.close(),this._inflate=null,void r(e);const i=o.concat(this._inflate[u],this._inflate[c]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[c]=0,this._inflate[u]=[],t&&this.params[`${n}_no_context_takeover`]&&this._inflate.reset()),r(null,i)}))}_compress(e,t,r){const n=this._isServer?"server":"client";if(!this._deflate){const e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=i.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[c]=0,this._deflate[u]=[],this._deflate.on("error",a),this._deflate.on("data",_)}this._deflate[d]=r,this._deflate.write(e),this._deflate.flush(i.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=o.concat(this._deflate[u],this._deflate[c]);t&&(e=e.slice(0,e.length-4)),this._deflate[d]=null,this._deflate[c]=0,this._deflate[u]=[],t&&this.params[`${n}_no_context_takeover`]&&this._deflate.reset(),r(null,e)}))}}},548:(e,t,r)=>{"use strict";const{Writable:i}=r(781),o=r(840),{BINARY_TYPES:n,EMPTY_BUFFER:s,kStatusCode:a,kWebSocket:l}=r(633),{concat:h,toArrayBuffer:c,unmask:d}=r(515),{isValidStatusCode:u,isValidUTF8:f}=r(760);function p(e,t,r,i,o){const n=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(n,p),n.code=o,n[a]=i,n}e.exports=class extends i{constructor(e,t,r,i){super(),this._binaryType=e||n[0],this[l]=void 0,this._extensions=t||{},this._isServer=!!r,this._maxPayload=0|i,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0],i=t.length-e;e>=r.length?t.set(this._buffers.shift(),i):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),i),this._buffers[0]=r.slice(e)),e-=r.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,p(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");const t=64==(64&e[0]);if(t&&!this._extensions[o.extensionName])return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,p(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,p(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,p(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin)return this._loop=!1,p(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,p(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),this._isServer){if(!this._masked)return this._loop=!1,p(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,p(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,p(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,p(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=s;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&d(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[o.extensionName].decompress(e,this._fin,((e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(p(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(r)}const i=this.dataMessage();if(i)return t(i);this.startLoop(t)}))}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let r;r="nodebuffer"===this._binaryType?h(t,e):"arraybuffer"===this._binaryType?c(h(t,e)):t,this.emit("message",r)}else{const r=h(t,e);if(!f(r))return this._loop=!1,p(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",r.toString())}}this._state=0}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return p(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{const t=e.readUInt16BE(0);if(!u(t))return p(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");const r=e.slice(2);if(!f(r))return p(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,r.toString()),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}}},116:(e,t,r)=>{"use strict";r(808),r(404);const{randomFillSync:i}=r(113),o=r(840),{EMPTY_BUFFER:n}=r(633),{isValidStatusCode:s}=r(760),{mask:a,toBuffer:l}=r(515),h=Buffer.alloc(4);class c{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const r=t.mask&&t.readOnly;let o=t.mask?6:2,n=e.length;e.length>=65536?(o+=8,n=127):e.length>125&&(o+=2,n=126);const s=Buffer.allocUnsafe(r?e.length+o:o);return s[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(s[0]|=64),s[1]=n,126===n?s.writeUInt16BE(e.length,2):127===n&&(s.writeUInt32BE(0,2),s.writeUInt32BE(e.length,6)),t.mask?(i(h,0,4),s[1]|=128,s[o-4]=h[0],s[o-3]=h[1],s[o-2]=h[2],s[o-1]=h[3],r?(a(e,h,s,o,e.length),[s]):(a(e,h,e,0,e.length),[s,e])):[s,e]}close(e,t,r,i){let o;if(void 0===e)o=n;else{if("number"!=typeof e||!s(e))throw new TypeError("First argument must be a valid error code number");if(void 0===t||""===t)o=Buffer.allocUnsafe(2),o.writeUInt16BE(e,0);else{const r=Buffer.byteLength(t);if(r>123)throw new RangeError("The message must not be greater than 123 bytes");o=Buffer.allocUnsafe(2+r),o.writeUInt16BE(e,0),o.write(t,2)}}this._deflating?this.enqueue([this.doClose,o,r,i]):this.doClose(o,r,i)}doClose(e,t,r){this.sendFrame(c.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),r)}ping(e,t,r){const i=l(e);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,i,t,l.readOnly,r]):this.doPing(i,t,l.readOnly,r)}doPing(e,t,r,i){this.sendFrame(c.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:r}),i)}pong(e,t,r){const i=l(e);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,i,t,l.readOnly,r]):this.doPong(i,t,l.readOnly,r)}doPong(e,t,r,i){this.sendFrame(c.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:r}),i)}send(e,t,r){const i=l(e),n=this._extensions[o.extensionName];let s=t.binary?2:1,a=t.compress;if(this._firstFragment?(this._firstFragment=!1,a&&n&&(a=i.length>=n._threshold),this._compress=a):(a=!1,s=0),t.fin&&(this._firstFragment=!0),n){const e={fin:t.fin,rsv1:a,opcode:s,mask:t.mask,readOnly:l.readOnly};this._deflating?this.enqueue([this.dispatch,i,this._compress,e,r]):this.dispatch(i,this._compress,e,r)}else this.sendFrame(c.frame(i,{fin:t.fin,rsv1:!1,opcode:s,mask:t.mask,readOnly:l.readOnly}),r)}dispatch(e,t,r,i){if(!t)return void this.sendFrame(c.frame(e,r),i);const n=this._extensions[o.extensionName];this._bufferedBytes+=e.length,this._deflating=!0,n.compress(e,r.fin,((t,o)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof i&&i(e);for(let t=0;t<this._queue.length;t++){const r=this._queue[t][4];"function"==typeof r&&r(e)}}else this._bufferedBytes-=e.length,this._deflating=!1,r.readOnly=!1,this.sendFrame(c.frame(o,r),i),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=c},541:(e,t,r)=>{"use strict";var i=r(397);const{Duplex:o}=r(781);function n(e){e.emit("close")}function s(){!this.destroyed&&this._writableState.finished&&this.destroy()}function a(e){this.removeListener("error",a),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let r=!0,l=!0;function h(){r&&e._socket.resume()}e.readyState===e.CONNECTING?e.once("open",(function(){e._receiver.removeAllListeners("drain"),e._receiver.on("drain",h)})):(e._receiver.removeAllListeners("drain"),e._receiver.on("drain",h));const c=new o({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t){c.push(t)||(r=!1,e._socket.pause())})),e.once("error",(function(e){c.destroyed||(l=!1,c.destroy(e))})),e.once("close",(function(){c.destroyed||c.push(null)})),c._destroy=function(t,r){if(e.readyState===e.CLOSED)return r(t),void i.nextTick(n,c);let o=!1;e.once("error",(function(e){o=!0,r(e)})),e.once("close",(function(){o||r(t),i.nextTick(n,c)})),l&&e.terminate()},c._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),c._readableState.endEmitted&&c.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){c._final(t)}))},c._read=function(){e.readyState!==e.OPEN&&e.readyState!==e.CLOSING||r||(r=!0,e._receiver._writableState.needDrain||e._socket.resume())},c._write=function(t,r,i){e.readyState!==e.CONNECTING?e.send(t,i):e.once("open",(function(){c._write(t,r,i)}))},c.on("end",s),c.on("error",a),c}},760:(e,t,r)=>{"use strict";function i(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999}function o(e){const t=e.length;let r=0;for(;r<t;)if(0==(128&e[r]))r++;else if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0}try{let t=r(838);"object"==typeof t&&(t=t.Validation.isValidUTF8),e.exports={isValidStatusCode:i,isValidUTF8:e=>e.length<150?o(e):t(e)}}catch(t){e.exports={isValidStatusCode:i,isValidUTF8:o}}},209:(e,t,r)=>{"use strict";var i=r(397);const o=r(361),n=r(685),{createHash:s}=(r(687),r(808),r(404),r(113)),a=r(840),l=r(888),{format:h,parse:c}=r(905),{GUID:d,kWebSocket:u}=r(633),f=/^[+/0-9A-Za-z]{22}==$/;function p(e){e._state=2,e.emit("close")}function _(){this.destroy()}function m(e,t,r,i){e.writable&&(r=r||n.STATUS_CODES[t],i={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...i},e.write(`HTTP/1.1 ${t} ${n.STATUS_CODES[t]}\r\n`+Object.keys(i).map((e=>`${e}: ${i[e]}`)).join("\r\n")+"\r\n\r\n"+r)),e.removeListener("error",_),e.destroy()}function g(e){return e.trim()}e.exports=class extends o{constructor(e,t){if(super(),null==(e={maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=n.createServer(((e,t)=>{const r=n.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,i)=>{this.handleUpgrade(t,r,i,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),2===this._state)return void i.nextTick(p,this);if(1===this._state)return;if(this._state=1,this.clients)for(const e of this.clients)e.terminate();const t=this._server;t&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?t.close(p.bind(void 0,this)):i.nextTick(p,this)}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,i){t.on("error",_);const o=void 0!==e.headers["sec-websocket-key"]&&e.headers["sec-websocket-key"].trim(),n=e.headers.upgrade,s=+e.headers["sec-websocket-version"],l={};if("GET"!==e.method||void 0===n||"websocket"!==n.toLowerCase()||!o||!f.test(o)||8!==s&&13!==s||!this.shouldHandle(e))return m(t,400);if(this.options.perMessageDeflate){const r=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const t=c(e.headers["sec-websocket-extensions"]);t[a.extensionName]&&(r.accept(t[a.extensionName]),l[a.extensionName]=r)}catch(e){return m(t,400)}}if(this.options.verifyClient){const n={origin:e.headers[8===s?"sec-websocket-origin":"origin"],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(n,((n,s,a,h)=>{if(!n)return m(t,s||401,a,h);this.completeUpgrade(o,l,e,t,r,i)}));if(!this.options.verifyClient(n))return m(t,401)}this.completeUpgrade(o,l,e,t,r,i)}completeUpgrade(e,t,r,i,o,n){if(!i.readable||!i.writable)return i.destroy();if(i[u])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return m(i,503);const c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${s("sha1").update(e+d).digest("base64")}`],f=new l(null);let p=r.headers["sec-websocket-protocol"];if(p&&(p=p.split(",").map(g),p=this.options.handleProtocols?this.options.handleProtocols(p,r):p[0],p&&(c.push(`Sec-WebSocket-Protocol: ${p}`),f._protocol=p)),t[a.extensionName]){const e=t[a.extensionName].params,r=h({[a.extensionName]:[e]});c.push(`Sec-WebSocket-Extensions: ${r}`),f._extensions=t}this.emit("headers",c,r),i.write(c.concat("\r\n").join("\r\n")),i.removeListener("error",_),f.setSocket(i,o,this.options.maxPayload),this.clients&&(this.clients.add(f),f.on("close",(()=>this.clients.delete(f)))),n(f,r)}}},888:(e,t,r)=>{"use strict";var i=r(397);const o=r(361),n=r(687),s=r(685),a=r(808),l=r(404),{randomBytes:h,createHash:c}=r(113),{Readable:d}=r(781),{URL:u}=r(310),f=r(840),p=r(548),_=r(116),{BINARY_TYPES:m,EMPTY_BUFFER:g,GUID:y,kStatusCode:v,kWebSocket:w,NOOP:b}=r(633),{addEventListener:S,removeEventListener:E}=r(279),{format:D,parse:k}=r(905),{toBuffer:x}=r(515),T=["CONNECTING","OPEN","CLOSING","CLOSED"],C=[8,13];class I extends o{constructor(e,t,r){super(),this._binaryType=m[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=I.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(r=t,t=void 0),P(this,e,t,r)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){m.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get onclose(){}set onclose(e){}get onerror(){}set onerror(e){}get onopen(){}set onopen(e){}get onmessage(){}set onmessage(e){}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const i=new p(this.binaryType,this._extensions,this._isServer,r);this._sender=new _(e,this._extensions),this._receiver=i,this._socket=e,i[w]=this,e[w]=this,i.on("conclude",L),i.on("drain",M),i.on("error",W),i.on("message",U),i.on("ping",$),i.on("pong",j),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",G),e.on("data",q),e.on("end",z),e.on("error",H),this._readyState=I.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=I.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[f.extensionName]&&this._extensions[f.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=I.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==I.CLOSED){if(this.readyState===I.CONNECTING){const e="WebSocket was closed before the connection was established";return B(this,this._req,e)}this.readyState!==I.CLOSING?(this._readyState=I.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end()}}ping(e,t,r){if(this.readyState===I.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===I.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||g,t,r)):A(this,e,r)}pong(e,t,r){if(this.readyState===I.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===I.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||g,t,r)):A(this,e,r)}send(e,t,r){if(this.readyState===I.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==I.OPEN)return void A(this,e,r);const i={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[f.extensionName]||(i.compress=!1),this._sender.send(e||g,i,r)}terminate(){if(this.readyState!==I.CLOSED){if(this.readyState===I.CONNECTING){const e="WebSocket was closed before the connection was established";return B(this,this._req,e)}this._socket&&(this._readyState=I.CLOSING,this._socket.destroy())}}}function P(e,t,r,i){const o={protocolVersion:C[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...i,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!C.includes(o.protocolVersion))throw new RangeError(`Unsupported protocol version: ${o.protocolVersion} (supported versions: ${C.join(", ")})`);let a;t instanceof u?(a=t,e._url=t.href):(a=new u(t),e._url=t);const l="ws+unix:"===a.protocol;if(!(a.host||l&&a.pathname)){const t=new Error(`Invalid URL: ${e.url}`);if(0===e._redirects)throw t;return void N(e,t)}const d="wss:"===a.protocol||"https:"===a.protocol,p=d?443:80,_=h(16).toString("base64"),m=d?n.get:s.get;let g;if(o.createConnection=d?R:O,o.defaultPort=o.defaultPort||p,o.port=a.port||p,o.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,o.headers={"Sec-WebSocket-Version":o.protocolVersion,"Sec-WebSocket-Key":_,Connection:"Upgrade",Upgrade:"websocket",...o.headers},o.path=a.pathname+a.search,o.timeout=o.handshakeTimeout,o.perMessageDeflate&&(g=new f(!0!==o.perMessageDeflate?o.perMessageDeflate:{},!1,o.maxPayload),o.headers["Sec-WebSocket-Extensions"]=D({[f.extensionName]:g.offer()})),r&&(o.headers["Sec-WebSocket-Protocol"]=r),o.origin&&(o.protocolVersion<13?o.headers["Sec-WebSocket-Origin"]=o.origin:o.headers.Origin=o.origin),(a.username||a.password)&&(o.auth=`${a.username}:${a.password}`),l){const e=o.path.split(":");o.socketPath=e[0],o.path=e[1]}if(o.followRedirects){if(0===e._redirects){e._originalUnixSocket=l,e._originalSecure=d,e._originalHostOrSocketPath=l?o.socketPath:a.host;const t=i&&i.headers;if(i={...i,headers:{}},t)for(const[e,r]of Object.entries(t))i.headers[e.toLowerCase()]=r}else{const t=l?!!e._originalUnixSocket&&o.socketPath===e._originalHostOrSocketPath:!e._originalUnixSocket&&a.host===e._originalHostOrSocketPath;(!t||e._originalSecure&&!d)&&(delete o.headers.authorization,delete o.headers.cookie,t||delete o.headers.host,o.auth=void 0)}o.auth&&!i.headers.authorization&&(i.headers.authorization="Basic "+Buffer.from(o.auth).toString("base64"))}let v=e._req=m(o);o.timeout&&v.on("timeout",(()=>{B(e,v,"Opening handshake has timed out")})),v.on("error",(t=>{null===v||v.aborted||(v=e._req=null,N(e,t))})),v.on("response",(n=>{const s=n.headers.location,a=n.statusCode;if(s&&o.followRedirects&&a>=300&&a<400){if(++e._redirects>o.maxRedirects)return void B(e,v,"Maximum redirects exceeded");let n;v.abort();try{n=new u(s,t)}catch(t){return void N(e,t)}P(e,n,r,i)}else e.emit("unexpected-response",v,n)||B(e,v,`Unexpected server response: ${n.statusCode}`)})),v.on("upgrade",((t,i,n)=>{if(e.emit("upgrade",t),e.readyState!==I.CONNECTING)return;v=e._req=null;const s=t.headers.upgrade;if(void 0===s||"websocket"!==s.toLowerCase())return void B(e,i,"Invalid Upgrade header");const a=c("sha1").update(_+y).digest("base64");if(t.headers["sec-websocket-accept"]!==a)return void B(e,i,"Invalid Sec-WebSocket-Accept header");const l=t.headers["sec-websocket-protocol"],h=(r||"").split(/, */);let d;if(!r&&l?d="Server sent a subprotocol but none was requested":r&&!l?d="Server sent no subprotocol":l&&!h.includes(l)&&(d="Server sent an invalid subprotocol"),d)return void B(e,i,d);l&&(e._protocol=l);const u=t.headers["sec-websocket-extensions"];if(void 0!==u){if(!g)return void B(e,i,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");let t;try{t=k(u)}catch(t){return void B(e,i,"Invalid Sec-WebSocket-Extensions header")}const r=Object.keys(t);if(r.length){if(1!==r.length||r[0]!==f.extensionName)return void B(e,i,"Server indicated an extension that was not requested");try{g.accept(t[f.extensionName])}catch(t){return void B(e,i,"Invalid Sec-WebSocket-Extensions header")}e._extensions[f.extensionName]=g}}e.setSocket(i,n,o.maxPayload)}))}function N(e,t){e._readyState=I.CLOSING,e.emit("error",t),e.emitClose()}function O(e){return e.path=e.socketPath,a.connect(e)}function R(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=a.isIP(e.host)?"":e.host),l.connect(e)}function B(e,t,r){e._readyState=I.CLOSING;const i=new Error(r);Error.captureStackTrace(i,B),t.setHeader?(t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),t.once("abort",e.emitClose.bind(e)),e.emit("error",i)):(t.destroy(i),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function A(e,t,r){if(t){const r=x(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}r&&r(new Error(`WebSocket is not open: readyState ${e.readyState} (${T[e.readyState]})`))}function L(e,t){const r=this[w];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[w]&&(r._socket.removeListener("data",q),i.nextTick(V,r._socket),1005===e?r.close():r.close(e,t))}function M(){this[w]._socket.resume()}function W(e){const t=this[w];void 0!==t._socket[w]&&(t._socket.removeListener("data",q),i.nextTick(V,t._socket),t.close(e[v])),t.emit("error",e)}function F(){this[w].emitClose()}function U(e){this[w].emit("message",e)}function $(e){const t=this[w];t.pong(e,!t._isServer,b),t.emit("ping",e)}function j(e){this[w].emit("pong",e)}function V(e){e.resume()}function G(){const e=this[w];let t;this.removeListener("close",G),this.removeListener("data",q),this.removeListener("end",z),e._readyState=I.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[w]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",F),e._receiver.on("finish",F))}function q(e){this[w]._receiver.write(e)||this.pause()}function z(){const e=this[w];e._readyState=I.CLOSING,e._receiver.end(),this.end()}function H(){const e=this[w];this.removeListener("error",H),this.on("error",b),e&&(e._readyState=I.CLOSING,this.destroy())}Object.defineProperty(I,"CONNECTING",{enumerable:!0,value:T.indexOf("CONNECTING")}),Object.defineProperty(I.prototype,"CONNECTING",{enumerable:!0,value:T.indexOf("CONNECTING")}),Object.defineProperty(I,"OPEN",{enumerable:!0,value:T.indexOf("OPEN")}),Object.defineProperty(I.prototype,"OPEN",{enumerable:!0,value:T.indexOf("OPEN")}),Object.defineProperty(I,"CLOSING",{enumerable:!0,value:T.indexOf("CLOSING")}),Object.defineProperty(I.prototype,"CLOSING",{enumerable:!0,value:T.indexOf("CLOSING")}),Object.defineProperty(I,"CLOSED",{enumerable:!0,value:T.indexOf("CLOSED")}),Object.defineProperty(I.prototype,"CLOSED",{enumerable:!0,value:T.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach((e=>{Object.defineProperty(I.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(I.prototype,`on${e}`,{enumerable:!0,get(){const t=this.listeners(e);for(let e=0;e<t.length;e++)if(t[e]._listener)return t[e]._listener},set(t){const r=this.listeners(e);for(let t=0;t<r.length;t++)r[t]._listener&&this.removeListener(e,r[t]);this.addEventListener(e,t)}})})),I.prototype.addEventListener=S,I.prototype.removeEventListener=E,e.exports=I},986:e=>{function t(e){var r=this;if(r instanceof t||(r=new t),r.tail=null,r.head=null,r.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){r.push(e)}));else if(arguments.length>0)for(var i=0,o=arguments.length;i<o;i++)r.push(arguments[i]);return r}function r(e,t,i,o){if(!(this instanceof r))return new r(e,t,i,o);this.list=o,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,i?(i.prev=this,this.next=i):this.next=null}e.exports=t,t.Node=r,t.create=t,t.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null},t.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},t.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},t.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)o=arguments[e],(i=this).tail=new r(o,i.tail,null,i),i.head||(i.head=i.tail),i.length++;var i,o;return this.length},t.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)o=arguments[e],(i=this).head=new r(o,null,i.head,i),i.tail||(i.tail=i.head),i.length++;var i,o;return this.length},t.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},t.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},t.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,i=0;null!==r;i++)e.call(t,r.value,i,this),r=r.next},t.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,i=this.length-1;null!==r;i--)e.call(t,r.value,i,this),r=r.prev},t.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},t.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},t.prototype.map=function(e,r){r=r||this;for(var i=new t,o=this.head;null!==o;)i.push(e.call(r,o.value,this)),o=o.next;return i},t.prototype.mapReverse=function(e,r){r=r||this;for(var i=new t,o=this.tail;null!==o;)i.push(e.call(r,o.value,this)),o=o.prev;return i},t.prototype.reduce=function(e,t){var r,i=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,r=this.head.value}for(var o=0;null!==i;o++)r=e(r,i.value,o),i=i.next;return r},t.prototype.reduceReverse=function(e,t){var r,i=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,r=this.tail.value}for(var o=this.length-1;null!==i;o--)r=e(r,i.value,o),i=i.prev;return r},t.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},t.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},t.prototype.slice=function(e,r){(r=r||this.length)<0&&(r+=this.length),(e=e||0)<0&&(e+=this.length);var i=new t;if(r<e||r<0)return i;e<0&&(e=0),r>this.length&&(r=this.length);for(var o=0,n=this.head;null!==n&&o<e;o++)n=n.next;for(;null!==n&&o<r;o++,n=n.next)i.push(n.value);return i},t.prototype.sliceReverse=function(e,r){(r=r||this.length)<0&&(r+=this.length),(e=e||0)<0&&(e+=this.length);var i=new t;if(r<e||r<0)return i;e<0&&(e=0),r>this.length&&(r=this.length);for(var o=this.length,n=this.tail;null!==n&&o>r;o--)n=n.prev;for(;null!==n&&o>e;o--,n=n.prev)i.push(n.value);return i},t.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var i=r.prev;r.prev=r.next,r.next=i}return this.head=t,this.tail=e,this}},447:e=>{"use strict";e.exports=require("bufferutil")},838:e=>{"use strict";e.exports=require("utf-8-validate")},113:e=>{"use strict";e.exports=require("crypto")},361:e=>{"use strict";e.exports=require("events")},685:e=>{"use strict";e.exports=require("http")},687:e=>{"use strict";e.exports=require("https")},808:e=>{"use strict";e.exports=require("net")},781:e=>{"use strict";e.exports=require("stream")},404:e=>{"use strict";e.exports=require("tls")},310:e=>{"use strict";e.exports=require("url")},837:e=>{"use strict";e.exports=require("util")},796:e=>{"use strict";e.exports=require("zlib")}},t={};function r(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{"use strict";r.r(i),r.d(i,{default:()=>me});class e{constructor(){var e,t,r;e=this,t="listenersMap",r=new Map,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}addListener(e,t){const r=this.listenersMap.get(e);void 0===r?this.listenersMap.set(e,[t]):r.indexOf(t)<0&&r.push(t)}emit(e,...t){const r=this.listenersMap.get(e);if(void 0!==r)if(1===r.length)r[0].apply(null,t);else{let e=!1,i=null;const o=Array.from(r);for(let r=0;r<o.length;r++){const n=o[r];try{n.apply(null,t)}catch(t){null===i&&(e=!0,i=t)}}if(e)throw i}}removeAllListeners(){this.listenersMap.clear()}removeListener(e,t){const r=this.listenersMap.get(e);if(void 0!==r){const e=r.indexOf(t);e>=0&&r.splice(e,1)}}}function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const o=[{version:0,minNpmVersion:'"<4.11.0"',maxNpmVersion:'"<4.11.0"'},{version:1,minNpmVersion:"4.13.0",maxNpmVersion:"4.21.0"},{version:2,minNpmVersion:"4.22.0",maxNpmVersion:null}],n=o[o.length-1],s=class extends e{constructor(e){super(),t(this,"_isShutdown",!1),t(this,"_messageQueue",[]),t(this,"_scheduledFlush",!1),t(this,"_wallUnlisten",null),t(this,"_flush",(()=>{try{if(this._messageQueue.length){for(let e=0;e<this._messageQueue.length;e+=2)this._wall.send(this._messageQueue[e],...this._messageQueue[e+1]);this._messageQueue.length=0}}finally{this._scheduledFlush=!1}})),t(this,"overrideValueAtPath",(({id:e,path:t,rendererID:r,type:i,value:o})=>{switch(i){case"context":this.send("overrideContext",{id:e,path:t,rendererID:r,wasForwarded:!0,value:o});break;case"hooks":this.send("overrideHookState",{id:e,path:t,rendererID:r,wasForwarded:!0,value:o});break;case"props":this.send("overrideProps",{id:e,path:t,rendererID:r,wasForwarded:!0,value:o});break;case"state":this.send("overrideState",{id:e,path:t,rendererID:r,wasForwarded:!0,value:o})}})),this._wall=e,this._wallUnlisten=e.listen((e=>{e&&e.event&&this.emit(e.event,e.payload)}))||null,this.addListener("overrideValueAtPath",this.overrideValueAtPath)}get wall(){return this._wall}send(e,...t){this._isShutdown?console.warn(`Cannot send message "${e}" through a Bridge that has been shutdown.`):(this._messageQueue.push(e,t),this._scheduledFlush||(this._scheduledFlush=!0,"function"==typeof devtoolsJestTestScheduler?devtoolsJestTestScheduler(this._flush):queueMicrotask(this._flush)))}shutdown(){if(this._isShutdown)return void console.warn("Bridge was already shutdown.");this.emit("shutdown"),this.send("shutdown"),this._isShutdown=!0,this.addListener=function(){},this.emit=function(){},this.removeAllListeners();const e=this._wallUnlisten;e&&e();do{this._flush()}while(this._messageQueue.length)}};var a=r(537),l=r(837);const h=!1,c="React::DevTools::componentFilters",d=1,u=5,f=6,p=8,_=15,m=3;var g=r(18),y=r.n(g);function v(e){try{return localStorage.getItem(e)}catch(e){return null}}function w(e,t){try{return localStorage.setItem(e,t)}catch(e){}}function b(e,t,r){let i="";for(let o=t;o<=r;o++)i+=String.fromCodePoint(e[o]);return i}function S(){try{const e=v(c);if(null!=e)return D(JSON.parse(e))}catch(e){}return[{type:1,value:7,isEnabled:!0}]}function E(e){w(c,JSON.stringify(D(e)))}function D(e){return Array.isArray(e)?e.filter((e=>e.type!==m)):e}function k(e,t){if(null===e)return{formattedDisplayName:null,hocDisplayNames:null,compiledWithForget:!1};if(e.startsWith("Forget(")){const r=e.slice(7,e.length-1),{formattedDisplayName:i,hocDisplayNames:o}=k(r,t);return{formattedDisplayName:i,hocDisplayNames:o,compiledWithForget:!0}}let r=null;switch(t){case d:case f:case u:case p:case _:if(e.indexOf("(")>=0){const t=e.match(/[^()]+/g);null!=t&&(e=t.pop(),r=t)}}return{formattedDisplayName:e,hocDisplayNames:r,compiledWithForget:!1}}function x(e,t){for(const r in e)if(!(r in t))return!0;for(const r in t)if(e[r]!==t[r])return!0;return!1}function T(e){const{formattedDisplayName:t,hocDisplayNames:r,compiledWithForget:i}=k(e.displayName,e.type);return{...e,displayName:t,hocDisplayNames:r,compiledWithForget:i}}Symbol.for("react.element"),Symbol.for("react.transitional.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.consumer"),Symbol.for("react.context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode"),Symbol.for("react.offscreen"),Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker"),Symbol.for("react.memo_cache_sentinel"),Symbol.for("react.postpone"),Symbol.iterator,Symbol.asyncIterator,Symbol("inspectable"),Symbol("inspected"),Symbol("name"),Symbol("preview_long"),Symbol("preview_short"),Symbol("readonly"),Symbol("size"),Symbol("type"),Symbol("unserializable"),Array.isArray,Array.isArray,Object.prototype.hasOwnProperty,new WeakMap,new(y())({max:1e3});const C=e=>Math.round(10*e)/10||"<0.1",I=new Map;function P(e,t,r,i){const o=i.snapshots.get(e);null!=o&&(r.set(e,{id:e,children:o.children,displayName:o.displayName,hocDisplayNames:o.hocDisplayNames,key:o.key,parentID:t,treeBaseDuration:i.initialTreeBaseDurations.get(e),type:o.type,compiledWithForget:o.compiledWithForget}),o.children.forEach((t=>P(t,e,r,i))))}function N(e,t){const r=new Map(e.nodes),i=e=>{const t=Object.assign({},r.get(e));return r.set(e,t),t};let o=2,n=null;const s=[null],a=t[o++],l=o+a;for(;o<l;){const e=t[o++],r=b(t,o,o+e-1);s.push(r),o+=e}for(;o<t.length;){const e=t[o];switch(e){case 1:{n=t[o+1];const e=t[o+2];if(o+=3,r.has(n))throw new Error(`Commit tree already contains fiber "${n}". This is a bug in React DevTools.`);if(11===e){o++,o++,o++,o++;const t={children:[],displayName:null,hocDisplayNames:null,id:n,key:null,parentID:0,treeBaseDuration:0,type:e,compiledWithForget:!1};r.set(n,t)}else{const a=t[o];o++,o++;const l=s[t[o]];o++;const h=s[t[o]];o++;const c=i(a);c.children=c.children.concat(n);const{formattedDisplayName:d,hocDisplayNames:u,compiledWithForget:f}=k(l,e),p={children:[],displayName:d,hocDisplayNames:u,id:n,key:h,parentID:a,treeBaseDuration:0,type:e,compiledWithForget:f};r.set(n,p)}break}case 2:{const e=t[o+1];o+=2;for(let s=0;s<e;s++){if(n=t[o],o++,!r.has(n))throw new Error(`Commit tree does not contain fiber "${n}". This is a bug in React DevTools.`);const e=i(n).parentID;if(r.delete(n),r.has(e)){const t=i(e);t.children=t.children.filter((e=>e!==n))}}break}case 6:throw Error("Operation REMOVE_ROOT is not supported while profiling.");case 3:{n=t[o+1];const e=t[o+2],r=t.slice(o+3,o+3+e);o=o+3+e,i(n).children=Array.from(r);break}case 7:n=t[o+1];t[o+1];o+=3;break;case 4:{n=t[o+1];const e=i(n);e.treeBaseDuration=t[o+2]/1e3,o+=3;break}case 5:n=t[o+1];t[o+2],t[o+3];o+=4;break;default:throw Error(`Unsupported Bridge operation "${e}"`)}}return{nodes:r,rootID:e.rootID}}const O=new Map,R=new Map;function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class A{constructor(e){B(this,"_fiberCommits",new Map),B(this,"getCommitTree",(({commitIndex:e,rootID:t})=>function({commitIndex:e,profilerStore:t,rootID:r}){I.has(r)||I.set(r,[]);const i=I.get(r);if(e<i.length)return i[e];const{profilingData:o}=t;if(null===o)throw Error("No profiling data available");const n=o.dataForRoots.get(r);if(null==n)throw Error(`Could not find profiling data for root "${r}"`);const{operations:s}=n;if(s.length<=e)throw Error(`getCommitTree(): Invalid commit "${e}" for root "${r}". There are only "${s.length}" commits.`);let a=null;for(let t=i.length;t<=e;t++)if(0===t){const e=new Map;P(r,0,e,n),null!=s&&t<s.length&&(a=N({nodes:e,rootID:r},s[t]),i.push(a))}else a=N(i[t-1],s[t]),i.push(a);return a}({commitIndex:e,profilerStore:this._profilerStore,rootID:t}))),B(this,"getFiberCommits",(({fiberID:e,rootID:t})=>{const r=this._fiberCommits.get(e);if(null!=r)return r;const i=[];return this._profilerStore.getDataForRoot(t).commitData.forEach(((t,r)=>{t.fiberActualDurations.has(e)&&i.push(r)})),this._fiberCommits.set(e,i),i})),B(this,"getFlamegraphChartData",(({commitIndex:e,commitTree:t,rootID:r})=>function({commitIndex:e,commitTree:t,profilerStore:r,rootID:i}){const o=r.getCommitData(i,e),{fiberActualDurations:n,fiberSelfDurations:s}=o,{nodes:a}=t,l=`${i}-${e}`;if(O.has(l))return O.get(l);const h=new Map,c=new Set,d=[];let u=0,f=0;const p=(e,t,r)=>{h.set(e,r);const i=a.get(e);if(null==i)throw Error(`Could not find node with id "${e}" in commit tree`);const{children:o,displayName:l,hocDisplayNames:c,key:_,treeBaseDuration:m,compiledWithForget:g}=i,y=n.get(e)||0,v=s.get(e)||0,w=n.has(e),b=l||"Anonymous",S=null!==_?` key="${_}"`:"";let E="";const D=g?"✨ ":"";null!==c&&c.length>0&&(E=` (${c[0]})`);let k=`${D}${b}${E}${S}`;w&&(k+=` (${C(v)}ms of ${C(y)}ms)`),u=Math.max(u,r),f=Math.max(f,v);const x={actualDuration:y,didRender:w,id:e,label:k,name:b,offset:t-m,selfDuration:v,treeBaseDuration:m};r>d.length?d.push([x]):d[r-1].push(x);for(let e=o.length-1;e>=0;e--){const i=o[e];t-=p(i,t,r+1).treeBaseDuration}return x};let _=0;if(a.size>0){const e=a.get(i);if(null==e)throw Error(`Could not find root node with id "${i}" in commit tree`);for(let t=e.children.length-1;t>=0;t--){const r=e.children[t],i=a.get(r);if(null==i)throw Error(`Could not find node with id "${r}" in commit tree`);_+=i.treeBaseDuration,p(r,_,1)}n.forEach(((e,t)=>{let r=a.get(t);if(null!=r){let e=r.parentID;for(;0!==e&&!c.has(e);)c.add(e),r=a.get(e),e=null!=r?r.parentID:0}}))}const m={baseDuration:_,depth:u,idToDepthMap:h,maxSelfDuration:f,renderPathNodes:c,rows:d};return O.set(l,m),m}({commitIndex:e,commitTree:t,profilerStore:this._profilerStore,rootID:r}))),B(this,"getRankedChartData",(({commitIndex:e,commitTree:t,rootID:r})=>function({commitIndex:e,commitTree:t,profilerStore:r,rootID:i}){const o=r.getCommitData(i,e),{fiberActualDurations:n,fiberSelfDurations:s}=o,{nodes:a}=t,l=`${i}-${e}`;if(R.has(l))return R.get(l);let h=0;const c=[];n.forEach(((e,t)=>{const r=a.get(t);if(null==r)throw Error(`Could not find node with id "${t}" in commit tree`);const{displayName:i,key:o,parentID:n,type:l,compiledWithForget:d}=r;if(0===n)return;const u=s.get(t)||0;h=Math.max(h,u);const _=i||"Anonymous";let m="";l===f?m=" (ForwardRef)":l===p&&(m=" (Memo)");const g=`${d?"✨ ":""}${_}${m}${null!==o?` key="${o}"`:""} (${C(u)}ms)`;c.push({id:t,label:g,name:_,value:u})}));const d={maxValue:h,nodes:c.sort(((e,t)=>t.value-e.value))};return R.set(l,d),d}({commitIndex:e,commitTree:t,profilerStore:this._profilerStore,rootID:r}))),this._profilerStore=e}invalidate(){this._fiberCommits.clear(),I.clear(),O.clear(),R.clear()}}const L=function(){};function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class W extends e{constructor(e,t,r){super(),M(this,"_dataBackends",[]),M(this,"_dataFrontend",null),M(this,"_initialRendererIDs",new Set),M(this,"_initialSnapshotsByRootID",new Map),M(this,"_inProgressOperationsByRootID",new Map),M(this,"_isBackendProfiling",!1),M(this,"_isProfilingBasedOnUserInput",!1),M(this,"_rendererIDsThatReportedProfilingData",new Set),M(this,"_rendererQueue",new Set),M(this,"_takeProfilingSnapshotRecursive",((e,t)=>{const r=this._store.getElementByID(e);if(null!==r){const i={id:e,children:r.children.slice(0),displayName:r.displayName,hocDisplayNames:r.hocDisplayNames,key:r.key,type:r.type,compiledWithForget:r.compiledWithForget};t.set(e,i),r.children.forEach((e=>this._takeProfilingSnapshotRecursive(e,t)))}})),M(this,"onBridgeOperations",(e=>{const t=e[0],r=e[1];if(this._isBackendProfiling){let i=this._inProgressOperationsByRootID.get(r);null==i?(i=[e],this._inProgressOperationsByRootID.set(r,i)):i.push(e),this._initialRendererIDs.has(t)||this._initialRendererIDs.add(t),this._initialSnapshotsByRootID.has(r)||this._initialSnapshotsByRootID.set(r,new Map),this._rendererIDsThatReportedProfilingData.add(t)}})),M(this,"onBridgeProfilingData",(e=>{if(this._isBackendProfiling)return;const{rendererID:t}=e;if(!this._rendererQueue.has(t))throw Error(`Unexpected profiling data update from renderer "${t}"`);this._dataBackends.push(e),this._rendererQueue.delete(t),0===this._rendererQueue.size&&(this._dataFrontend=function(e,t,r){const i=new Map,o=[];return e.forEach((e=>{const{timelineData:n}=e;if(null!=n){const{batchUIDToMeasuresKeyValueArray:e,internalModuleSourceToRanges:t,laneToLabelKeyValueArray:r,laneToReactMeasureKeyValueArray:i,...s}=n;o.push({...s,batchUIDToMeasuresMap:new Map(e),internalModuleSourceToRanges:new Map(t),laneToLabelMap:new Map(r),laneToReactMeasureMap:new Map(i)})}e.dataForRoots.forEach((({commitData:e,displayName:o,initialTreeBaseDurations:n,rootID:s})=>{const a=t.get(s);if(null==a)throw Error(`Could not find profiling operations for root "${s}"`);const l=r.get(s);if(null==l)throw Error(`Could not find profiling snapshots for root "${s}"`);const h=e.map(((e,t)=>({changeDescriptions:null!=e.changeDescriptions?new Map(e.changeDescriptions):null,duration:e.duration,effectDuration:e.effectDuration,fiberActualDurations:new Map(e.fiberActualDurations),fiberSelfDurations:new Map(e.fiberSelfDurations),passiveEffectDuration:e.passiveEffectDuration,priorityLevel:e.priorityLevel,timestamp:e.timestamp,updaters:null!==e.updaters?e.updaters.map(T):null})));i.set(s,{commitData:h,displayName:o,initialTreeBaseDurations:new Map(n),operations:a,rootID:s,snapshots:l})}))})),{dataForRoots:i,imported:!1,timelineData:o}}(this._dataBackends,this._inProgressOperationsByRootID,this._initialSnapshotsByRootID),this._dataBackends.splice(0),this.emit("isProcessingData"))})),M(this,"onBridgeShutdown",(()=>{this._bridge.removeListener("operations",this.onBridgeOperations),this._bridge.removeListener("profilingData",this.onBridgeProfilingData),this._bridge.removeListener("profilingStatus",this.onProfilingStatus),this._bridge.removeListener("shutdown",this.onBridgeShutdown)})),M(this,"onProfilingStatus",(e=>{if(this._isBackendProfiling!==e){if(e){this._dataBackends.splice(0),this._dataFrontend=null,this._initialRendererIDs.clear(),this._initialSnapshotsByRootID.clear(),this._inProgressOperationsByRootID.clear(),this._rendererIDsThatReportedProfilingData.clear(),this._rendererQueue.clear();for(const e of this._store.rootIDToRendererID.values())this._initialRendererIDs.has(e)||this._initialRendererIDs.add(e);this._store.roots.forEach((e=>{const t=new Map;this._initialSnapshotsByRootID.set(e,t),this._takeProfilingSnapshotRecursive(e,t)}))}this._isBackendProfiling=e,this._isProfilingBasedOnUserInput!==e&&(L({event_name:"error",error_message:`Unexpected profiling status. Expected ${this._isProfilingBasedOnUserInput.toString()}, but received ${e.toString()}.`,error_stack:(new Error).stack,error_component_stack:null}),this._isProfilingBasedOnUserInput=e),this._cache.invalidate(),e||(this._dataBackends.splice(0),this._rendererQueue.clear(),this._rendererIDsThatReportedProfilingData.forEach((e=>{this._rendererQueue.has(e)||(this._rendererQueue.add(e),this._bridge.send("getProfilingData",{rendererID:e}))})),this.emit("isProcessingData"))}})),this._bridge=e,this._isBackendProfiling=r,this._isProfilingBasedOnUserInput=r,this._store=t,e.addListener("operations",this.onBridgeOperations),e.addListener("profilingData",this.onBridgeProfilingData),e.addListener("profilingStatus",this.onProfilingStatus),e.addListener("shutdown",this.onBridgeShutdown),e.send("getProfilingStatus"),this._cache=new A(this)}getCommitData(e,t){if(null!==this._dataFrontend){const r=this._dataFrontend.dataForRoots.get(e);if(null!=r){const e=r.commitData[t];if(null!=e)return e}}throw Error(`Could not find commit data for root "${e}" and commit "${t}"`)}getDataForRoot(e){if(null!==this._dataFrontend){const t=this._dataFrontend.dataForRoots.get(e);if(null!=t)return t}throw Error(`Could not find commit data for root "${e}"`)}get didRecordCommits(){return null!==this._dataFrontend&&this._dataFrontend.dataForRoots.size>0}get isProcessingData(){return this._rendererQueue.size>0||this._dataBackends.length>0}get isProfilingBasedOnUserInput(){return this._isProfilingBasedOnUserInput}get profilingCache(){return this._cache}get profilingData(){return this._dataFrontend}set profilingData(e){this._isBackendProfiling?console.warn("Profiling data cannot be updated while profiling is in progress."):(this._dataBackends.splice(0),this._dataFrontend=e,this._initialRendererIDs.clear(),this._initialSnapshotsByRootID.clear(),this._inProgressOperationsByRootID.clear(),this._cache.invalidate(),this.emit("profilingData"))}clear(){this._dataBackends.splice(0),this._dataFrontend=null,this._initialRendererIDs.clear(),this._initialSnapshotsByRootID.clear(),this._inProgressOperationsByRootID.clear(),this._rendererQueue.clear(),this._cache.invalidate(),this.emit("profilingData")}startProfiling(){this._bridge.send("startProfiling",{recordChangeDescriptions:this._store.recordChangeDescriptions,recordTimeline:this._store.supportsTimeline}),this._isProfilingBasedOnUserInput=!0,this.emit("isProfiling")}stopProfiling(){this._bridge.send("stopProfiling"),this._isProfilingBasedOnUserInput=!1,this.emit("isProfiling")}}class F extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,F),this.name="UnsupportedBridgeOperationError"}}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const $="React::DevTools::collapseNodesByDefault",j="React::DevTools::recordChangeDescriptions";class V extends e{constructor(e,t){super(),U(this,"_backendVersion",null),U(this,"_cachedComponentWithErrorCount",0),U(this,"_cachedComponentWithWarningCount",0),U(this,"_cachedErrorAndWarningTuples",null),U(this,"_collapseNodesByDefault",!0),U(this,"_errorsAndWarnings",new Map),U(this,"_hasOwnerMetadata",!1),U(this,"_idToElement",new Map),U(this,"_isNativeStyleEditorSupported",!1),U(this,"_nativeStyleEditorValidAttributes",null),U(this,"_onBridgeProtocolTimeoutID",null),U(this,"_ownersMap",new Map),U(this,"_recordChangeDescriptions",!1),U(this,"_revision",0),U(this,"_roots",[]),U(this,"_rootIDToCapabilities",new Map),U(this,"_rootIDToRendererID",new Map),U(this,"_supportsInspectMatchingDOMElement",!1),U(this,"_supportsClickToInspect",!1),U(this,"_supportsTimeline",!1),U(this,"_supportsTraceUpdates",!1),U(this,"_isReloadAndProfileFrontendSupported",!1),U(this,"_isReloadAndProfileBackendSupported",!1),U(this,"_rootSupportsBasicProfiling",!1),U(this,"_rootSupportsTimelineProfiling",!1),U(this,"_bridgeProtocol",null),U(this,"_unsupportedBridgeProtocolDetected",!1),U(this,"_unsupportedRendererVersionDetected",!1),U(this,"_weightAcrossRoots",0),U(this,"_shouldCheckBridgeProtocolCompatibility",!1),U(this,"_hookSettings",null),U(this,"_shouldShowWarningsAndErrors",!1),U(this,"_adjustParentTreeWeight",((e,t)=>{let r=!1;for(;null!=e;){if(e.weight+=t,e.isCollapsed){r=!0;break}e=this._idToElement.get(e.parentID)}r||(this._weightAcrossRoots+=t)})),U(this,"onBridgeNativeStyleEditorSupported",(({isSupported:e,validAttributes:t})=>{this._isNativeStyleEditorSupported=e,this._nativeStyleEditorValidAttributes=t||null,this.emit("supportsNativeStyleEditor")})),U(this,"onBridgeOperations",(e=>{let t=!1,r=!1;const i=e[0],o=[],n=new Map;let s=2;const a=[null],l=e[s];s++;const h=s+l;for(;s<h;){const t=e[s];s++;const r=b(e,s,s+t-1);a.push(r),s+=t}for(;s<e.length;){const l=e[s];switch(l){case 1:{const r=e[s+1],n=e[s+2];if(s+=3,this._idToElement.has(r)&&this._throwAndEmitError(Error(`Cannot add node "${r}" because a node with that id is already in the Store.`)),11===n){const o=e[s]>0;s++;const a=0!=(1&e[s]),l=0!=(2&e[s]);s++;let h=!1,c=!1;(null===this._bridgeProtocol||this._bridgeProtocol.version>=2)&&(h=e[s]>0,s++,c=e[s]>0,s++),this._roots=this._roots.concat(r),this._rootIDToRendererID.set(r,i),this._rootIDToCapabilities.set(r,{supportsBasicProfiling:a,hasOwnerMetadata:c,supportsStrictMode:h,supportsTimeline:l});const d=!o&&h;this._idToElement.set(r,{children:[],depth:-1,displayName:null,hocDisplayNames:null,id:r,isCollapsed:!1,isStrictModeNonCompliant:d,key:null,ownerID:0,parentID:0,type:n,weight:0,compiledWithForget:!1}),t=!0}else{const t=e[s];s++;const i=e[s];s++;const l=a[e[s]];s++;const h=a[e[s]];s++;const c=this._idToElement.get(t);if(void 0===c){this._throwAndEmitError(Error(`Cannot add child "${r}" to parent "${t}" because parent node was not found in the Store.`));break}c.children.push(r);const{formattedDisplayName:d,hocDisplayNames:u,compiledWithForget:f}=k(l,n),p={children:[],depth:c.depth+1,displayName:d,hocDisplayNames:u,id:r,isCollapsed:this._collapseNodesByDefault,isStrictModeNonCompliant:c.isStrictModeNonCompliant,key:h,ownerID:i,parentID:t,type:n,weight:1,compiledWithForget:f};if(this._idToElement.set(r,p),o.push(r),this._adjustParentTreeWeight(c,1),i>0){let e=this._ownersMap.get(i);void 0===e&&(e=new Set,this._ownersMap.set(i,e)),e.add(r)}}break}case 2:{const i=e[s+1];s+=2;for(let o=0;o<i;o++){const i=e[s],o=this._idToElement.get(i);if(void 0===o){this._throwAndEmitError(Error(`Cannot remove node "${i}" because no matching node was found in the Store.`));break}s+=1;const{children:a,ownerID:l,parentID:h,weight:c}=o;a.length>0&&this._throwAndEmitError(Error(`Node "${i}" was removed before its children.`)),this._idToElement.delete(i);let d=null;if(0===h)this._roots=this._roots.filter((e=>e!==i)),this._rootIDToRendererID.delete(i),this._rootIDToCapabilities.delete(i),t=!0;else{if(d=this._idToElement.get(h),void 0===d){this._throwAndEmitError(Error(`Cannot remove node "${i}" from parent "${h}" because no matching node was found in the Store.`));break}const e=d.children.indexOf(i);d.children.splice(e,1)}if(this._adjustParentTreeWeight(d,-c),n.set(i,h),this._ownersMap.delete(i),l>0){const e=this._ownersMap.get(l);void 0!==e&&e.delete(i)}this._errorsAndWarnings.has(i)&&(this._errorsAndWarnings.delete(i),r=!0)}break}case 6:{s+=1;const t=e[1],r=e=>{const t=this._idToElement.get(e);if(this._idToElement.delete(e),t)for(let e=0;e<t.children.length;e++)r(t.children[e])},i=this._idToElement.get(t);if(void 0===i){this._throwAndEmitError(Error(`Cannot remove root "${t}": no matching node was found in the Store.`));break}r(t),this._rootIDToCapabilities.delete(t),this._rootIDToRendererID.delete(t),this._roots=this._roots.filter((e=>e!==t)),this._weightAcrossRoots-=i.weight;break}case 3:{const t=e[s+1],r=e[s+2];s+=3;const i=this._idToElement.get(t);if(void 0===i){this._throwAndEmitError(Error(`Cannot reorder children for node "${t}" because no matching node was found in the Store.`));break}const o=i.children;o.length!==r&&this._throwAndEmitError(Error("Children cannot be added or removed during a reorder operation."));for(let t=0;t<r;t++){const r=e[s+t];o[t]=r}s+=r;break}case 7:{const t=e[s+1],r=e[s+2];s+=3,1===r&&this._recursivelyUpdateSubtree(t,(e=>{e.isStrictModeNonCompliant=!1}));break}case 4:s+=3;break;case 5:const h=e[s+1],c=e[s+2],d=e[s+3];s+=4,c>0||d>0?this._errorsAndWarnings.set(h,{errorCount:c,warningCount:d}):this._errorsAndWarnings.has(h)&&this._errorsAndWarnings.delete(h),r=!0;break;default:this._throwAndEmitError(new F(`Unsupported Bridge operation "${l}"`))}}if(this._revision++,this._cachedErrorAndWarningTuples=null,r){let e=0,t=0;this._errorsAndWarnings.forEach((r=>{r.errorCount>0&&e++,r.warningCount>0&&t++})),this._cachedComponentWithErrorCount=e,this._cachedComponentWithWarningCount=t}if(t){const e=this._rootSupportsBasicProfiling,t=this._rootSupportsTimelineProfiling;this._hasOwnerMetadata=!1,this._rootSupportsBasicProfiling=!1,this._rootSupportsTimelineProfiling=!1,this._rootIDToCapabilities.forEach((({supportsBasicProfiling:e,hasOwnerMetadata:t,supportsTimeline:r})=>{e&&(this._rootSupportsBasicProfiling=!0),t&&(this._hasOwnerMetadata=!0),r&&(this._rootSupportsTimelineProfiling=!0)})),this.emit("roots"),this._rootSupportsBasicProfiling!==e&&this.emit("rootSupportsBasicProfiling"),this._rootSupportsTimelineProfiling!==t&&this.emit("rootSupportsTimelineProfiling")}this.emit("mutated",[o,n])})),U(this,"onBridgeOverrideComponentFilters",(e=>{this._componentFilters=e,E(e)})),U(this,"onBridgeShutdown",(()=>{const e=this._bridge;e.removeListener("operations",this.onBridgeOperations),e.removeListener("overrideComponentFilters",this.onBridgeOverrideComponentFilters),e.removeListener("shutdown",this.onBridgeShutdown),e.removeListener("isReloadAndProfileSupportedByBackend",this.onBackendReloadAndProfileSupported),e.removeListener("isNativeStyleEditorSupported",this.onBridgeNativeStyleEditorSupported),e.removeListener("unsupportedRendererVersion",this.onBridgeUnsupportedRendererVersion),e.removeListener("backendVersion",this.onBridgeBackendVersion),e.removeListener("bridgeProtocol",this.onBridgeProtocol),e.removeListener("saveToClipboard",this.onSaveToClipboard),null!==this._onBridgeProtocolTimeoutID&&(clearTimeout(this._onBridgeProtocolTimeoutID),this._onBridgeProtocolTimeoutID=null)})),U(this,"onBackendReloadAndProfileSupported",(e=>{this._isReloadAndProfileBackendSupported=e,this.emit("supportsReloadAndProfile")})),U(this,"onBridgeUnsupportedRendererVersion",(()=>{this._unsupportedRendererVersionDetected=!0,this.emit("unsupportedRendererVersionDetected")})),U(this,"onBridgeBackendVersion",(e=>{this._backendVersion=e,this.emit("backendVersion")})),U(this,"onBridgeProtocol",(e=>{null!==this._onBridgeProtocolTimeoutID&&(clearTimeout(this._onBridgeProtocolTimeoutID),this._onBridgeProtocolTimeoutID=null),this._bridgeProtocol=e,e.version,n.version})),U(this,"onBridgeProtocolTimeout",(()=>{this._onBridgeProtocolTimeoutID=null,this._bridgeProtocol=o[0],this.emit("unsupportedBridgeProtocolDetected")})),U(this,"onSaveToClipboard",(e=>{(0,a.copy)(e)})),U(this,"onBackendInitialized",(()=>{this._shouldCheckBridgeProtocolCompatibility&&(this._onBridgeProtocolTimeoutID=setTimeout(this.onBridgeProtocolTimeout,1e4),this._bridge.addListener("bridgeProtocol",this.onBridgeProtocol),this._bridge.send("getBridgeProtocol")),this._bridge.send("getBackendVersion"),this._bridge.send("getIfHasUnsupportedRendererVersion"),this._bridge.send("getHookSettings")})),U(this,"getHookSettings",(()=>{null!=this._hookSettings?this.emit("hookSettings",this._hookSettings):this._bridge.send("getHookSettings")})),U(this,"updateHookSettings",(e=>{this._hookSettings=e,this._bridge.send("updateHookSettings",e),this.emit("settingsUpdated",e)})),U(this,"onHookSettings",(e=>{this._hookSettings=e,this.setShouldShowWarningsAndErrors(e.showInlineWarningsAndErrors),this.emit("hookSettings",e)})),this._collapseNodesByDefault="true"===v($),this._recordChangeDescriptions="true"===v(j),this._componentFilters=S();let r=!1;if(null!=t){r=!0===t.isProfiling;const{supportsInspectMatchingDOMElement:e,supportsClickToInspect:i,supportsReloadAndProfile:o,supportsTimeline:n,supportsTraceUpdates:s,checkBridgeProtocolCompatibility:a}=t;e&&(this._supportsInspectMatchingDOMElement=!0),i&&(this._supportsClickToInspect=!0),o&&(this._isReloadAndProfileFrontendSupported=!0),n&&(this._supportsTimeline=!0),s&&(this._supportsTraceUpdates=!0),a&&(this._shouldCheckBridgeProtocolCompatibility=!0)}this._bridge=e,e.addListener("operations",this.onBridgeOperations),e.addListener("overrideComponentFilters",this.onBridgeOverrideComponentFilters),e.addListener("shutdown",this.onBridgeShutdown),e.addListener("isReloadAndProfileSupportedByBackend",this.onBackendReloadAndProfileSupported),e.addListener("isNativeStyleEditorSupported",this.onBridgeNativeStyleEditorSupported),e.addListener("unsupportedRendererVersion",this.onBridgeUnsupportedRendererVersion),this._profilerStore=new W(e,this,r),e.addListener("backendVersion",this.onBridgeBackendVersion),e.addListener("saveToClipboard",this.onSaveToClipboard),e.addListener("hookSettings",this.onHookSettings),e.addListener("backendInitialized",this.onBackendInitialized)}assertExpectedRootMapSizes(){0===this.roots.length&&(this.assertMapSizeMatchesRootCount(this._idToElement,"_idToElement"),this.assertMapSizeMatchesRootCount(this._ownersMap,"_ownersMap")),this.assertMapSizeMatchesRootCount(this._rootIDToCapabilities,"_rootIDToCapabilities"),this.assertMapSizeMatchesRootCount(this._rootIDToRendererID,"_rootIDToRendererID")}assertMapSizeMatchesRootCount(e,t){const r=this.roots.length;e.size!==r&&this._throwAndEmitError(Error(`Expected ${t} to contain ${r} items, but it contains ${e.size} items\n\n${(0,l.inspect)(e,{depth:20})}`))}get backendVersion(){return this._backendVersion}get collapseNodesByDefault(){return this._collapseNodesByDefault}set collapseNodesByDefault(e){this._collapseNodesByDefault=e,w($,e?"true":"false"),this.emit("collapseNodesByDefault")}get componentFilters(){return this._componentFilters}set componentFilters(e){this._profilerStore.isProfilingBasedOnUserInput&&this._throwAndEmitError(Error("Cannot modify filter preferences while profiling"));const t=this._componentFilters.filter((e=>e.isEnabled)),r=e.filter((e=>e.isEnabled));let i=t.length!==r.length;if(!i)for(let e=0;e<r.length;e++)if(x(t[e],r[e])){i=!0;break}this._componentFilters=e,E(e),i&&this._bridge.send("updateComponentFilters",e),this.emit("componentFilters")}get bridgeProtocol(){return this._bridgeProtocol}get componentWithErrorCount(){return this._shouldShowWarningsAndErrors?this._cachedComponentWithErrorCount:0}get componentWithWarningCount(){return this._shouldShowWarningsAndErrors?this._cachedComponentWithWarningCount:0}get displayingErrorsAndWarningsEnabled(){return this._shouldShowWarningsAndErrors}get hasOwnerMetadata(){return this._hasOwnerMetadata}get nativeStyleEditorValidAttributes(){return this._nativeStyleEditorValidAttributes}get numElements(){return this._weightAcrossRoots}get profilerStore(){return this._profilerStore}get recordChangeDescriptions(){return this._recordChangeDescriptions}set recordChangeDescriptions(e){this._recordChangeDescriptions=e,w(j,e?"true":"false"),this.emit("recordChangeDescriptions")}get revision(){return this._revision}get rootIDToRendererID(){return this._rootIDToRendererID}get roots(){return this._roots}get rootSupportsBasicProfiling(){return this._rootSupportsBasicProfiling}get rootSupportsTimelineProfiling(){return this._rootSupportsTimelineProfiling}get supportsInspectMatchingDOMElement(){return this._supportsInspectMatchingDOMElement}get supportsClickToInspect(){return this._supportsClickToInspect}get supportsNativeStyleEditor(){return this._isNativeStyleEditorSupported}get supportsReloadAndProfile(){return this._isReloadAndProfileFrontendSupported&&this._isReloadAndProfileBackendSupported}get supportsTimeline(){return this._supportsTimeline}get supportsTraceUpdates(){return this._supportsTraceUpdates}get unsupportedBridgeProtocolDetected(){return this._unsupportedBridgeProtocolDetected}get unsupportedRendererVersionDetected(){return this._unsupportedRendererVersionDetected}containsElement(e){return this._idToElement.has(e)}getElementAtIndex(e){if(e<0||e>=this.numElements)return console.warn(`Invalid index ${e} specified; store contains ${this.numElements} items.`),null;let t,r=0;for(let i=0;i<this._roots.length;i++){const o=this._roots[i];if(t=this._idToElement.get(o),void 0===t)return this._throwAndEmitError(Error(`Couldn't find root with id "${o}": no matching node was found in the Store.`)),null;if(0!==t.children.length){if(r+t.weight>e)break;r+=t.weight}}if(void 0===t)return null;let i=t,o=r-1;for(;e!==o;){const t=i.children.length;for(let r=0;r<t;r++){const t=i.children[r],n=this._idToElement.get(t);if(void 0===n)return this._throwAndEmitError(Error(`Couldn't child element with id "${t}": no matching node was found in the Store.`)),null;const s=n.isCollapsed?1:n.weight;if(e<=o+s){o++,i=n;break}o+=s}}return i||null}getElementIDAtIndex(e){const t=this.getElementAtIndex(e);return null===t?null:t.id}getElementByID(e){const t=this._idToElement.get(e);return void 0===t?(console.warn(`No element found with id "${e}"`),null):t}getElementsWithErrorsAndWarnings(){if(!this._shouldShowWarningsAndErrors)return[];if(null!==this._cachedErrorAndWarningTuples)return this._cachedErrorAndWarningTuples;const e=[];return this._errorsAndWarnings.forEach(((t,r)=>{const i=this.getIndexOfElementID(r);if(null!==i){let t=0,o=e.length;for(;t<o;){const r=t+o>>1;e[r].index>i?o=r:t=r+1}e.splice(t,0,{id:r,index:i})}})),this._cachedErrorAndWarningTuples=e,e}getErrorAndWarningCountForElementID(e){return this._shouldShowWarningsAndErrors&&this._errorsAndWarnings.get(e)||{errorCount:0,warningCount:0}}getIndexOfElementID(e){const t=this.getElementByID(e);if(null===t||0===t.parentID)return null;let r=e,i=t.parentID,o=0;for(;;){const e=this._idToElement.get(i);if(void 0===e)return null;const{children:t}=e;for(let e=0;e<t.length;e++){const i=t[e];if(i===r)break;const n=this._idToElement.get(i);if(void 0===n)return null;o+=n.isCollapsed?1:n.weight}if(0===e.parentID)break;o++,r=e.id,i=e.parentID}for(let e=0;e<this._roots.length;e++){const t=this._roots[e];if(t===i)break;const r=this._idToElement.get(t);if(void 0===r)return null;o+=r.weight}return o}getOwnersListForElement(e){const t=[],r=this._idToElement.get(e);if(void 0!==r){t.push({...r,depth:0});const i=this._ownersMap.get(e);if(void 0!==i){const r=new Map([[e,0]]);Array.from(i).sort(((e,t)=>(this.getIndexOfElementID(e)||0)-(this.getIndexOfElementID(t)||0))).forEach((o=>{const n=this._idToElement.get(o);if(void 0!==n){let s=n.parentID,a=0;for(;s>0;){if(s===e||i.has(s)){a=r.get(s)+1,r.set(o,a);break}const t=this._idToElement.get(s);if(void 0===t)break;s=t.parentID}0===a&&this._throwAndEmitError(Error("Invalid owners list")),t.push({...n,depth:a})}}))}}return t}getRendererIDForElement(e){let t=this._idToElement.get(e);for(;void 0!==t;){if(0===t.parentID){const e=this._rootIDToRendererID.get(t.id);return null==e?null:e}t=this._idToElement.get(t.parentID)}return null}getRootIDForElement(e){let t=this._idToElement.get(e);for(;void 0!==t;){if(0===t.parentID)return t.id;t=this._idToElement.get(t.parentID)}return null}isInsideCollapsedSubTree(e){let t=this._idToElement.get(e);for(;null!=t;){if(0===t.parentID)return!1;if(t=this._idToElement.get(t.parentID),null!=t&&t.isCollapsed)return!0}return!1}toggleIsCollapsed(e,t){let r=!1;const i=this.getElementByID(e);if(null!==i){if(t){if(11===i.type&&this._throwAndEmitError(Error("Root nodes cannot be collapsed")),!i.isCollapsed){r=!0,i.isCollapsed=!0;const e=1-i.weight;let t=this._idToElement.get(i.parentID);for(;void 0!==t;)t.weight+=e,t=this._idToElement.get(t.parentID)}}else{let e=i;for(;null!=e;){const t=e.isCollapsed?1:e.weight;if(e.isCollapsed){r=!0,e.isCollapsed=!1;const i=(e.isCollapsed?1:e.weight)-t;let o=this._idToElement.get(e.parentID);for(;void 0!==o&&(o.weight+=i,!o.isCollapsed);)o=this._idToElement.get(o.parentID)}e=0!==e.parentID?this.getElementByID(e.parentID):null}}if(r){let e=0;this._roots.forEach((t=>{const{weight:r}=this.getElementByID(t);e+=r})),this._weightAcrossRoots=e,this.emit("mutated",[[],new Map])}}}_recursivelyUpdateSubtree(e,t){const r=this._idToElement.get(e);r&&(t(r),r.children.forEach((e=>this._recursivelyUpdateSubtree(e,t))))}setShouldShowWarningsAndErrors(e){const t=this._shouldShowWarningsAndErrors;this._shouldShowWarningsAndErrors=e,t!==e&&this.emit("mutated",[[],new Map])}_throwAndEmitError(e){throw this.emit("error",e),e}}var G=r(33);const q=require("path"),z=require("fs"),H="undefined"!=typeof performance&&"function"==typeof performance.mark&&"function"==typeof performance.clearMarks,Q="undefined"!=typeof performance&&"function"==typeof performance.now;function Y(){return Q?performance.now():Date.now()}for(var J={},K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",X=0;X<65;X++)J[K.charCodeAt(X)]=X;function Z(e,t,r){4===r?e.push([t[0],t[1],t[2],t[3]]):5===r?e.push([t[0],t[1],t[2],t[3],t[4]]):1===r&&e.push([t[0]])}function ee(e){return null!=e.sections?function(e){let t={line:-1,column:0};const r=e.sections.map((e=>{const r=e.offset,i=r.line,o=r.column;if(i<t.line||i===t.line&&o<t.column)throw new Error("Section offsets must be ordered and non-overlapping.");return t=r,{generatedLine:i+1,generatedColumn:o+1,map:e.map,sourceMapConsumer:null}}));return{originalPositionFor:function({columnNumber:e,lineNumber:t}){const i=e-1;let o=null,n=0,s=r.length-1,a=-1;for(;n<=s;){a=Math.floor((s+n)/2),o=r[a];const e=o.generatedLine;if(e===t){const e=o.generatedColumn;if(e===t)break;if(e>i){if(!(s-a>0)){a=s;break}s=a}else{if(!(a-n>0)){a=n;break}n=a}}else if(e>t){if(!(s-a>0)){a=s;break}s=a}else{if(!(a-n>0)){a=n;break}n=a}}if(null==o)throw Error(`Could not find matching section for line:${t} and column:${e}`);return null===o.sourceMapConsumer&&(o.sourceMapConsumer=new ee(o.map)),o.sourceMapConsumer.originalPositionFor({columnNumber:e,lineNumber:t})}}}(e):function(e){const t=function(t,r,i){Y();h&&function(e){H&&performance.mark(e+"-start")}(t);const o=function(e){for(var t=[],r=[],i=[0,0,0,0,0],o=0,n=0,s=0,a=0;n<e.length;n++){var l=e.charCodeAt(n);if(44===l)Z(r,i,o),o=0;else if(59===l)Z(r,i,o),o=0,t.push(r),r=[],i[0]=0;else{var h=J[l];if(void 0===h)throw new Error("Invalid character ("+String.fromCharCode(l)+")");var c=32&h;if(a+=(h&=31)<<s,c)s+=5;else{var d=1&a;a>>>=1,d&&(a=0===a?-2147483648:-a),i[o]+=a,o++,a=s=0}}}return Z(r,i,o),t.push(r),t}(e.mappings);return h&&function(e){H&&(performance.mark(e+"-end"),performance.measure(e,e+"-start",e+"-end"),performance.clearMarks(e+"-start"),performance.clearMarks(e+"-end"))}(t),o}("Decoding source map mappings with sourcemap-codec");return{originalPositionFor:function({columnNumber:r,lineNumber:i}){const o=r-1,n=t[i-1];let s=null,a=0,l=n.length-1,h=-1;for(;a<=l;){h=Math.floor((l+a)/2),s=n[h];const e=s[0];if(e===o)break;if(e>o){if(!(l-h>0)){h=l;break}l=h}else{if(!(h-a>0)){h=a;break}a=h}}for(;h>0&&n[h-1][0]===o;)h--;if(null==s)throw Error(`Could not find runtime location for line:${i} and column:${r}`);const c=s[1],d=null!=e.sourcesContent?e.sourcesContent[c]:null,u=e.sources[c]??null,f=s[2]+1;return{column:s[3],line:f,sourceContent:d,sourceURL:u}}}}(e)}const te=new Map;const re="sourceMappingURL=";let ie=(e,t)=>{le("Status",e,t)},oe=()=>{},ne=()=>{},se=null,ae=null;const le=(...e)=>console.log("[React DevTools]",...e);le.warn=(...e)=>console.warn("[React DevTools]",...e),le.error=(...e)=>console.error("[React DevTools]",...e);let he=0;function ce(){oe()}function de({code:e,message:t}){console.error(`Error: ${e} ${t}`)}function ue(e){const t=[];e.onmessage=e=>{let r;try{if("string"!=typeof e.data)throw Error();r=JSON.parse(e.data)}catch(t){return void le.error("Failed to parse JSON",e.data)}t.forEach((e=>{try{e(r)}catch(e){throw le.error("Error calling listener",r),e}}))},se=new s({listen:e=>(t.push(e),()=>{const r=t.indexOf(e);r>=0&&t.splice(r,1)}),send(t,r,i){e.readyState===e.OPEN&&e.send(JSON.stringify({event:t,payload:r}))}}),se.addListener("shutdown",(()=>{e.close()})),ae=new V(se,{checkBridgeProtocolCompatibility:!0,supportsTraceUpdates:!0,supportsClickToInspect:!0}),le("Connected"),ie("DevTools initialized.","devtools-connected"),function(){if(!se||!ae)return void console.log("no bridge or store");const e=se,t=ae;e.addListener("selectElement",(r=>{console.log("selected an element with id ",r);const i=t.getRendererIDForElement(r);if(null===i)return void console.log("no renderer id");const o={id:r,rendererID:i,requestID:he++,path:null,forceFullData:!0};e.send("inspectElement",o)})),e.addListener("inspectedElement",(async e=>{if(null==e)return null;if("full-data"===e.type){if(console.log("devtools got full data",e),null==e.value.source)return Promise.resolve(null);const{sourceURL:t,line:r,column:i}=e.value.source,o=await async function(e,t,r,i){const o=`${t}:${r}:${i}`,n=te.get(o);if(null!=n)return n;const s=async function(e,t,r,i){const o=await e(t).catch((()=>null));if(null==o)return null;const n=o.split(/[\r\n]+/);for(let o=n.length-1;o>=0;--o){const a=n[o];if(a){if(!a.startsWith("//#"))break;if(a.includes(re)){const o=a.indexOf(re),n=a.slice(o+re.length,a.length),l=new URL(n,t).toString(),h=await e(l).catch((()=>null));if(null!=h)try{const e=ee(JSON.parse(h)),{sourceURL:t,line:o,column:n}=e.originalPositionFor({lineNumber:r,columnNumber:i});if(null===t)return null;try{return new URL(t),{sourceURL:(s=t,s.replace("/./","/")),line:o,column:n}}catch(e){return t.startsWith("/")||t.slice(1).startsWith(":\\\\")?{sourceURL:t,line:o,column:n}:{sourceURL:new URL(t,l).toString(),line:o,column:n}}}catch(e){return null}return null}}}var s;return null}(e,t,r,i);return te.set(o,s),s}(pe,t,r,i);console.log("devtools symbolicated source",o),null!==o&&(console.log("devtools symbolicated source",o),e.value.source=o),ne(e)}else ne(e)}))}()}const fe=new Map;async function pe(e){if(fe.has(e)){const t=fe.get(e);if(null!=t)return Promise.resolve(t)}return fetch(e).then((e=>e.text())).then((t=>(fe.set(e,t),t)))}const _e={currentPort:null,connectToSocket:function(e){return e.onerror=e=>{ce(),le.error("Error with websocket connection",e)},e.onclose=()=>{ce(),le("Connection to RN closed")},ue(e),{close:function(){ce()}}},setStatusListener:function(e){return ie=e,_e},setDisconnectedCallback:function(e){return oe=e,_e},startServer:function e(t=8097,i="localhost",o,n,s=0){n?.surface;const a=!!o,l=a?r(687).createServer(o):r(685).createServer(),h=new G.Server({server:l,maxPayload:1e9});let c=null;return h.on("connection",(e=>{null!==c&&(c.close(),le.warn("Only one connection allowed at a time.","Closing the previous connection")),c=e,e.onerror=e=>{c=null,ce(),le.error("Error with websocket connection",e)},e.onclose=()=>{c=null,ce(),le("Connection to RN closed")},ue(e)})),h.on("error",(function(r){if("EADDRINUSE"===r.code){if(s<10)return le.warn(`Port ${t} in use, trying port ${t+1}...`),e(t+1,i,o,n,s+1);de(r),ie("Failed to start the server after 10 attempts.","error")}else de(r),ie("Failed to start the server.","error");return _e})),l.on("error",(function(e){return de(e),ie("Failed to start the server.","error"),_e})),l.on("request",((e,r)=>{const o=(0,z.readFileSync)((0,q.join)(__dirname,"backend.js")),n=`\n      window.__REACT_DEVTOOLS_COMPONENT_FILTERS__ = ${JSON.stringify(S())};`;r.end(n+"\n;"+o.toString()+"\n;ReactDevToolsBackend.initialize();\n"+`ReactDevToolsBackend.connectToDevTools({port: ${t}, host: '${i}', useHttps: ${a?"true":"false"}});\n        `)})),l.listen(t,(()=>{_e.currentPort=t,ie("The server is listening on the port "+t+".","server-connected")})),_e},setDataCallback:function(e){return ne=e,_e},startInspectingHost:function(){return se&&ae?(se.send("startInspectingHost"),_e):(console.log("no bridge or store"),_e)},stopInspectingHost:function(){return se&&ae?(se.send("stopInspectingHost",!1),_e):(console.log("no bridge or store"),_e)}},me=_e})(),module.exports=i})();
//# sourceMappingURL=standalone.js.map
{"version":3,"file":"standalone.js","mappings":"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","sources":["webpack://cs-react-devtools-core/../../node_modules/clipboard-js/clipboard.js","webpack://cs-react-devtools-core/../../node_modules/lru-cache/index.js","webpack://cs-react-devtools-core/../../node_modules/process/browser.js","webpack://cs-react-devtools-core/../../node_modules/pseudomap/map.js","webpack://cs-react-devtools-core/../../node_modules/pseudomap/pseudomap.js","webpack://cs-react-devtools-core/../../node_modules/ws/index.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/buffer-util.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/constants.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/event-target.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/extension.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/limiter.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/permessage-deflate.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/receiver.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/sender.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/stream.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/validation.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/websocket-server.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/websocket.js","webpack://cs-react-devtools-core/../../node_modules/yallist/yallist.js","webpack://cs-react-devtools-core/external commonjs \"bufferutil\"","webpack://cs-react-devtools-core/external commonjs \"utf-8-validate\"","webpack://cs-react-devtools-core/external node-commonjs \"crypto\"","webpack://cs-react-devtools-core/external node-commonjs \"events\"","webpack://cs-react-devtools-core/external node-commonjs \"http\"","webpack://cs-react-devtools-core/external node-commonjs \"https\"","webpack://cs-react-devtools-core/external node-commonjs \"net\"","webpack://cs-react-devtools-core/external node-commonjs \"stream\"","webpack://cs-react-devtools-core/external node-commonjs \"tls\"","webpack://cs-react-devtools-core/external node-commonjs \"url\"","webpack://cs-react-devtools-core/external node-commonjs \"util\"","webpack://cs-react-devtools-core/external node-commonjs \"zlib\"","webpack://cs-react-devtools-core/webpack/bootstrap","webpack://cs-react-devtools-core/webpack/runtime/compat get default export","webpack://cs-react-devtools-core/webpack/runtime/define property getters","webpack://cs-react-devtools-core/webpack/runtime/hasOwnProperty shorthand","webpack://cs-react-devtools-core/webpack/runtime/make namespace object","webpack://cs-react-devtools-core/../react-devtools-shared/src/events.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/bridge.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/constants.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/frontend/types.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/storage.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/utils.js","webpack://cs-react-devtools-core/../shared/ReactSymbols.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/hydration.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/isArray.js","webpack://cs-react-devtools-core/../shared/isArray.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/devtools/views/Profiler/utils.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/devtools/views/Profiler/CommitTreeBuilder.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/devtools/views/Profiler/FlamegraphChartBuilder.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/devtools/views/Profiler/RankedChartBuilder.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/devtools/ProfilingCache.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/Logger.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/devtools/ProfilerStore.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/UnsupportedBridgeOperationError.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/devtools/store.js","webpack://cs-react-devtools-core/external node-commonjs \"path\"","webpack://cs-react-devtools-core/external node-commonjs \"fs\"","webpack://cs-react-devtools-core/../react-devtools-shared/src/PerformanceLoggingUtils.js","webpack://cs-react-devtools-core/../src/sourcemap-codec.ts","webpack://cs-react-devtools-core/../react-devtools-shared/src/hooks/SourceMapConsumer.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/symbolicateSource.js","webpack://cs-react-devtools-core/./src/standalone.js"],"sourcesContent":["//  Import support https://stackoverflow.com/questions/13673346/supporting-both-commonjs-and-amd\n(function(name, definition) {\n    if (typeof module !== \"undefined\") { module.exports = definition(); }\n    else if (typeof define === \"function\" && typeof define.amd === \"object\") { define(definition); }\n    else { this[name] = definition(); }\n}(\"clipboard\", function() {\n  if (typeof document === 'undefined' || !document.addEventListener) {\n    return null;\n  }\n\n  var clipboard = {};\n\n  clipboard.copy = (function() {\n    var _intercept = false;\n    var _data = null; // Map from data type (e.g. \"text/html\") to value.\n    var _bogusSelection = false;\n\n    function cleanup() {\n      _intercept = false;\n      _data = null;\n      if (_bogusSelection) {\n        window.getSelection().removeAllRanges();\n      }\n      _bogusSelection = false;\n    }\n\n    document.addEventListener(\"copy\", function(e) {\n      if (_intercept) {\n        for (var key in _data) {\n          e.clipboardData.setData(key, _data[key]);\n        }\n        e.preventDefault();\n      }\n    });\n\n    // Workaround for Safari: https://bugs.webkit.org/show_bug.cgi?id=156529\n    function bogusSelect() {\n      var sel = document.getSelection();\n      // If \"nothing\" is selected...\n      if (!document.queryCommandEnabled(\"copy\") && sel.isCollapsed) {\n        // ... temporarily select the entire body.\n        //\n        // We select the entire body because:\n        // - it's guaranteed to exist,\n        // - it works (unlike, say, document.head, or phantom element that is\n        //   not inserted into the DOM),\n        // - it doesn't seem to flicker (due to the synchronous copy event), and\n        // - it avoids modifying the DOM (can trigger mutation observers).\n        //\n        // Because we can't do proper feature detection (we already checked\n        // document.queryCommandEnabled(\"copy\") , which actually gives a false\n        // negative for Blink when nothing is selected) and UA sniffing is not\n        // reliable (a lot of UA strings contain \"Safari\"), this will also\n        // happen for some browsers other than Safari. :-()\n        var range = document.createRange();\n        range.selectNodeContents(document.body);\n        sel.removeAllRanges();\n        sel.addRange(range);\n        _bogusSelection = true;\n      }\n    };\n\n    return function(data) {\n      return new Promise(function(resolve, reject) {\n        _intercept = true;\n        if (typeof data === \"string\") {\n          _data = {\"text/plain\": data};\n        } else if (data instanceof Node) {\n          _data = {\"text/html\": new XMLSerializer().serializeToString(data)};\n        } else if (data instanceof Object){\n          _data = data;\n        } else {\n          reject(\"Invalid data type. Must be string, DOM node, or an object mapping MIME types to strings.\")\n        }\n\n        function triggerCopy(tryBogusSelect) {\n          try {\n            if (document.execCommand(\"copy\")) {\n              // document.execCommand is synchronous: http://www.w3.org/TR/2015/WD-clipboard-apis-20150421/#integration-with-rich-text-editing-apis\n              // So we can call resolve() back here.\n              cleanup();\n              resolve();\n            }\n            else {\n              if (!tryBogusSelect) {\n                bogusSelect();\n                triggerCopy(true);\n              } else {\n                cleanup();\n                throw new Error(\"Unable to copy. Perhaps it's not available in your browser?\");\n              }\n            }\n          } catch (e) {\n            cleanup();\n            reject(e);\n          }\n        }\n        triggerCopy(false);\n\n      });\n    };\n  })();\n\n  clipboard.paste = (function() {\n    var _intercept = false;\n    var _resolve;\n    var _dataType;\n\n    document.addEventListener(\"paste\", function(e) {\n      if (_intercept) {\n        _intercept = false;\n        e.preventDefault();\n        var resolve = _resolve;\n        _resolve = null;\n        resolve(e.clipboardData.getData(_dataType));\n      }\n    });\n\n    return function(dataType) {\n      return new Promise(function(resolve, reject) {\n        _intercept = true;\n        _resolve = resolve;\n        _dataType = dataType || \"text/plain\";\n        try {\n          if (!document.execCommand(\"paste\")) {\n            _intercept = false;\n            reject(new Error(\"Unable to paste. Pasting only works in Internet Explorer at the moment.\"));\n          }\n        } catch (e) {\n          _intercept = false;\n          reject(new Error(e));\n        }\n      });\n    };\n  })();\n\n  // Handle IE behaviour.\n  if (typeof ClipboardEvent === \"undefined\" &&\n      typeof window.clipboardData !== \"undefined\" &&\n      typeof window.clipboardData.setData !== \"undefined\") {\n\n    /*! promise-polyfill 2.0.1 */\n    (function(a){function b(a,b){return function(){a.apply(b,arguments)}}function c(a){if(\"object\"!=typeof this)throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!=typeof a)throw new TypeError(\"not a function\");this._state=null,this._value=null,this._deferreds=[],i(a,b(e,this),b(f,this))}function d(a){var b=this;return null===this._state?void this._deferreds.push(a):void j(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var d;try{d=c(b._value)}catch(e){return void a.reject(e)}a.resolve(d)})}function e(a){try{if(a===this)throw new TypeError(\"A promise cannot be resolved with itself.\");if(a&&(\"object\"==typeof a||\"function\"==typeof a)){var c=a.then;if(\"function\"==typeof c)return void i(b(c,a),b(e,this),b(f,this))}this._state=!0,this._value=a,g.call(this)}catch(d){f.call(this,d)}}function f(a){this._state=!1,this._value=a,g.call(this)}function g(){for(var a=0,b=this._deferreds.length;b>a;a++)d.call(this,this._deferreds[a]);this._deferreds=null}function h(a,b,c,d){this.onFulfilled=\"function\"==typeof a?a:null,this.onRejected=\"function\"==typeof b?b:null,this.resolve=c,this.reject=d}function i(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var j=c.immediateFn||\"function\"==typeof setImmediate&&setImmediate||function(a){setTimeout(a,1)},k=Array.isArray||function(a){return\"[object Array]\"===Object.prototype.toString.call(a)};c.prototype[\"catch\"]=function(a){return this.then(null,a)},c.prototype.then=function(a,b){var e=this;return new c(function(c,f){d.call(e,new h(a,b,c,f))})},c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&k(arguments[0])?arguments[0]:arguments);return new c(function(b,c){function d(f,g){try{if(g&&(\"object\"==typeof g||\"function\"==typeof g)){var h=g.then;if(\"function\"==typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0===--e&&b(a)}catch(i){c(i)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},c.resolve=function(a){return a&&\"object\"==typeof a&&a.constructor===c?a:new c(function(b){b(a)})},c.reject=function(a){return new c(function(b,c){c(a)})},c.race=function(a){return new c(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})},\"undefined\"!=typeof module&&module.exports?module.exports=c:a.Promise||(a.Promise=c)})(this);\n\n    clipboard.copy = function(data) {\n      return new Promise(function(resolve, reject) {\n        // IE supports string and URL types: https://msdn.microsoft.com/en-us/library/ms536744(v=vs.85).aspx\n        // We only support the string type for now.\n        if (typeof data !== \"string\" && !(\"text/plain\" in data)) {\n          throw new Error(\"You must provide a text/plain type.\");\n        }\n\n        var strData = (typeof data === \"string\" ? data : data[\"text/plain\"]);\n        var copySucceeded = window.clipboardData.setData(\"Text\", strData);\n        if (copySucceeded) {\n          resolve();\n        } else {\n          reject(new Error(\"Copying was rejected.\"));\n        }\n      });\n    };\n\n    clipboard.paste = function() {\n      return new Promise(function(resolve, reject) {\n        var strData = window.clipboardData.getData(\"Text\");\n        if (strData) {\n          resolve(strData);\n        } else {\n          // The user rejected the paste request.\n          reject(new Error(\"Pasting was rejected.\"));\n        }\n      });\n    };\n  }\n\n  return clipboard;\n}));\n","'use strict'\n\nmodule.exports = LRUCache\n\n// This will be a proper iterable 'Map' in engines that support it,\n// or a fakey-fake PseudoMap in older versions.\nvar Map = require('pseudomap')\nvar util = require('util')\n\n// A linked list to keep track of recently-used-ness\nvar Yallist = require('yallist')\n\n// use symbols if possible, otherwise just _props\nvar hasSymbol = typeof Symbol === 'function' && process.env._nodeLRUCacheForceNoSymbol !== '1'\nvar makeSymbol\nif (hasSymbol) {\n  makeSymbol = function (key) {\n    return Symbol(key)\n  }\n} else {\n  makeSymbol = function (key) {\n    return '_' + key\n  }\n}\n\nvar MAX = makeSymbol('max')\nvar LENGTH = makeSymbol('length')\nvar LENGTH_CALCULATOR = makeSymbol('lengthCalculator')\nvar ALLOW_STALE = makeSymbol('allowStale')\nvar MAX_AGE = makeSymbol('maxAge')\nvar DISPOSE = makeSymbol('dispose')\nvar NO_DISPOSE_ON_SET = makeSymbol('noDisposeOnSet')\nvar LRU_LIST = makeSymbol('lruList')\nvar CACHE = makeSymbol('cache')\n\nfunction naiveLength () { return 1 }\n\n// lruList is a yallist where the head is the youngest\n// item, and the tail is the oldest.  the list contains the Hit\n// objects as the entries.\n// Each Hit object has a reference to its Yallist.Node.  This\n// never changes.\n//\n// cache is a Map (or PseudoMap) that matches the keys to\n// the Yallist.Node object.\nfunction LRUCache (options) {\n  if (!(this instanceof LRUCache)) {\n    return new LRUCache(options)\n  }\n\n  if (typeof options === 'number') {\n    options = { max: options }\n  }\n\n  if (!options) {\n    options = {}\n  }\n\n  var max = this[MAX] = options.max\n  // Kind of weird to have a default max of Infinity, but oh well.\n  if (!max ||\n      !(typeof max === 'number') ||\n      max <= 0) {\n    this[MAX] = Infinity\n  }\n\n  var lc = options.length || naiveLength\n  if (typeof lc !== 'function') {\n    lc = naiveLength\n  }\n  this[LENGTH_CALCULATOR] = lc\n\n  this[ALLOW_STALE] = options.stale || false\n  this[MAX_AGE] = options.maxAge || 0\n  this[DISPOSE] = options.dispose\n  this[NO_DISPOSE_ON_SET] = options.noDisposeOnSet || false\n  this.reset()\n}\n\n// resize the cache when the max changes.\nObject.defineProperty(LRUCache.prototype, 'max', {\n  set: function (mL) {\n    if (!mL || !(typeof mL === 'number') || mL <= 0) {\n      mL = Infinity\n    }\n    this[MAX] = mL\n    trim(this)\n  },\n  get: function () {\n    return this[MAX]\n  },\n  enumerable: true\n})\n\nObject.defineProperty(LRUCache.prototype, 'allowStale', {\n  set: function (allowStale) {\n    this[ALLOW_STALE] = !!allowStale\n  },\n  get: function () {\n    return this[ALLOW_STALE]\n  },\n  enumerable: true\n})\n\nObject.defineProperty(LRUCache.prototype, 'maxAge', {\n  set: function (mA) {\n    if (!mA || !(typeof mA === 'number') || mA < 0) {\n      mA = 0\n    }\n    this[MAX_AGE] = mA\n    trim(this)\n  },\n  get: function () {\n    return this[MAX_AGE]\n  },\n  enumerable: true\n})\n\n// resize the cache when the lengthCalculator changes.\nObject.defineProperty(LRUCache.prototype, 'lengthCalculator', {\n  set: function (lC) {\n    if (typeof lC !== 'function') {\n      lC = naiveLength\n    }\n    if (lC !== this[LENGTH_CALCULATOR]) {\n      this[LENGTH_CALCULATOR] = lC\n      this[LENGTH] = 0\n      this[LRU_LIST].forEach(function (hit) {\n        hit.length = this[LENGTH_CALCULATOR](hit.value, hit.key)\n        this[LENGTH] += hit.length\n      }, this)\n    }\n    trim(this)\n  },\n  get: function () { return this[LENGTH_CALCULATOR] },\n  enumerable: true\n})\n\nObject.defineProperty(LRUCache.prototype, 'length', {\n  get: function () { return this[LENGTH] },\n  enumerable: true\n})\n\nObject.defineProperty(LRUCache.prototype, 'itemCount', {\n  get: function () { return this[LRU_LIST].length },\n  enumerable: true\n})\n\nLRUCache.prototype.rforEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this[LRU_LIST].tail; walker !== null;) {\n    var prev = walker.prev\n    forEachStep(this, fn, walker, thisp)\n    walker = prev\n  }\n}\n\nfunction forEachStep (self, fn, node, thisp) {\n  var hit = node.value\n  if (isStale(self, hit)) {\n    del(self, node)\n    if (!self[ALLOW_STALE]) {\n      hit = undefined\n    }\n  }\n  if (hit) {\n    fn.call(thisp, hit.value, hit.key, self)\n  }\n}\n\nLRUCache.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this[LRU_LIST].head; walker !== null;) {\n    var next = walker.next\n    forEachStep(this, fn, walker, thisp)\n    walker = next\n  }\n}\n\nLRUCache.prototype.keys = function () {\n  return this[LRU_LIST].toArray().map(function (k) {\n    return k.key\n  }, this)\n}\n\nLRUCache.prototype.values = function () {\n  return this[LRU_LIST].toArray().map(function (k) {\n    return k.value\n  }, this)\n}\n\nLRUCache.prototype.reset = function () {\n  if (this[DISPOSE] &&\n      this[LRU_LIST] &&\n      this[LRU_LIST].length) {\n    this[LRU_LIST].forEach(function (hit) {\n      this[DISPOSE](hit.key, hit.value)\n    }, this)\n  }\n\n  this[CACHE] = new Map() // hash of items by key\n  this[LRU_LIST] = new Yallist() // list of items in order of use recency\n  this[LENGTH] = 0 // length of items in the list\n}\n\nLRUCache.prototype.dump = function () {\n  return this[LRU_LIST].map(function (hit) {\n    if (!isStale(this, hit)) {\n      return {\n        k: hit.key,\n        v: hit.value,\n        e: hit.now + (hit.maxAge || 0)\n      }\n    }\n  }, this).toArray().filter(function (h) {\n    return h\n  })\n}\n\nLRUCache.prototype.dumpLru = function () {\n  return this[LRU_LIST]\n}\n\n/* istanbul ignore next */\nLRUCache.prototype.inspect = function (n, opts) {\n  var str = 'LRUCache {'\n  var extras = false\n\n  var as = this[ALLOW_STALE]\n  if (as) {\n    str += '\\n  allowStale: true'\n    extras = true\n  }\n\n  var max = this[MAX]\n  if (max && max !== Infinity) {\n    if (extras) {\n      str += ','\n    }\n    str += '\\n  max: ' + util.inspect(max, opts)\n    extras = true\n  }\n\n  var maxAge = this[MAX_AGE]\n  if (maxAge) {\n    if (extras) {\n      str += ','\n    }\n    str += '\\n  maxAge: ' + util.inspect(maxAge, opts)\n    extras = true\n  }\n\n  var lc = this[LENGTH_CALCULATOR]\n  if (lc && lc !== naiveLength) {\n    if (extras) {\n      str += ','\n    }\n    str += '\\n  length: ' + util.inspect(this[LENGTH], opts)\n    extras = true\n  }\n\n  var didFirst = false\n  this[LRU_LIST].forEach(function (item) {\n    if (didFirst) {\n      str += ',\\n  '\n    } else {\n      if (extras) {\n        str += ',\\n'\n      }\n      didFirst = true\n      str += '\\n  '\n    }\n    var key = util.inspect(item.key).split('\\n').join('\\n  ')\n    var val = { value: item.value }\n    if (item.maxAge !== maxAge) {\n      val.maxAge = item.maxAge\n    }\n    if (lc !== naiveLength) {\n      val.length = item.length\n    }\n    if (isStale(this, item)) {\n      val.stale = true\n    }\n\n    val = util.inspect(val, opts).split('\\n').join('\\n  ')\n    str += key + ' => ' + val\n  })\n\n  if (didFirst || extras) {\n    str += '\\n'\n  }\n  str += '}'\n\n  return str\n}\n\nLRUCache.prototype.set = function (key, value, maxAge) {\n  maxAge = maxAge || this[MAX_AGE]\n\n  var now = maxAge ? Date.now() : 0\n  var len = this[LENGTH_CALCULATOR](value, key)\n\n  if (this[CACHE].has(key)) {\n    if (len > this[MAX]) {\n      del(this, this[CACHE].get(key))\n      return false\n    }\n\n    var node = this[CACHE].get(key)\n    var item = node.value\n\n    // dispose of the old one before overwriting\n    // split out into 2 ifs for better coverage tracking\n    if (this[DISPOSE]) {\n      if (!this[NO_DISPOSE_ON_SET]) {\n        this[DISPOSE](key, item.value)\n      }\n    }\n\n    item.now = now\n    item.maxAge = maxAge\n    item.value = value\n    this[LENGTH] += len - item.length\n    item.length = len\n    this.get(key)\n    trim(this)\n    return true\n  }\n\n  var hit = new Entry(key, value, len, now, maxAge)\n\n  // oversized objects fall out of cache automatically.\n  if (hit.length > this[MAX]) {\n    if (this[DISPOSE]) {\n      this[DISPOSE](key, value)\n    }\n    return false\n  }\n\n  this[LENGTH] += hit.length\n  this[LRU_LIST].unshift(hit)\n  this[CACHE].set(key, this[LRU_LIST].head)\n  trim(this)\n  return true\n}\n\nLRUCache.prototype.has = function (key) {\n  if (!this[CACHE].has(key)) return false\n  var hit = this[CACHE].get(key).value\n  if (isStale(this, hit)) {\n    return false\n  }\n  return true\n}\n\nLRUCache.prototype.get = function (key) {\n  return get(this, key, true)\n}\n\nLRUCache.prototype.peek = function (key) {\n  return get(this, key, false)\n}\n\nLRUCache.prototype.pop = function () {\n  var node = this[LRU_LIST].tail\n  if (!node) return null\n  del(this, node)\n  return node.value\n}\n\nLRUCache.prototype.del = function (key) {\n  del(this, this[CACHE].get(key))\n}\n\nLRUCache.prototype.load = function (arr) {\n  // reset the cache\n  this.reset()\n\n  var now = Date.now()\n  // A previous serialized cache has the most recent items first\n  for (var l = arr.length - 1; l >= 0; l--) {\n    var hit = arr[l]\n    var expiresAt = hit.e || 0\n    if (expiresAt === 0) {\n      // the item was created without expiration in a non aged cache\n      this.set(hit.k, hit.v)\n    } else {\n      var maxAge = expiresAt - now\n      // dont add already expired items\n      if (maxAge > 0) {\n        this.set(hit.k, hit.v, maxAge)\n      }\n    }\n  }\n}\n\nLRUCache.prototype.prune = function () {\n  var self = this\n  this[CACHE].forEach(function (value, key) {\n    get(self, key, false)\n  })\n}\n\nfunction get (self, key, doUse) {\n  var node = self[CACHE].get(key)\n  if (node) {\n    var hit = node.value\n    if (isStale(self, hit)) {\n      del(self, node)\n      if (!self[ALLOW_STALE]) hit = undefined\n    } else {\n      if (doUse) {\n        self[LRU_LIST].unshiftNode(node)\n      }\n    }\n    if (hit) hit = hit.value\n  }\n  return hit\n}\n\nfunction isStale (self, hit) {\n  if (!hit || (!hit.maxAge && !self[MAX_AGE])) {\n    return false\n  }\n  var stale = false\n  var diff = Date.now() - hit.now\n  if (hit.maxAge) {\n    stale = diff > hit.maxAge\n  } else {\n    stale = self[MAX_AGE] && (diff > self[MAX_AGE])\n  }\n  return stale\n}\n\nfunction trim (self) {\n  if (self[LENGTH] > self[MAX]) {\n    for (var walker = self[LRU_LIST].tail;\n      self[LENGTH] > self[MAX] && walker !== null;) {\n      // We know that we're about to delete this one, and also\n      // what the next least recently used key will be, so just\n      // go ahead and set it now.\n      var prev = walker.prev\n      del(self, walker)\n      walker = prev\n    }\n  }\n}\n\nfunction del (self, node) {\n  if (node) {\n    var hit = node.value\n    if (self[DISPOSE]) {\n      self[DISPOSE](hit.key, hit.value)\n    }\n    self[LENGTH] -= hit.length\n    self[CACHE].delete(hit.key)\n    self[LRU_LIST].removeNode(node)\n  }\n}\n\n// classy, since V8 prefers predictable objects.\nfunction Entry (key, value, length, now, maxAge) {\n  this.key = key\n  this.value = value\n  this.length = length\n  this.now = now\n  this.maxAge = maxAge || 0\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","if (process.env.npm_package_name === 'pseudomap' &&\n    process.env.npm_lifecycle_script === 'test')\n  process.env.TEST_PSEUDOMAP = 'true'\n\nif (typeof Map === 'function' && !process.env.TEST_PSEUDOMAP) {\n  module.exports = Map\n} else {\n  module.exports = require('./pseudomap')\n}\n","var hasOwnProperty = Object.prototype.hasOwnProperty\n\nmodule.exports = PseudoMap\n\nfunction PseudoMap (set) {\n  if (!(this instanceof PseudoMap)) // whyyyyyyy\n    throw new TypeError(\"Constructor PseudoMap requires 'new'\")\n\n  this.clear()\n\n  if (set) {\n    if ((set instanceof PseudoMap) ||\n        (typeof Map === 'function' && set instanceof Map))\n      set.forEach(function (value, key) {\n        this.set(key, value)\n      }, this)\n    else if (Array.isArray(set))\n      set.forEach(function (kv) {\n        this.set(kv[0], kv[1])\n      }, this)\n    else\n      throw new TypeError('invalid argument')\n  }\n}\n\nPseudoMap.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  Object.keys(this._data).forEach(function (k) {\n    if (k !== 'size')\n      fn.call(thisp, this._data[k].value, this._data[k].key)\n  }, this)\n}\n\nPseudoMap.prototype.has = function (k) {\n  return !!find(this._data, k)\n}\n\nPseudoMap.prototype.get = function (k) {\n  var res = find(this._data, k)\n  return res && res.value\n}\n\nPseudoMap.prototype.set = function (k, v) {\n  set(this._data, k, v)\n}\n\nPseudoMap.prototype.delete = function (k) {\n  var res = find(this._data, k)\n  if (res) {\n    delete this._data[res._index]\n    this._data.size--\n  }\n}\n\nPseudoMap.prototype.clear = function () {\n  var data = Object.create(null)\n  data.size = 0\n\n  Object.defineProperty(this, '_data', {\n    value: data,\n    enumerable: false,\n    configurable: true,\n    writable: false\n  })\n}\n\nObject.defineProperty(PseudoMap.prototype, 'size', {\n  get: function () {\n    return this._data.size\n  },\n  set: function (n) {},\n  enumerable: true,\n  configurable: true\n})\n\nPseudoMap.prototype.values =\nPseudoMap.prototype.keys =\nPseudoMap.prototype.entries = function () {\n  throw new Error('iterators are not implemented in this version')\n}\n\n// Either identical, or both NaN\nfunction same (a, b) {\n  return a === b || a !== a && b !== b\n}\n\nfunction Entry (k, v, i) {\n  this.key = k\n  this.value = v\n  this._index = i\n}\n\nfunction find (data, k) {\n  for (var i = 0, s = '_' + k, key = s;\n       hasOwnProperty.call(data, key);\n       key = s + i++) {\n    if (same(data[key].key, k))\n      return data[key]\n  }\n}\n\nfunction set (data, k, v) {\n  for (var i = 0, s = '_' + k, key = s;\n       hasOwnProperty.call(data, key);\n       key = s + i++) {\n    if (same(data[key].key, k)) {\n      data[key].value = v\n      return\n    }\n  }\n  data.size++\n  data[key] = new Entry(k, v, key)\n}\n","'use strict';\n\nconst WebSocket = require('./lib/websocket');\n\nWebSocket.createWebSocketStream = require('./lib/stream');\nWebSocket.Server = require('./lib/websocket-server');\nWebSocket.Receiver = require('./lib/receiver');\nWebSocket.Sender = require('./lib/sender');\n\nmodule.exports = WebSocket;\n","'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) return target.slice(0, offset);\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  // Required until https://github.com/nodejs/node/issues/9006 is resolved.\n  const length = buffer.length;\n  for (let i = 0; i < length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.byteLength === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = Buffer.from(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = Buffer.from(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\ntry {\n  const bufferUtil = require('bufferutil');\n  const bu = bufferUtil.BufferUtil || bufferUtil;\n\n  module.exports = {\n    concat,\n    mask(source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bu.mask(source, mask, output, offset, length);\n    },\n    toArrayBuffer,\n    toBuffer,\n    unmask(buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bu.unmask(buffer, mask);\n    }\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    concat,\n    mask: _mask,\n    toArrayBuffer,\n    toBuffer,\n    unmask: _unmask\n  };\n}\n","'use strict';\n\nmodule.exports = {\n  BINARY_TYPES: ['nodebuffer', 'arraybuffer', 'fragments'],\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  EMPTY_BUFFER: Buffer.alloc(0),\n  NOOP: () => {}\n};\n","'use strict';\n\n/**\n * Class representing an event.\n *\n * @private\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(type, target) {\n    this.target = target;\n    this.type = type;\n  }\n}\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n * @private\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {(String|Buffer|ArrayBuffer|Buffer[])} data The received data\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(data, target) {\n    super('message', target);\n\n    this.data = data;\n  }\n}\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n * @private\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {Number} code The status code explaining why the connection is being\n   *     closed\n   * @param {String} reason A human-readable string explaining why the\n   *     connection is closing\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(code, reason, target) {\n    super('close', target);\n\n    this.wasClean = target._closeFrameReceived && target._closeFrameSent;\n    this.reason = reason;\n    this.code = code;\n  }\n}\n\n/**\n * Class representing an open event.\n *\n * @extends Event\n * @private\n */\nclass OpenEvent extends Event {\n  /**\n   * Create a new `OpenEvent`.\n   *\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(target) {\n    super('open', target);\n  }\n}\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n * @private\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {Object} error The error that generated this event\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(error, target) {\n    super('error', target);\n\n    this.message = error.message;\n    this.error = error;\n  }\n}\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {Function} listener The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean`` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, listener, options) {\n    if (typeof listener !== 'function') return;\n\n    function onMessage(data) {\n      listener.call(this, new MessageEvent(data, this));\n    }\n\n    function onClose(code, message) {\n      listener.call(this, new CloseEvent(code, message, this));\n    }\n\n    function onError(error) {\n      listener.call(this, new ErrorEvent(error, this));\n    }\n\n    function onOpen() {\n      listener.call(this, new OpenEvent(this));\n    }\n\n    const method = options && options.once ? 'once' : 'on';\n\n    if (type === 'message') {\n      onMessage._listener = listener;\n      this[method](type, onMessage);\n    } else if (type === 'close') {\n      onClose._listener = listener;\n      this[method](type, onClose);\n    } else if (type === 'error') {\n      onError._listener = listener;\n      this[method](type, onError);\n    } else if (type === 'open') {\n      onOpen._listener = listener;\n      this[method](type, onOpen);\n    } else {\n      this[method](type, listener);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {Function} listener The listener to remove\n   * @public\n   */\n  removeEventListener(type, listener) {\n    const listeners = this.listeners(type);\n\n    for (let i = 0; i < listeners.length; i++) {\n      if (listeners[i] === listener || listeners[i]._listener === listener) {\n        this.removeListener(type, listeners[i]);\n      }\n    }\n  }\n};\n\nmodule.exports = EventTarget;\n","'use strict';\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n\n  if (header === undefined || header === '') return offers;\n\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 /* ' ' */ || code === 0x09 /* '\\t' */) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n","'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n","'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode, NOOP } = require('./constants');\n\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (this._inflate._readableState.endEmitted) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n\n        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n          this._inflate.reset();\n        }\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      //\n      // An `'error'` event is emitted, only on Node.js < 10.0.0, if the\n      // `zlib.DeflateRaw` instance is closed while data is being processed.\n      // This can happen if `PerMessageDeflate#cleanup()` is called at the wrong\n      // time due to an abnormal WebSocket closure.\n      //\n      this._deflate.on('error', NOOP);\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) data = data.slice(0, data.length - 4);\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.reset();\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError].code = 'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH';\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n","'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {String} [binaryType=nodebuffer] The type for binary data\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   * @param {Boolean} [isServer=false] Specifies whether to operate in client or\n   *     server mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(binaryType, extensions, isServer, maxPayload) {\n    super();\n\n    this._binaryType = binaryType || BINARY_TYPES[0];\n    this[kWebSocket] = undefined;\n    this._extensions = extensions || {};\n    this._isServer = !!isServer;\n    this._maxPayload = maxPayload | 0;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._state = GET_INFO;\n    this._loop = false;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = buf.slice(n);\n      return buf.slice(0, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = buf.slice(n);\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    let err;\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          err = this.getInfo();\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          err = this.getPayloadLength16();\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          err = this.getPayloadLength64();\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          err = this.getData(cb);\n          break;\n        default:\n          // `INFLATING`\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    cb(err);\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getInfo() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV2 and RSV3 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_2_3'\n      );\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV1 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_1'\n      );\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (!this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'invalid opcode 0',\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid opcode ${this._opcode}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'FIN must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_FIN'\n        );\n      }\n\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (this._payloadLength > 0x7d) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      }\n    } else {\n      this._loop = false;\n      return error(\n        RangeError,\n        `invalid opcode ${this._opcode}`,\n        true,\n        1002,\n        'WS_ERR_INVALID_OPCODE'\n      );\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'MASK must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_MASK'\n        );\n      }\n    } else if (this._masked) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'MASK must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_MASK'\n      );\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength16() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength64() {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009,\n        'WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH'\n      );\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    return this.haveLength();\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  haveLength() {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'Max payload size exceeded',\n          false,\n          1009,\n          'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n        );\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n      if (this._masked) unmask(data, this._mask);\n    }\n\n    if (this._opcode > 0x07) return this.controlMessage(data);\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its lenght is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    return this.dataMessage();\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          return cb(\n            error(\n              RangeError,\n              'Max payload size exceeded',\n              false,\n              1009,\n              'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n            )\n          );\n        }\n\n        this._fragments.push(buf);\n      }\n\n      const er = this.dataMessage();\n      if (er) return cb(er);\n\n      this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @return {(Error|undefined)} A possible error\n   * @private\n   */\n  dataMessage() {\n    if (this._fin) {\n      const messageLength = this._messageLength;\n      const fragments = this._fragments;\n\n      this._totalPayloadLength = 0;\n      this._messageLength = 0;\n      this._fragmented = 0;\n      this._fragments = [];\n\n      if (this._opcode === 2) {\n        let data;\n\n        if (this._binaryType === 'nodebuffer') {\n          data = concat(fragments, messageLength);\n        } else if (this._binaryType === 'arraybuffer') {\n          data = toArrayBuffer(concat(fragments, messageLength));\n        } else {\n          data = fragments;\n        }\n\n        this.emit('message', data);\n      } else {\n        const buf = concat(fragments, messageLength);\n\n        if (!isValidUTF8(buf)) {\n          this._loop = false;\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('message', buf.toString());\n      }\n    }\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data) {\n    if (this._opcode === 0x08) {\n      this._loop = false;\n\n      if (data.length === 0) {\n        this.emit('conclude', 1005, '');\n        this.end();\n      } else if (data.length === 1) {\n        return error(\n          RangeError,\n          'invalid payload length 1',\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          return error(\n            RangeError,\n            `invalid status code ${code}`,\n            true,\n            1002,\n            'WS_ERR_INVALID_CLOSE_CODE'\n          );\n        }\n\n        const buf = data.slice(2);\n\n        if (!isValidUTF8(buf)) {\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('conclude', code, buf.toString());\n        this.end();\n      }\n    } else if (this._opcode === 0x09) {\n      this.emit('ping', data);\n    } else {\n      this.emit('pong', data);\n    }\n\n    this._state = GET_INFO;\n  }\n}\n\nmodule.exports = Receiver;\n\n/**\n * Builds an error object.\n *\n * @param {function(new:Error|RangeError)} ErrorCtor The error constructor\n * @param {String} message The error message\n * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n *     `message`\n * @param {Number} statusCode The status code\n * @param {String} errorCode The exposed error code\n * @return {(Error|RangeError)} The error\n * @private\n */\nfunction error(ErrorCtor, message, prefix, statusCode, errorCode) {\n  const err = new ErrorCtor(\n    prefix ? `Invalid WebSocket frame: ${message}` : message\n  );\n\n  Error.captureStackTrace(err, error);\n  err.code = errorCode;\n  err[kStatusCode] = statusCode;\n  return err;\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls$\" }] */\n\n'use strict';\n\nconst net = require('net');\nconst tls = require('tls');\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER } = require('./constants');\nconst { isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst mask = Buffer.alloc(4);\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   */\n  constructor(socket, extensions) {\n    this._extensions = extensions || {};\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._deflating = false;\n    this._queue = [];\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {Buffer} data The data to frame\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {Buffer[]} The framed data as a list of `Buffer` instances\n   * @public\n   */\n  static frame(data, options) {\n    const merge = options.mask && options.readOnly;\n    let offset = options.mask ? 6 : 2;\n    let payloadLength = data.length;\n\n    if (data.length >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (data.length > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? data.length + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(data.length, 2);\n    } else if (payloadLength === 127) {\n      target.writeUInt32BE(0, 2);\n      target.writeUInt32BE(data.length, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    randomFillSync(mask, 0, 4);\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, data.length);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, data.length);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {String} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || data === '') {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n      buf.write(data, 2);\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doClose, buf, mask, cb]);\n    } else {\n      this.doClose(buf, mask, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a close message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doClose(data, mask, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x08,\n        mask,\n        readOnly: false\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    const buf = toBuffer(data);\n\n    if (buf.length > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPing, buf, mask, toBuffer.readOnly, cb]);\n    } else {\n      this.doPing(buf, mask, toBuffer.readOnly, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a ping message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Boolean} [readOnly=false] Specifies whether `data` can be modified\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doPing(data, mask, readOnly, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x09,\n        mask,\n        readOnly\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    const buf = toBuffer(data);\n\n    if (buf.length > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPong, buf, mask, toBuffer.readOnly, cb]);\n    } else {\n      this.doPong(buf, mask, toBuffer.readOnly, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a pong message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Boolean} [readOnly=false] Specifies whether `data` can be modified\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doPong(data, mask, readOnly, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x0a,\n        mask,\n        readOnly\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const buf = toBuffer(data);\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (rsv1 && perMessageDeflate) {\n        rsv1 = buf.length >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    if (perMessageDeflate) {\n      const opts = {\n        fin: options.fin,\n        rsv1,\n        opcode,\n        mask: options.mask,\n        readOnly: toBuffer.readOnly\n      };\n\n      if (this._deflating) {\n        this.enqueue([this.dispatch, buf, this._compress, opts, cb]);\n      } else {\n        this.dispatch(buf, this._compress, opts, cb);\n      }\n    } else {\n      this.sendFrame(\n        Sender.frame(buf, {\n          fin: options.fin,\n          rsv1: false,\n          opcode,\n          mask: options.mask,\n          readOnly: toBuffer.readOnly\n        }),\n        cb\n      );\n    }\n  }\n\n  /**\n   * Dispatches a data message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += data.length;\n    this._deflating = true;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        if (typeof cb === 'function') cb(err);\n\n        for (let i = 0; i < this._queue.length; i++) {\n          const callback = this._queue[i][4];\n\n          if (typeof callback === 'function') callback(err);\n        }\n\n        return;\n      }\n\n      this._bufferedBytes -= data.length;\n      this._deflating = false;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (!this._deflating && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[1].length;\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[1].length;\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {Buffer[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n","'use strict';\n\nconst { Duplex } = require('stream');\n\n/**\n * Emits the `'close'` event on a stream.\n *\n * @param {Duplex} stream The stream.\n * @private\n */\nfunction emitClose(stream) {\n  stream.emit('close');\n}\n\n/**\n * The listener of the `'end'` event.\n *\n * @private\n */\nfunction duplexOnEnd() {\n  if (!this.destroyed && this._writableState.finished) {\n    this.destroy();\n  }\n}\n\n/**\n * The listener of the `'error'` event.\n *\n * @param {Error} err The error\n * @private\n */\nfunction duplexOnError(err) {\n  this.removeListener('error', duplexOnError);\n  this.destroy();\n  if (this.listenerCount('error') === 0) {\n    // Do not suppress the throwing behavior.\n    this.emit('error', err);\n  }\n}\n\n/**\n * Wraps a `WebSocket` in a duplex stream.\n *\n * @param {WebSocket} ws The `WebSocket` to wrap\n * @param {Object} [options] The options for the `Duplex` constructor\n * @return {Duplex} The duplex stream\n * @public\n */\nfunction createWebSocketStream(ws, options) {\n  let resumeOnReceiverDrain = true;\n  let terminateOnDestroy = true;\n\n  function receiverOnDrain() {\n    if (resumeOnReceiverDrain) ws._socket.resume();\n  }\n\n  if (ws.readyState === ws.CONNECTING) {\n    ws.once('open', function open() {\n      ws._receiver.removeAllListeners('drain');\n      ws._receiver.on('drain', receiverOnDrain);\n    });\n  } else {\n    ws._receiver.removeAllListeners('drain');\n    ws._receiver.on('drain', receiverOnDrain);\n  }\n\n  const duplex = new Duplex({\n    ...options,\n    autoDestroy: false,\n    emitClose: false,\n    objectMode: false,\n    writableObjectMode: false\n  });\n\n  ws.on('message', function message(msg) {\n    if (!duplex.push(msg)) {\n      resumeOnReceiverDrain = false;\n      ws._socket.pause();\n    }\n  });\n\n  ws.once('error', function error(err) {\n    if (duplex.destroyed) return;\n\n    // Prevent `ws.terminate()` from being called by `duplex._destroy()`.\n    //\n    // - If the `'error'` event is emitted before the `'open'` event, then\n    //   `ws.terminate()` is a noop as no socket is assigned.\n    // - Otherwise, the error is re-emitted by the listener of the `'error'`\n    //   event of the `Receiver` object. The listener already closes the\n    //   connection by calling `ws.close()`. This allows a close frame to be\n    //   sent to the other peer. If `ws.terminate()` is called right after this,\n    //   then the close frame might not be sent.\n    terminateOnDestroy = false;\n    duplex.destroy(err);\n  });\n\n  ws.once('close', function close() {\n    if (duplex.destroyed) return;\n\n    duplex.push(null);\n  });\n\n  duplex._destroy = function (err, callback) {\n    if (ws.readyState === ws.CLOSED) {\n      callback(err);\n      process.nextTick(emitClose, duplex);\n      return;\n    }\n\n    let called = false;\n\n    ws.once('error', function error(err) {\n      called = true;\n      callback(err);\n    });\n\n    ws.once('close', function close() {\n      if (!called) callback(err);\n      process.nextTick(emitClose, duplex);\n    });\n\n    if (terminateOnDestroy) ws.terminate();\n  };\n\n  duplex._final = function (callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._final(callback);\n      });\n      return;\n    }\n\n    // If the value of the `_socket` property is `null` it means that `ws` is a\n    // client websocket and the handshake failed. In fact, when this happens, a\n    // socket is never assigned to the websocket. Wait for the `'error'` event\n    // that will be emitted by the websocket.\n    if (ws._socket === null) return;\n\n    if (ws._socket._writableState.finished) {\n      callback();\n      if (duplex._readableState.endEmitted) duplex.destroy();\n    } else {\n      ws._socket.once('finish', function finish() {\n        // `duplex` is not destroyed here because the `'end'` event will be\n        // emitted on `duplex` after this `'finish'` event. The EOF signaling\n        // `null` chunk is, in fact, pushed when the websocket emits `'close'`.\n        callback();\n      });\n      ws.close();\n    }\n  };\n\n  duplex._read = function () {\n    if (\n      (ws.readyState === ws.OPEN || ws.readyState === ws.CLOSING) &&\n      !resumeOnReceiverDrain\n    ) {\n      resumeOnReceiverDrain = true;\n      if (!ws._receiver._writableState.needDrain) ws._socket.resume();\n    }\n  };\n\n  duplex._write = function (chunk, encoding, callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._write(chunk, encoding, callback);\n      });\n      return;\n    }\n\n    ws.send(chunk, callback);\n  };\n\n  duplex.on('end', duplexOnEnd);\n  duplex.on('error', duplexOnError);\n  return duplex;\n}\n\nmodule.exports = createWebSocketStream;\n","'use strict';\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nfunction isValidStatusCode(code) {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n}\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction _isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0) {\n      // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {\n      // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0 // Overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {\n      // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80) || // Overlong\n        (buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0) // Surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {\n      // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80) || // Overlong\n        (buf[i] === 0xf4 && buf[i + 1] > 0x8f) ||\n        buf[i] > 0xf4 // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\ntry {\n  let isValidUTF8 = require('utf-8-validate');\n\n  /* istanbul ignore if */\n  if (typeof isValidUTF8 === 'object') {\n    isValidUTF8 = isValidUTF8.Validation.isValidUTF8; // utf-8-validate@<3.0.0\n  }\n\n  module.exports = {\n    isValidStatusCode,\n    isValidUTF8(buf) {\n      return buf.length < 150 ? _isValidUTF8(buf) : isValidUTF8(buf);\n    }\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    isValidStatusCode,\n    isValidUTF8: _isValidUTF8\n  };\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls|https$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst http = require('http');\nconst https = require('https');\nconst net = require('net');\nconst tls = require('tls');\nconst { createHash } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst WebSocket = require('./websocket');\nconst { format, parse } = require('./extension');\nconst { GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\nconst RUNNING = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {(http.Server|https.Server)} [options.server] A pre-created HTTP/S\n   *     server to use\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      maxPayload: 100 * 1024 * 1024,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      ...options\n    };\n\n    if (\n      (options.port == null && !options.server && !options.noServer) ||\n      (options.port != null && (options.server || options.noServer)) ||\n      (options.server && options.noServer)\n    ) {\n      throw new TypeError(\n        'One and only one of the \"port\", \"server\", or \"noServer\" options ' +\n          'must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) this.clients = new Set();\n    this.options = options;\n    this._state = RUNNING;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Close the server.\n   *\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(cb) {\n    if (cb) this.once('close', cb);\n\n    if (this._state === CLOSED) {\n      process.nextTick(emitClose, this);\n      return;\n    }\n\n    if (this._state === CLOSING) return;\n    this._state = CLOSING;\n\n    //\n    // Terminate all associated clients.\n    //\n    if (this.clients) {\n      for (const client of this.clients) client.terminate();\n    }\n\n    const server = this._server;\n\n    if (server) {\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // Close the http server if it was internally created.\n      //\n      if (this.options.port != null) {\n        server.close(emitClose.bind(undefined, this));\n        return;\n      }\n    }\n\n    process.nextTick(emitClose, this);\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key =\n      req.headers['sec-websocket-key'] !== undefined\n        ? req.headers['sec-websocket-key'].trim()\n        : false;\n    const upgrade = req.headers.upgrade;\n    const version = +req.headers['sec-websocket-version'];\n    const extensions = {};\n\n    if (\n      req.method !== 'GET' ||\n      upgrade === undefined ||\n      upgrade.toLowerCase() !== 'websocket' ||\n      !key ||\n      !keyRegex.test(key) ||\n      (version !== 8 && version !== 13) ||\n      !this.shouldHandle(req)\n    ) {\n      return abortHandshake(socket, 400);\n    }\n\n    if (this.options.perMessageDeflate) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = parse(req.headers['sec-websocket-extensions']);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        return abortHandshake(socket, 400);\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.socket.authorized || req.socket.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(key, extensions, req, socket, head, cb);\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(key, extensions, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Object} extensions The accepted extensions\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(key, extensions, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    if (this._state > RUNNING) return abortHandshake(socket, 503);\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new WebSocket(null);\n    let protocol = req.headers['sec-websocket-protocol'];\n\n    if (protocol) {\n      protocol = protocol.split(',').map(trim);\n\n      //\n      // Optionally call external protocol selection handler.\n      //\n      if (this.options.handleProtocols) {\n        protocol = this.options.handleProtocols(protocol, req);\n      } else {\n        protocol = protocol[0];\n      }\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, this.options.maxPayload);\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => this.clients.delete(ws));\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server._state = CLOSED;\n  server.emit('close');\n}\n\n/**\n * Handle premature socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {(net.Socket|tls.Socket)} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  if (socket.writable) {\n    message = message || http.STATUS_CODES[code];\n    headers = {\n      Connection: 'close',\n      'Content-Type': 'text/html',\n      'Content-Length': Buffer.byteLength(message),\n      ...headers\n    };\n\n    socket.write(\n      `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n        Object.keys(headers)\n          .map((h) => `${h}: ${headers[h]}`)\n          .join('\\r\\n') +\n        '\\r\\n\\r\\n' +\n        message\n    );\n  }\n\n  socket.removeListener('error', socketOnError);\n  socket.destroy();\n}\n\n/**\n * Remove whitespace characters from both ends of a string.\n *\n * @param {String} str The string\n * @return {String} A new string representing `str` stripped of whitespace\n *     characters from both its beginning and end\n * @private\n */\nfunction trim(str) {\n  return str.trim();\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Readable$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { Readable } = require('stream');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  GUID,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst { addEventListener, removeEventListener } = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst protocolVersions = [8, 13];\nconst closeTimeout = 30 * 1000;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = '';\n    this._closeTimer = null;\n    this._extensions = {};\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (Array.isArray(protocols)) {\n        protocols = protocols.join(', ');\n      } else if (typeof protocols === 'object' && protocols !== null) {\n        options = protocols;\n        protocols = undefined;\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * This deviates from the WHATWG interface since ws doesn't support the\n   * required default \"blob\" type (instead we define a custom \"nodebuffer\"\n   * type).\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onclose() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onclose(listener) {}\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onerror() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onerror(listener) {}\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onopen() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onopen(listener) {}\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onmessage() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onmessage(listener) {}\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Number} [maxPayload=0] The maximum allowed message size\n   * @private\n   */\n  setSocket(socket, head, maxPayload) {\n    const receiver = new Receiver(\n      this.binaryType,\n      this._extensions,\n      this._isServer,\n      maxPayload\n    );\n\n    this._sender = new Sender(socket, this._extensions);\n    this._receiver = receiver;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    socket.setTimeout(0);\n    socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {String} [data] A string explaining why the connection is closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (\n        this._closeFrameSent &&\n        (this._closeFrameReceived || this._receiver._writableState.errorEmitted)\n      ) {\n        this._socket.end();\n      }\n\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (\n        this._closeFrameReceived ||\n        this._receiver._writableState.errorEmitted\n      ) {\n        this._socket.end();\n      }\n    });\n\n    //\n    // Specify a timeout for the closing handshake to complete.\n    //\n    this._closeTimer = setTimeout(\n      this._socket.destroy.bind(this._socket),\n      closeTimeout\n    );\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    enumerable: true,\n    get() {\n      const listeners = this.listeners(method);\n      for (let i = 0; i < listeners.length; i++) {\n        if (listeners[i]._listener) return listeners[i]._listener;\n      }\n\n      return undefined;\n    },\n    set(listener) {\n      const listeners = this.listeners(method);\n      for (let i = 0; i < listeners.length; i++) {\n        //\n        // Remove only the listeners added via `addEventListener`.\n        //\n        if (listeners[i]._listener) this.removeListener(method, listeners[i]);\n      }\n      this.addEventListener(method, listener);\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|URL)} address The URL to which to connect\n * @param {String} [protocols] The subprotocols\n * @param {Object} [options] Connection options\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    createConnection: undefined,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: undefined,\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n    websocket._url = address.href;\n  } else {\n    parsedUrl = new URL(address);\n    websocket._url = address;\n  }\n\n  const isUnixSocket = parsedUrl.protocol === 'ws+unix:';\n\n  if (!parsedUrl.host && (!isUnixSocket || !parsedUrl.pathname)) {\n    const err = new Error(`Invalid URL: ${websocket.url}`);\n\n    if (websocket._redirects === 0) {\n      throw err;\n    } else {\n      emitErrorAndClose(websocket, err);\n      return;\n    }\n  }\n\n  const isSecure =\n    parsedUrl.protocol === 'wss:' || parsedUrl.protocol === 'https:';\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const get = isSecure ? https.get : http.get;\n  let perMessageDeflate;\n\n  opts.createConnection = isSecure ? tlsConnect : netConnect;\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket',\n    ...opts.headers\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols) {\n    opts.headers['Sec-WebSocket-Protocol'] = protocols;\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isUnixSocket) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  if (opts.followRedirects) {\n    if (websocket._redirects === 0) {\n      websocket._originalUnixSocket = isUnixSocket;\n      websocket._originalSecure = isSecure;\n      websocket._originalHostOrSocketPath = isUnixSocket\n        ? opts.socketPath\n        : parsedUrl.host;\n\n      const headers = options && options.headers;\n\n      //\n      // Shallow copy the user provided options so that headers can be changed\n      // without mutating the original object.\n      //\n      options = { ...options, headers: {} };\n\n      if (headers) {\n        for (const [key, value] of Object.entries(headers)) {\n          options.headers[key.toLowerCase()] = value;\n        }\n      }\n    } else {\n      const isSameHost = isUnixSocket\n        ? websocket._originalUnixSocket\n          ? opts.socketPath === websocket._originalHostOrSocketPath\n          : false\n        : websocket._originalUnixSocket\n        ? false\n        : parsedUrl.host === websocket._originalHostOrSocketPath;\n\n      if (!isSameHost || (websocket._originalSecure && !isSecure)) {\n        //\n        // Match curl 7.77.0 behavior and drop the following headers. These\n        // headers are also dropped when following a redirect to a subdomain.\n        //\n        delete opts.headers.authorization;\n        delete opts.headers.cookie;\n\n        if (!isSameHost) delete opts.headers.host;\n\n        opts.auth = undefined;\n      }\n    }\n\n    //\n    // Match curl 7.77.0 behavior and make the first `Authorization` header win.\n    // If the `Authorization` header is set, then there is nothing to do as it\n    // will take precedence.\n    //\n    if (opts.auth && !options.headers.authorization) {\n      options.headers.authorization =\n        'Basic ' + Buffer.from(opts.auth).toString('base64');\n    }\n  }\n\n  let req = (websocket._req = get(opts));\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req.aborted) return;\n\n    req = websocket._req = null;\n    emitErrorAndClose(websocket, err);\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      let addr;\n\n      try {\n        addr = new URL(location, address);\n      } catch (err) {\n        emitErrorAndClose(websocket, err);\n        return;\n      }\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the `upgrade`\n    // event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    const upgrade = res.headers.upgrade;\n\n    if (upgrade === undefined || upgrade.toLowerCase() !== 'websocket') {\n      abortHandshake(websocket, socket, 'Invalid Upgrade header');\n      return;\n    }\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    const protList = (protocols || '').split(/, */);\n    let protError;\n\n    if (!protocols && serverProt) {\n      protError = 'Server sent a subprotocol but none was requested';\n    } else if (protocols && !serverProt) {\n      protError = 'Server sent no subprotocol';\n    } else if (serverProt && !protList.includes(serverProt)) {\n      protError = 'Server sent an invalid subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    const secWebSocketExtensions = res.headers['sec-websocket-extensions'];\n\n    if (secWebSocketExtensions !== undefined) {\n      if (!perMessageDeflate) {\n        const message =\n          'Server sent a Sec-WebSocket-Extensions header but no extension ' +\n          'was requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      let extensions;\n\n      try {\n        extensions = parse(secWebSocketExtensions);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      const extensionNames = Object.keys(extensions);\n\n      if (extensionNames.length) {\n        if (\n          extensionNames.length !== 1 ||\n          extensionNames[0] !== PerMessageDeflate.extensionName\n        ) {\n          const message =\n            'Server indicated an extension that was not requested';\n          abortHandshake(websocket, socket, message);\n          return;\n        }\n\n        try {\n          perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n        } catch (err) {\n          const message = 'Invalid Sec-WebSocket-Extensions header';\n          abortHandshake(websocket, socket, message);\n          return;\n        }\n\n        websocket._extensions[PerMessageDeflate.extensionName] =\n          perMessageDeflate;\n      }\n    }\n\n    websocket.setSocket(socket, head, opts.maxPayload);\n  });\n}\n\n/**\n * Emit the `'error'` and `'close'` event.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {Error} The error to emit\n * @private\n */\nfunction emitErrorAndClose(websocket, err) {\n  websocket._readyState = WebSocket.CLOSING;\n  websocket.emit('error', err);\n  websocket.emitClose();\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket|tls.Socket)} stream The request to\n *     abort or the socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream.abort();\n\n    if (stream.socket && !stream.socket.destroyed) {\n      //\n      // On Node.js >= 14.3.0 `request.abort()` does not destroy the socket if\n      // called after the request completed. See\n      // https://github.com/websockets/ws/issues/1869.\n      //\n      stream.socket.destroy();\n    }\n\n    stream.once('abort', websocket.emitClose.bind(websocket));\n    websocket.emit('error', err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    cb(err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {String} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (websocket._socket[kWebSocket] === undefined) return;\n\n  websocket._socket.removeListener('data', socketOnData);\n  process.nextTick(resume, websocket._socket);\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  this[kWebSocket]._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._socket[kWebSocket] !== undefined) {\n    websocket._socket.removeListener('data', socketOnData);\n\n    //\n    // On Node.js < 14.0.0 the `'error'` event is emitted synchronously. See\n    // https://github.com/websockets/ws/issues/1940.\n    //\n    process.nextTick(resume, websocket._socket);\n\n    websocket.close(err[kStatusCode]);\n  }\n\n  websocket.emit('error', err);\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {(String|Buffer|ArrayBuffer|Buffer[])} data The message\n * @private\n */\nfunction receiverOnMessage(data) {\n  this[kWebSocket].emit('message', data);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  websocket.pong(data, !websocket._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * Resume a readable stream\n *\n * @param {Readable} stream The readable stream\n * @private\n */\nfunction resume(stream) {\n  stream.resume();\n}\n\n/**\n * The listener of the `net.Socket` `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('data', socketOnData);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  let chunk;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk.\n  //\n  if (\n    !this._readableState.endEmitted &&\n    !websocket._closeFrameReceived &&\n    !websocket._receiver._writableState.errorEmitted &&\n    (chunk = websocket._socket.read()) !== null\n  ) {\n    websocket._receiver.write(chunk);\n  }\n\n  websocket._receiver.end();\n\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the `net.Socket` `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n","module.exports = Yallist\n\nYallist.Node = Node\nYallist.create = Yallist\n\nfunction Yallist (list) {\n  var self = this\n  if (!(self instanceof Yallist)) {\n    self = new Yallist()\n  }\n\n  self.tail = null\n  self.head = null\n  self.length = 0\n\n  if (list && typeof list.forEach === 'function') {\n    list.forEach(function (item) {\n      self.push(item)\n    })\n  } else if (arguments.length > 0) {\n    for (var i = 0, l = arguments.length; i < l; i++) {\n      self.push(arguments[i])\n    }\n  }\n\n  return self\n}\n\nYallist.prototype.removeNode = function (node) {\n  if (node.list !== this) {\n    throw new Error('removing node which does not belong to this list')\n  }\n\n  var next = node.next\n  var prev = node.prev\n\n  if (next) {\n    next.prev = prev\n  }\n\n  if (prev) {\n    prev.next = next\n  }\n\n  if (node === this.head) {\n    this.head = next\n  }\n  if (node === this.tail) {\n    this.tail = prev\n  }\n\n  node.list.length--\n  node.next = null\n  node.prev = null\n  node.list = null\n}\n\nYallist.prototype.unshiftNode = function (node) {\n  if (node === this.head) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var head = this.head\n  node.list = this\n  node.next = head\n  if (head) {\n    head.prev = node\n  }\n\n  this.head = node\n  if (!this.tail) {\n    this.tail = node\n  }\n  this.length++\n}\n\nYallist.prototype.pushNode = function (node) {\n  if (node === this.tail) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var tail = this.tail\n  node.list = this\n  node.prev = tail\n  if (tail) {\n    tail.next = node\n  }\n\n  this.tail = node\n  if (!this.head) {\n    this.head = node\n  }\n  this.length++\n}\n\nYallist.prototype.push = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    push(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.unshift = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    unshift(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.pop = function () {\n  if (!this.tail) {\n    return undefined\n  }\n\n  var res = this.tail.value\n  this.tail = this.tail.prev\n  if (this.tail) {\n    this.tail.next = null\n  } else {\n    this.head = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.shift = function () {\n  if (!this.head) {\n    return undefined\n  }\n\n  var res = this.head.value\n  this.head = this.head.next\n  if (this.head) {\n    this.head.prev = null\n  } else {\n    this.tail = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.head, i = 0; walker !== null; i++) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.next\n  }\n}\n\nYallist.prototype.forEachReverse = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.prev\n  }\n}\n\nYallist.prototype.get = function (n) {\n  for (var i = 0, walker = this.head; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.next\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.getReverse = function (n) {\n  for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.prev\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.map = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.head; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.next\n  }\n  return res\n}\n\nYallist.prototype.mapReverse = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.tail; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.prev\n  }\n  return res\n}\n\nYallist.prototype.reduce = function (fn, initial) {\n  var acc\n  var walker = this.head\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.head) {\n    walker = this.head.next\n    acc = this.head.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = 0; walker !== null; i++) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.next\n  }\n\n  return acc\n}\n\nYallist.prototype.reduceReverse = function (fn, initial) {\n  var acc\n  var walker = this.tail\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.tail) {\n    walker = this.tail.prev\n    acc = this.tail.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = this.length - 1; walker !== null; i--) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.prev\n  }\n\n  return acc\n}\n\nYallist.prototype.toArray = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.head; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.next\n  }\n  return arr\n}\n\nYallist.prototype.toArrayReverse = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.tail; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.prev\n  }\n  return arr\n}\n\nYallist.prototype.slice = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = 0, walker = this.head; walker !== null && i < from; i++) {\n    walker = walker.next\n  }\n  for (; walker !== null && i < to; i++, walker = walker.next) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.sliceReverse = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {\n    walker = walker.prev\n  }\n  for (; walker !== null && i > from; i--, walker = walker.prev) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.reverse = function () {\n  var head = this.head\n  var tail = this.tail\n  for (var walker = head; walker !== null; walker = walker.prev) {\n    var p = walker.prev\n    walker.prev = walker.next\n    walker.next = p\n  }\n  this.head = tail\n  this.tail = head\n  return this\n}\n\nfunction push (self, item) {\n  self.tail = new Node(item, self.tail, null, self)\n  if (!self.head) {\n    self.head = self.tail\n  }\n  self.length++\n}\n\nfunction unshift (self, item) {\n  self.head = new Node(item, null, self.head, self)\n  if (!self.tail) {\n    self.tail = self.head\n  }\n  self.length++\n}\n\nfunction Node (value, prev, next, list) {\n  if (!(this instanceof Node)) {\n    return new Node(value, prev, next, list)\n  }\n\n  this.list = list\n  this.value = value\n\n  if (prev) {\n    prev.next = this\n    this.prev = prev\n  } else {\n    this.prev = null\n  }\n\n  if (next) {\n    next.prev = this\n    this.next = next\n  } else {\n    this.next = null\n  }\n}\n","module.exports = require(\"bufferutil\");","module.exports = require(\"utf-8-validate\");","module.exports = require(\"crypto\");","module.exports = require(\"events\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"net\");","module.exports = require(\"stream\");","module.exports = require(\"tls\");","module.exports = require(\"url\");","module.exports = require(\"util\");","module.exports = require(\"zlib\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nexport default class EventEmitter<Events: Object> {\n  listenersMap: Map<string, Array<Function>> = new Map();\n\n  addListener<Event: $Keys<Events>>(\n    event: Event,\n    listener: (...$ElementType<Events, Event>) => any,\n  ): void {\n    const listeners = this.listenersMap.get(event);\n    if (listeners === undefined) {\n      this.listenersMap.set(event, [listener]);\n    } else {\n      const index = listeners.indexOf(listener);\n      if (index < 0) {\n        listeners.push(listener);\n      }\n    }\n  }\n\n  emit<Event: $Keys<Events>>(\n    event: Event,\n    ...args: $ElementType<Events, Event>\n  ): void {\n    const listeners = this.listenersMap.get(event);\n    if (listeners !== undefined) {\n      if (listeners.length === 1) {\n        // No need to clone or try/catch\n        const listener = listeners[0];\n        listener.apply(null, args);\n      } else {\n        let didThrow = false;\n        let caughtError = null;\n\n        const clonedListeners = Array.from(listeners);\n        for (let i = 0; i < clonedListeners.length; i++) {\n          const listener = clonedListeners[i];\n          try {\n            listener.apply(null, args);\n          } catch (error) {\n            if (caughtError === null) {\n              didThrow = true;\n              caughtError = error;\n            }\n          }\n        }\n\n        if (didThrow) {\n          throw caughtError;\n        }\n      }\n    }\n  }\n\n  removeAllListeners(): void {\n    this.listenersMap.clear();\n  }\n\n  removeListener(event: $Keys<Events>, listener: Function): void {\n    const listeners = this.listenersMap.get(event);\n    if (listeners !== undefined) {\n      const index = listeners.indexOf(listener);\n      if (index >= 0) {\n        listeners.splice(index, 1);\n      }\n    }\n  }\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport EventEmitter from './events';\n\nimport type {ComponentFilter, Wall} from './frontend/types';\nimport type {\n  InspectedElementPayload,\n  OwnersList,\n  ProfilingDataBackend,\n  RendererID,\n  DevToolsHookSettings,\n  ProfilingSettings,\n} from 'react-devtools-shared/src/backend/types';\nimport type {StyleAndLayout as StyleAndLayoutPayload} from 'react-devtools-shared/src/backend/NativeStyleEditor/types';\n\n// This message specifies the version of the DevTools protocol currently supported by the backend,\n// as well as the earliest NPM version (e.g. \"4.13.0\") that protocol is supported by on the frontend.\n// This enables an older frontend to display an upgrade message to users for a newer, unsupported backend.\nexport type BridgeProtocol = {\n  // Version supported by the current frontend/backend.\n  version: number,\n\n  // NPM version range that also supports this version.\n  // Note that 'maxNpmVersion' is only set when the version is bumped.\n  minNpmVersion: string,\n  maxNpmVersion: string | null,\n};\n\n// Bump protocol version whenever a backwards breaking change is made\n// in the messages sent between BackendBridge and FrontendBridge.\n// This mapping is embedded in both frontend and backend builds.\n//\n// The backend protocol will always be the latest entry in the BRIDGE_PROTOCOL array.\n//\n// When an older frontend connects to a newer backend,\n// the backend can send the minNpmVersion and the frontend can display an NPM upgrade prompt.\n//\n// When a newer frontend connects with an older protocol version,\n// the frontend can use the embedded minNpmVersion/maxNpmVersion values to display a downgrade prompt.\nexport const BRIDGE_PROTOCOL: Array<BridgeProtocol> = [\n  // This version technically never existed,\n  // but a backwards breaking change was added in 4.11,\n  // so the safest guess to downgrade the frontend would be to version 4.10.\n  {\n    version: 0,\n    minNpmVersion: '\"<4.11.0\"',\n    maxNpmVersion: '\"<4.11.0\"',\n  },\n  // Versions 4.11.x – 4.12.x contained the backwards breaking change,\n  // but we didn't add the \"fix\" of checking the protocol version until 4.13,\n  // so we don't recommend downgrading to 4.11 or 4.12.\n  {\n    version: 1,\n    minNpmVersion: '4.13.0',\n    maxNpmVersion: '4.21.0',\n  },\n  // Version 2 adds a StrictMode-enabled and supports-StrictMode bits to add-root operation.\n  {\n    version: 2,\n    minNpmVersion: '4.22.0',\n    maxNpmVersion: null,\n  },\n];\n\nexport const currentBridgeProtocol: BridgeProtocol =\n  BRIDGE_PROTOCOL[BRIDGE_PROTOCOL.length - 1];\n\ntype ElementAndRendererID = {id: number, rendererID: RendererID};\n\ntype Message = {\n  event: string,\n  payload: any,\n};\n\ntype HighlightHostInstance = {\n  ...ElementAndRendererID,\n  displayName: string | null,\n  hideAfterTimeout: boolean,\n  openBuiltinElementsPanel: boolean,\n  scrollIntoView: boolean,\n};\n\ntype OverrideValue = {\n  ...ElementAndRendererID,\n  path: Array<string | number>,\n  wasForwarded?: boolean,\n  value: any,\n};\n\ntype OverrideHookState = {\n  ...OverrideValue,\n  hookID: number,\n};\n\ntype PathType = 'props' | 'hooks' | 'state' | 'context';\n\ntype DeletePath = {\n  ...ElementAndRendererID,\n  type: PathType,\n  hookID?: ?number,\n  path: Array<string | number>,\n};\n\ntype RenamePath = {\n  ...ElementAndRendererID,\n  type: PathType,\n  hookID?: ?number,\n  oldPath: Array<string | number>,\n  newPath: Array<string | number>,\n};\n\ntype OverrideValueAtPath = {\n  ...ElementAndRendererID,\n  type: PathType,\n  hookID?: ?number,\n  path: Array<string | number>,\n  value: any,\n};\n\ntype OverrideError = {\n  ...ElementAndRendererID,\n  forceError: boolean,\n};\n\ntype OverrideSuspense = {\n  ...ElementAndRendererID,\n  forceFallback: boolean,\n};\n\ntype CopyElementPathParams = {\n  ...ElementAndRendererID,\n  path: Array<string | number>,\n};\n\ntype ViewAttributeSourceParams = {\n  ...ElementAndRendererID,\n  path: Array<string | number>,\n};\n\ntype InspectElementParams = {\n  ...ElementAndRendererID,\n  forceFullData: boolean,\n  path: Array<number | string> | null,\n  requestID: number,\n};\n\ntype StoreAsGlobalParams = {\n  ...ElementAndRendererID,\n  count: number,\n  path: Array<string | number>,\n};\n\ntype NativeStyleEditor_RenameAttributeParams = {\n  ...ElementAndRendererID,\n  oldName: string,\n  newName: string,\n  value: string,\n};\n\ntype NativeStyleEditor_SetValueParams = {\n  ...ElementAndRendererID,\n  name: string,\n  value: string,\n};\n\ntype SavedPreferencesParams = {\n  componentFilters: Array<ComponentFilter>,\n};\n\nexport type BackendEvents = {\n  backendInitialized: [],\n  backendVersion: [string],\n  bridgeProtocol: [BridgeProtocol],\n  extensionBackendInitialized: [],\n  fastRefreshScheduled: [],\n  getSavedPreferences: [],\n  inspectedElement: [InspectedElementPayload],\n  isReloadAndProfileSupportedByBackend: [boolean],\n  operations: [Array<number>],\n  ownersList: [OwnersList],\n  overrideComponentFilters: [Array<ComponentFilter>],\n  environmentNames: [Array<string>],\n  profilingData: [ProfilingDataBackend],\n  profilingStatus: [boolean],\n  reloadAppForProfiling: [],\n  saveToClipboard: [string],\n  selectElement: [number],\n  shutdown: [],\n  stopInspectingHost: [boolean],\n  syncSelectionFromBuiltinElementsPanel: [],\n  syncSelectionToBuiltinElementsPanel: [],\n  unsupportedRendererVersion: [],\n\n  // React Native style editor plug-in.\n  isNativeStyleEditorSupported: [\n    {isSupported: boolean, validAttributes: ?$ReadOnlyArray<string>},\n  ],\n  NativeStyleEditor_styleAndLayout: [StyleAndLayoutPayload],\n\n  hookSettings: [$ReadOnly<DevToolsHookSettings>],\n};\n\ntype StartProfilingParams = ProfilingSettings;\ntype ReloadAndProfilingParams = ProfilingSettings;\n\ntype FrontendEvents = {\n  clearErrorsAndWarnings: [{rendererID: RendererID}],\n  clearErrorsForElementID: [ElementAndRendererID],\n  clearHostInstanceHighlight: [],\n  clearWarningsForElementID: [ElementAndRendererID],\n  copyElementPath: [CopyElementPathParams],\n  deletePath: [DeletePath],\n  getBackendVersion: [],\n  getBridgeProtocol: [],\n  getIfHasUnsupportedRendererVersion: [],\n  getOwnersList: [ElementAndRendererID],\n  getProfilingData: [{rendererID: RendererID}],\n  getProfilingStatus: [],\n  highlightHostInstance: [HighlightHostInstance],\n  inspectElement: [InspectElementParams],\n  logElementToConsole: [ElementAndRendererID],\n  overrideError: [OverrideError],\n  overrideSuspense: [OverrideSuspense],\n  overrideValueAtPath: [OverrideValueAtPath],\n  profilingData: [ProfilingDataBackend],\n  reloadAndProfile: [ReloadAndProfilingParams],\n  renamePath: [RenamePath],\n  savedPreferences: [SavedPreferencesParams],\n  setTraceUpdatesEnabled: [boolean],\n  shutdown: [],\n  startInspectingHost: [],\n  startProfiling: [StartProfilingParams],\n  stopInspectingHost: [boolean],\n  stopProfiling: [],\n  storeAsGlobal: [StoreAsGlobalParams],\n  updateComponentFilters: [Array<ComponentFilter>],\n  getEnvironmentNames: [],\n  updateHookSettings: [$ReadOnly<DevToolsHookSettings>],\n  viewAttributeSource: [ViewAttributeSourceParams],\n  viewElementSource: [ElementAndRendererID],\n\n  // React Native style editor plug-in.\n  NativeStyleEditor_measure: [ElementAndRendererID],\n  NativeStyleEditor_renameAttribute: [NativeStyleEditor_RenameAttributeParams],\n  NativeStyleEditor_setValue: [NativeStyleEditor_SetValueParams],\n\n  // Temporarily support newer standalone front-ends sending commands to older embedded backends.\n  // We do this because React Native embeds the React DevTools backend,\n  // but cannot control which version of the frontend users use.\n  //\n  // Note that nothing in the newer backend actually listens to these events,\n  // but the new frontend still dispatches them (in case older backends are listening to them instead).\n  //\n  // Note that this approach does no support the combination of a newer backend with an older frontend.\n  // It would be more work to support both approaches (and not run handlers twice)\n  // so I chose to support the more likely/common scenario (and the one more difficult for an end user to \"fix\").\n  overrideContext: [OverrideValue],\n  overrideHookState: [OverrideHookState],\n  overrideProps: [OverrideValue],\n  overrideState: [OverrideValue],\n\n  resumeElementPolling: [],\n  pauseElementPolling: [],\n\n  getHookSettings: [],\n};\n\nclass Bridge<\n  OutgoingEvents: Object,\n  IncomingEvents: Object,\n> extends EventEmitter<{\n  ...IncomingEvents,\n  ...OutgoingEvents,\n}> {\n  _isShutdown: boolean = false;\n  _messageQueue: Array<any> = [];\n  _scheduledFlush: boolean = false;\n  _wall: Wall;\n  _wallUnlisten: Function | null = null;\n\n  constructor(wall: Wall) {\n    super();\n\n    this._wall = wall;\n\n    this._wallUnlisten =\n      wall.listen((message: Message) => {\n        if (message && message.event) {\n          (this: any).emit(message.event, message.payload);\n        }\n      }) || null;\n\n    // Temporarily support older standalone front-ends sending commands to newer embedded backends.\n    // We do this because React Native embeds the React DevTools backend,\n    // but cannot control which version of the frontend users use.\n    this.addListener('overrideValueAtPath', this.overrideValueAtPath);\n  }\n\n  // Listening directly to the wall isn't advised.\n  // It can be used to listen for legacy (v3) messages (since they use a different format).\n  get wall(): Wall {\n    return this._wall;\n  }\n\n  send<EventName: $Keys<OutgoingEvents>>(\n    event: EventName,\n    ...payload: $ElementType<OutgoingEvents, EventName>\n  ) {\n    if (this._isShutdown) {\n      console.warn(\n        `Cannot send message \"${event}\" through a Bridge that has been shutdown.`,\n      );\n      return;\n    }\n\n    // When we receive a message:\n    // - we add it to our queue of messages to be sent\n    // - if there hasn't been a message recently, we set a timer for 0 ms in\n    //   the future, allowing all messages created in the same tick to be sent\n    //   together\n    // - if there *has* been a message flushed in the last BATCH_DURATION ms\n    //   (or we're waiting for our setTimeout-0 to fire), then _timeoutID will\n    //   be set, and we'll simply add to the queue and wait for that\n    this._messageQueue.push(event, payload);\n    if (!this._scheduledFlush) {\n      this._scheduledFlush = true;\n      // $FlowFixMe\n      if (typeof devtoolsJestTestScheduler === 'function') {\n        // This exists just for our own jest tests.\n        // They're written in such a way that we can neither mock queueMicrotask\n        // because then we break React DOM and we can't not mock it because then\n        // we can't synchronously flush it. So they need to be rewritten.\n        // $FlowFixMe\n        devtoolsJestTestScheduler(this._flush); // eslint-disable-line no-undef\n      } else {\n        queueMicrotask(this._flush);\n      }\n    }\n  }\n\n  shutdown() {\n    if (this._isShutdown) {\n      console.warn('Bridge was already shutdown.');\n      return;\n    }\n\n    // Queue the shutdown outgoing message for subscribers.\n    this.emit('shutdown');\n    this.send('shutdown');\n\n    // Mark this bridge as destroyed, i.e. disable its public API.\n    this._isShutdown = true;\n\n    // Disable the API inherited from EventEmitter that can add more listeners and send more messages.\n    // $FlowFixMe[cannot-write] This property is not writable.\n    this.addListener = function () {};\n    // $FlowFixMe[cannot-write] This property is not writable.\n    this.emit = function () {};\n    // NOTE: There's also EventEmitter API like `on` and `prependListener` that we didn't add to our Flow type of EventEmitter.\n\n    // Unsubscribe this bridge incoming message listeners to be sure, and so they don't have to do that.\n    this.removeAllListeners();\n\n    // Stop accepting and emitting incoming messages from the wall.\n    const wallUnlisten = this._wallUnlisten;\n    if (wallUnlisten) {\n      wallUnlisten();\n    }\n\n    // Synchronously flush all queued outgoing messages.\n    // At this step the subscribers' code may run in this call stack.\n    do {\n      this._flush();\n    } while (this._messageQueue.length);\n  }\n\n  _flush: () => void = () => {\n    // This method is used after the bridge is marked as destroyed in shutdown sequence,\n    // so we do not bail out if the bridge marked as destroyed.\n    // It is a private method that the bridge ensures is only called at the right times.\n    try {\n      if (this._messageQueue.length) {\n        for (let i = 0; i < this._messageQueue.length; i += 2) {\n          this._wall.send(this._messageQueue[i], ...this._messageQueue[i + 1]);\n        }\n        this._messageQueue.length = 0;\n      }\n    } finally {\n      // We set this at the end in case new messages are added synchronously above.\n      // They're already handled so they shouldn't queue more flushes.\n      this._scheduledFlush = false;\n    }\n  };\n\n  // Temporarily support older standalone backends by forwarding \"overrideValueAtPath\" commands\n  // to the older message types they may be listening to.\n  overrideValueAtPath: OverrideValueAtPath => void = ({\n    id,\n    path,\n    rendererID,\n    type,\n    value,\n  }: OverrideValueAtPath) => {\n    switch (type) {\n      case 'context':\n        this.send('overrideContext', {\n          id,\n          path,\n          rendererID,\n          wasForwarded: true,\n          value,\n        });\n        break;\n      case 'hooks':\n        this.send('overrideHookState', {\n          id,\n          path,\n          rendererID,\n          wasForwarded: true,\n          value,\n        });\n        break;\n      case 'props':\n        this.send('overrideProps', {\n          id,\n          path,\n          rendererID,\n          wasForwarded: true,\n          value,\n        });\n        break;\n      case 'state':\n        this.send('overrideState', {\n          id,\n          path,\n          rendererID,\n          wasForwarded: true,\n          value,\n        });\n        break;\n    }\n  };\n}\n\nexport type BackendBridge = Bridge<BackendEvents, FrontendEvents>;\nexport type FrontendBridge = Bridge<FrontendEvents, BackendEvents>;\n\nexport default Bridge;\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nexport const CHROME_WEBSTORE_EXTENSION_ID = 'fmkadmapgofadopljbjfkapdkoienihi';\nexport const INTERNAL_EXTENSION_ID = 'dnjnjgbfilfphmojnmhliehogmojhclc';\nexport const LOCAL_EXTENSION_ID = 'ikiahnapldjmdmpkmfhjdjilojjhgcbf';\n\n// Flip this flag to true to enable verbose console debug logging.\nexport const __DEBUG__ = false;\n\n// Flip this flag to true to enable performance.mark() and performance.measure() timings.\nexport const __PERFORMANCE_PROFILE__ = false;\n\nexport const TREE_OPERATION_ADD = 1;\nexport const TREE_OPERATION_REMOVE = 2;\nexport const TREE_OPERATION_REORDER_CHILDREN = 3;\nexport const TREE_OPERATION_UPDATE_TREE_BASE_DURATION = 4;\nexport const TREE_OPERATION_UPDATE_ERRORS_OR_WARNINGS = 5;\nexport const TREE_OPERATION_REMOVE_ROOT = 6;\nexport const TREE_OPERATION_SET_SUBTREE_MODE = 7;\n\nexport const PROFILING_FLAG_BASIC_SUPPORT = 0b01;\nexport const PROFILING_FLAG_TIMELINE_SUPPORT = 0b10;\n\nexport const LOCAL_STORAGE_DEFAULT_TAB_KEY = 'React::DevTools::defaultTab';\nexport const LOCAL_STORAGE_COMPONENT_FILTER_PREFERENCES_KEY =\n  'React::DevTools::componentFilters';\nexport const SESSION_STORAGE_LAST_SELECTION_KEY =\n  'React::DevTools::lastSelection';\nexport const LOCAL_STORAGE_OPEN_IN_EDITOR_URL =\n  'React::DevTools::openInEditorUrl';\nexport const LOCAL_STORAGE_OPEN_IN_EDITOR_URL_PRESET =\n  'React::DevTools::openInEditorUrlPreset';\nexport const LOCAL_STORAGE_PARSE_HOOK_NAMES_KEY =\n  'React::DevTools::parseHookNames';\nexport const SESSION_STORAGE_RECORD_CHANGE_DESCRIPTIONS_KEY =\n  'React::DevTools::recordChangeDescriptions';\nexport const SESSION_STORAGE_RECORD_TIMELINE_KEY =\n  'React::DevTools::recordTimeline';\nexport const SESSION_STORAGE_RELOAD_AND_PROFILE_KEY =\n  'React::DevTools::reloadAndProfile';\nexport const LOCAL_STORAGE_BROWSER_THEME = 'React::DevTools::theme';\nexport const LOCAL_STORAGE_TRACE_UPDATES_ENABLED_KEY =\n  'React::DevTools::traceUpdatesEnabled';\nexport const LOCAL_STORAGE_SUPPORTS_PROFILING_KEY =\n  'React::DevTools::supportsProfiling';\n\nexport const PROFILER_EXPORT_VERSION = 5;\n\nexport const FIREFOX_CONSOLE_DIMMING_COLOR = 'color: rgba(124, 124, 124, 0.75)';\nexport const ANSI_STYLE_DIMMING_TEMPLATE = '\\x1b[2;38;2;124;124;124m%s\\x1b[0m';\nexport const ANSI_STYLE_DIMMING_TEMPLATE_WITH_COMPONENT_STACK =\n  '\\x1b[2;38;2;124;124;124m%s %o\\x1b[0m';\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n/**\n * WARNING:\n * This file contains types that are designed for React DevTools UI and how it interacts with the backend.\n * They might be used in different versions of DevTools backends.\n * Be mindful of backwards compatibility when making changes.\n */\n\nimport type {\n  Dehydrated,\n  Unserializable,\n} from 'react-devtools-shared/src/hydration';\nimport type {Source} from 'react-devtools-shared/src/shared/types';\n\nexport type BrowserTheme = 'dark' | 'light';\n\nexport type Wall = {\n  // `listen` returns the \"unlisten\" function.\n  listen: (fn: Function) => Function,\n  send: (event: string, payload: any, transferable?: Array<any>) => void,\n};\n\n// WARNING\n// The values below are referenced by ComponentFilters (which are saved via localStorage).\n// Do not change them or it will break previously saved user customizations.\n// If new element types are added, use new numbers rather than re-ordering existing ones.\n//\n// Changing these types is also a backwards breaking change for the standalone shell,\n// since the frontend and backend must share the same values-\n// and the backend is embedded in certain environments (like React Native).\nexport const ElementTypeClass = 1;\nexport const ElementTypeContext = 2;\nexport const ElementTypeFunction = 5;\nexport const ElementTypeForwardRef = 6;\nexport const ElementTypeHostComponent = 7;\nexport const ElementTypeMemo = 8;\nexport const ElementTypeOtherOrUnknown = 9;\nexport const ElementTypeProfiler = 10;\nexport const ElementTypeRoot = 11;\nexport const ElementTypeSuspense = 12;\nexport const ElementTypeSuspenseList = 13;\nexport const ElementTypeTracingMarker = 14;\nexport const ElementTypeVirtual = 15;\n\n// Different types of elements displayed in the Elements tree.\n// These types may be used to visually distinguish types,\n// or to enable/disable certain functionality.\nexport type ElementType =\n  | 1\n  | 2\n  | 5\n  | 6\n  | 7\n  | 8\n  | 9\n  | 10\n  | 11\n  | 12\n  | 13\n  | 14\n  | 15;\n\n// WARNING\n// The values below are referenced by ComponentFilters (which are saved via localStorage).\n// Do not change them or it will break previously saved user customizations.\n// If new filter types are added, use new numbers rather than re-ordering existing ones.\nexport const ComponentFilterElementType = 1;\nexport const ComponentFilterDisplayName = 2;\nexport const ComponentFilterLocation = 3;\nexport const ComponentFilterHOC = 4;\nexport const ComponentFilterEnvironmentName = 5;\n\nexport type ComponentFilterType = 1 | 2 | 3 | 4 | 5;\n\n// Hide all elements of types in this Set.\n// We hide host components only by default.\nexport type ElementTypeComponentFilter = {\n  isEnabled: boolean,\n  type: 1,\n  value: ElementType,\n};\n\n// Hide all elements with displayNames or paths matching one or more of the RegExps in this Set.\n// Path filters are only used when elements include debug source location.\nexport type RegExpComponentFilter = {\n  isEnabled: boolean,\n  isValid: boolean,\n  type: 2 | 3,\n  value: string,\n};\n\nexport type BooleanComponentFilter = {\n  isEnabled: boolean,\n  isValid: boolean,\n  type: 4,\n};\n\nexport type EnvironmentNameComponentFilter = {\n  isEnabled: boolean,\n  isValid: boolean,\n  type: 5,\n  value: string,\n};\n\nexport type ComponentFilter =\n  | BooleanComponentFilter\n  | ElementTypeComponentFilter\n  | RegExpComponentFilter\n  | EnvironmentNameComponentFilter;\n\nexport type HookName = string | null;\n// Map of hook source (\"<filename>:<line-number>:<column-number>\") to name.\n// Hook source is used instead of the hook itself because the latter is not stable between element inspections.\n// We use a Map rather than an Array because of nested hooks and traversal ordering.\nexport type HookSourceLocationKey = string;\nexport type HookNames = Map<HookSourceLocationKey, HookName>;\n\nexport type LRUCache<K, V> = {\n  del: (key: K) => void,\n  get: (key: K) => V,\n  has: (key: K) => boolean,\n  reset: () => void,\n  set: (key: K, value: V) => void,\n};\n\nexport type StyleXPlugin = {\n  sources: Array<string>,\n  resolvedStyles: Object,\n};\n\nexport type Plugins = {\n  stylex: StyleXPlugin | null,\n};\n\nexport const StrictMode = 1;\n\n// Each element on the frontend corresponds to an ElementID (e.g. a Fiber) on the backend.\n// Some of its information (e.g. id, type, displayName) come from the backend.\n// Other bits (e.g. weight and depth) are computed on the frontend for windowing and display purposes.\n// Elements are updated on a push basis– meaning the backend pushes updates to the frontend when needed.\nexport type Element = {\n  id: number,\n  parentID: number,\n  children: Array<number>,\n  type: ElementType,\n  displayName: string | null,\n  key: number | string | null,\n\n  hocDisplayNames: null | Array<string>,\n\n  // Should the elements children be visible in the tree?\n  isCollapsed: boolean,\n\n  // Owner (if available)\n  ownerID: number,\n\n  // How many levels deep within the tree is this element?\n  // This determines how much indentation (left padding) should be used in the Elements tree.\n  depth: number,\n\n  // How many nodes (including itself) are below this Element within the tree.\n  // This property is used to quickly determine the total number of Elements,\n  // and the Element at any given index (for windowing purposes).\n  weight: number,\n\n  // This element is not in a StrictMode compliant subtree.\n  // Only true for React versions supporting StrictMode.\n  isStrictModeNonCompliant: boolean,\n\n  // If component is compiled with Forget, the backend will send its name as Forget(...)\n  // Later, on the frontend side, we will strip HOC names and Forget prefix.\n  compiledWithForget: boolean,\n};\n\nexport type SerializedElement = {\n  displayName: string | null,\n  id: number,\n  key: number | string | null,\n  hocDisplayNames: Array<string> | null,\n  compiledWithForget: boolean,\n  type: ElementType,\n};\n\nexport type OwnersList = {\n  id: number,\n  owners: Array<SerializedElement> | null,\n};\n\nexport type InspectedElementResponseType =\n  | 'error'\n  | 'full-data'\n  | 'hydrated-path'\n  | 'no-change'\n  | 'not-found';\n\nexport type InspectedElementPath = Array<string | number>;\n\nexport type InspectedElement = {\n  id: number,\n\n  // Does the current renderer support editable hooks and function props?\n  canEditHooks: boolean,\n  canEditFunctionProps: boolean,\n\n  // Does the current renderer support advanced editing interface?\n  canEditHooksAndDeletePaths: boolean,\n  canEditHooksAndRenamePaths: boolean,\n  canEditFunctionPropsDeletePaths: boolean,\n  canEditFunctionPropsRenamePaths: boolean,\n\n  // Is this Error, and can its value be overridden now?\n  isErrored: boolean,\n  canToggleError: boolean,\n\n  // Is this Suspense, and can its value be overridden now?\n  canToggleSuspense: boolean,\n\n  // Can view component source location.\n  canViewSource: boolean,\n\n  // Does the component have legacy context attached to it.\n  hasLegacyContext: boolean,\n\n  // Inspectable properties.\n  context: Object | null,\n  hooks: Object | null,\n  props: Object | null,\n  state: Object | null,\n  key: number | string | null,\n  errors: Array<[string, number]>,\n  warnings: Array<[string, number]>,\n\n  // List of owners\n  owners: Array<SerializedElement> | null,\n\n  // Location of component in source code.\n  source: Source | null,\n\n  type: ElementType,\n\n  // Meta information about the root this element belongs to.\n  rootType: string | null,\n\n  // Meta information about the renderer that created this element.\n  rendererPackageName: string | null,\n  rendererVersion: string | null,\n\n  // UI plugins/visualizations for the inspected element.\n  plugins: Plugins,\n};\n\n// TODO: Add profiling type\n\ntype Data =\n  | string\n  | Dehydrated\n  | Unserializable\n  | Array<Dehydrated>\n  | Array<Unserializable>\n  | {[string]: Data};\n\nexport type DehydratedData = {\n  cleaned: Array<Array<string | number>>,\n  data: Data,\n  unserializable: Array<Array<string | number>>,\n};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nexport function localStorageGetItem(key: string): any {\n  try {\n    return localStorage.getItem(key);\n  } catch (error) {\n    return null;\n  }\n}\n\nexport function localStorageRemoveItem(key: string): void {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {}\n}\n\nexport function localStorageSetItem(key: string, value: any): void {\n  try {\n    return localStorage.setItem(key, value);\n  } catch (error) {}\n}\n\nexport function sessionStorageGetItem(key: string): any {\n  try {\n    return sessionStorage.getItem(key);\n  } catch (error) {\n    return null;\n  }\n}\n\nexport function sessionStorageRemoveItem(key: string): void {\n  try {\n    sessionStorage.removeItem(key);\n  } catch (error) {}\n}\n\nexport function sessionStorageSetItem(key: string, value: any): void {\n  try {\n    return sessionStorage.setItem(key, value);\n  } catch (error) {}\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport LRU from 'lru-cache';\nimport {\n  REACT_CONSUMER_TYPE,\n  REACT_CONTEXT_TYPE,\n  REACT_FORWARD_REF_TYPE,\n  REACT_FRAGMENT_TYPE,\n  REACT_LAZY_TYPE,\n  REACT_ELEMENT_TYPE,\n  REACT_LEGACY_ELEMENT_TYPE,\n  REACT_MEMO_TYPE,\n  REACT_PORTAL_TYPE,\n  REACT_PROFILER_TYPE,\n  REACT_PROVIDER_TYPE,\n  REACT_STRICT_MODE_TYPE,\n  REACT_SUSPENSE_LIST_TYPE,\n  REACT_SUSPENSE_TYPE,\n  REACT_TRACING_MARKER_TYPE,\n} from 'shared/ReactSymbols';\nimport {enableRenderableContext} from 'shared/ReactFeatureFlags';\nimport {\n  TREE_OPERATION_ADD,\n  TREE_OPERATION_REMOVE,\n  TREE_OPERATION_REMOVE_ROOT,\n  TREE_OPERATION_REORDER_CHILDREN,\n  TREE_OPERATION_SET_SUBTREE_MODE,\n  TREE_OPERATION_UPDATE_ERRORS_OR_WARNINGS,\n  TREE_OPERATION_UPDATE_TREE_BASE_DURATION,\n  LOCAL_STORAGE_COMPONENT_FILTER_PREFERENCES_KEY,\n  LOCAL_STORAGE_OPEN_IN_EDITOR_URL,\n  SESSION_STORAGE_RELOAD_AND_PROFILE_KEY,\n  SESSION_STORAGE_RECORD_CHANGE_DESCRIPTIONS_KEY,\n  SESSION_STORAGE_RECORD_TIMELINE_KEY,\n} from './constants';\nimport {\n  ComponentFilterElementType,\n  ComponentFilterLocation,\n  ElementTypeHostComponent,\n} from './frontend/types';\nimport {\n  ElementTypeRoot,\n  ElementTypeClass,\n  ElementTypeForwardRef,\n  ElementTypeFunction,\n  ElementTypeMemo,\n  ElementTypeVirtual,\n} from 'react-devtools-shared/src/frontend/types';\nimport {\n  localStorageGetItem,\n  localStorageSetItem,\n  sessionStorageGetItem,\n  sessionStorageRemoveItem,\n  sessionStorageSetItem,\n} from 'react-devtools-shared/src/storage';\nimport {meta} from './hydration';\nimport isArray from './isArray';\n\nimport type {\n  ComponentFilter,\n  ElementType,\n  SerializedElement as SerializedElementFrontend,\n  LRUCache,\n} from 'react-devtools-shared/src/frontend/types';\nimport type {\n  ProfilingSettings,\n  SerializedElement as SerializedElementBackend,\n} from 'react-devtools-shared/src/backend/types';\nimport {isSynchronousXHRSupported} from './backend/utils';\n\n// $FlowFixMe[method-unbinding]\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\nconst cachedDisplayNames: WeakMap<Function, string> = new WeakMap();\n\n// On large trees, encoding takes significant time.\n// Try to reuse the already encoded strings.\nconst encodedStringCache: LRUCache<string, Array<number>> = new LRU({\n  max: 1000,\n});\n\nexport function alphaSortKeys(\n  a: string | number | symbol,\n  b: string | number | symbol,\n): number {\n  if (a.toString() > b.toString()) {\n    return 1;\n  } else if (b.toString() > a.toString()) {\n    return -1;\n  } else {\n    return 0;\n  }\n}\n\nexport function getAllEnumerableKeys(\n  obj: Object,\n): Set<string | number | symbol> {\n  const keys = new Set<string | number | symbol>();\n  let current = obj;\n  while (current != null) {\n    const currentKeys = [\n      ...Object.keys(current),\n      ...Object.getOwnPropertySymbols(current),\n    ];\n    const descriptors = Object.getOwnPropertyDescriptors(current);\n    currentKeys.forEach(key => {\n      // $FlowFixMe[incompatible-type]: key can be a Symbol https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor\n      if (descriptors[key].enumerable) {\n        keys.add(key);\n      }\n    });\n    current = Object.getPrototypeOf(current);\n  }\n  return keys;\n}\n\n// Mirror https://github.com/facebook/react/blob/7c21bf72ace77094fd1910cc350a548287ef8350/packages/shared/getComponentName.js#L27-L37\nexport function getWrappedDisplayName(\n  outerType: mixed,\n  innerType: any,\n  wrapperName: string,\n  fallbackName?: string,\n): string {\n  const displayName = (outerType: any)?.displayName;\n  return (\n    displayName || `${wrapperName}(${getDisplayName(innerType, fallbackName)})`\n  );\n}\n\nexport function getDisplayName(\n  type: Function,\n  fallbackName: string = 'Anonymous',\n): string {\n  const nameFromCache = cachedDisplayNames.get(type);\n  if (nameFromCache != null) {\n    return nameFromCache;\n  }\n\n  let displayName = fallbackName;\n\n  // The displayName property is not guaranteed to be a string.\n  // It's only safe to use for our purposes if it's a string.\n  // github.com/facebook/react-devtools/issues/803\n  if (typeof type.displayName === 'string') {\n    displayName = type.displayName;\n  } else if (typeof type.name === 'string' && type.name !== '') {\n    displayName = type.name;\n  }\n\n  cachedDisplayNames.set(type, displayName);\n  return displayName;\n}\n\nlet uidCounter: number = 0;\n\nexport function getUID(): number {\n  return ++uidCounter;\n}\n\nexport function utfDecodeStringWithRanges(\n  array: Array<number>,\n  left: number,\n  right: number,\n): string {\n  let string = '';\n  for (let i = left; i <= right; i++) {\n    string += String.fromCodePoint(array[i]);\n  }\n  return string;\n}\n\nfunction surrogatePairToCodePoint(\n  charCode1: number,\n  charCode2: number,\n): number {\n  return ((charCode1 & 0x3ff) << 10) + (charCode2 & 0x3ff) + 0x10000;\n}\n\n// Credit for this encoding approach goes to Tim Down:\n// https://stackoverflow.com/questions/4877326/how-can-i-tell-if-a-string-contains-multibyte-characters-in-javascript\nexport function utfEncodeString(string: string): Array<number> {\n  const cached = encodedStringCache.get(string);\n  if (cached !== undefined) {\n    return cached;\n  }\n\n  const encoded = [];\n  let i = 0;\n  let charCode;\n  while (i < string.length) {\n    charCode = string.charCodeAt(i);\n    // Handle multibyte unicode characters (like emoji).\n    if ((charCode & 0xf800) === 0xd800) {\n      encoded.push(surrogatePairToCodePoint(charCode, string.charCodeAt(++i)));\n    } else {\n      encoded.push(charCode);\n    }\n    ++i;\n  }\n\n  encodedStringCache.set(string, encoded);\n\n  return encoded;\n}\n\nexport function printOperationsArray(operations: Array<number>) {\n  // The first two values are always rendererID and rootID\n  const rendererID = operations[0];\n  const rootID = operations[1];\n\n  const logs = [`operations for renderer:${rendererID} and root:${rootID}`];\n\n  let i = 2;\n\n  // Reassemble the string table.\n  const stringTable: Array<null | string> = [\n    null, // ID = 0 corresponds to the null string.\n  ];\n  const stringTableSize = operations[i++];\n  const stringTableEnd = i + stringTableSize;\n  while (i < stringTableEnd) {\n    const nextLength = operations[i++];\n    const nextString = utfDecodeStringWithRanges(\n      operations,\n      i,\n      i + nextLength - 1,\n    );\n    stringTable.push(nextString);\n    i += nextLength;\n  }\n\n  while (i < operations.length) {\n    const operation = operations[i];\n\n    switch (operation) {\n      case TREE_OPERATION_ADD: {\n        const id = ((operations[i + 1]: any): number);\n        const type = ((operations[i + 2]: any): ElementType);\n\n        i += 3;\n\n        if (type === ElementTypeRoot) {\n          logs.push(`Add new root node ${id}`);\n\n          i++; // isStrictModeCompliant\n          i++; // supportsProfiling\n          i++; // supportsStrictMode\n          i++; // hasOwnerMetadata\n        } else {\n          const parentID = ((operations[i]: any): number);\n          i++;\n\n          i++; // ownerID\n\n          const displayNameStringID = operations[i];\n          const displayName = stringTable[displayNameStringID];\n          i++;\n\n          i++; // key\n\n          logs.push(\n            `Add node ${id} (${displayName || 'null'}) as child of ${parentID}`,\n          );\n        }\n        break;\n      }\n      case TREE_OPERATION_REMOVE: {\n        const removeLength = ((operations[i + 1]: any): number);\n        i += 2;\n\n        for (let removeIndex = 0; removeIndex < removeLength; removeIndex++) {\n          const id = ((operations[i]: any): number);\n          i += 1;\n\n          logs.push(`Remove node ${id}`);\n        }\n        break;\n      }\n      case TREE_OPERATION_REMOVE_ROOT: {\n        i += 1;\n\n        logs.push(`Remove root ${rootID}`);\n        break;\n      }\n      case TREE_OPERATION_SET_SUBTREE_MODE: {\n        const id = operations[i + 1];\n        const mode = operations[i + 1];\n\n        i += 3;\n\n        logs.push(`Mode ${mode} set for subtree with root ${id}`);\n        break;\n      }\n      case TREE_OPERATION_REORDER_CHILDREN: {\n        const id = ((operations[i + 1]: any): number);\n        const numChildren = ((operations[i + 2]: any): number);\n        i += 3;\n        const children = operations.slice(i, i + numChildren);\n        i += numChildren;\n\n        logs.push(`Re-order node ${id} children ${children.join(',')}`);\n        break;\n      }\n      case TREE_OPERATION_UPDATE_TREE_BASE_DURATION:\n        // Base duration updates are only sent while profiling is in progress.\n        // We can ignore them at this point.\n        // The profiler UI uses them lazily in order to generate the tree.\n        i += 3;\n        break;\n      case TREE_OPERATION_UPDATE_ERRORS_OR_WARNINGS:\n        const id = operations[i + 1];\n        const numErrors = operations[i + 2];\n        const numWarnings = operations[i + 3];\n\n        i += 4;\n\n        logs.push(\n          `Node ${id} has ${numErrors} errors and ${numWarnings} warnings`,\n        );\n        break;\n      default:\n        throw Error(`Unsupported Bridge operation \"${operation}\"`);\n    }\n  }\n\n  console.log(logs.join('\\n  '));\n}\n\nexport function getDefaultComponentFilters(): Array<ComponentFilter> {\n  return [\n    {\n      type: ComponentFilterElementType,\n      value: ElementTypeHostComponent,\n      isEnabled: true,\n    },\n  ];\n}\n\nexport function getSavedComponentFilters(): Array<ComponentFilter> {\n  try {\n    const raw = localStorageGetItem(\n      LOCAL_STORAGE_COMPONENT_FILTER_PREFERENCES_KEY,\n    );\n    if (raw != null) {\n      const parsedFilters: Array<ComponentFilter> = JSON.parse(raw);\n      return filterOutLocationComponentFilters(parsedFilters);\n    }\n  } catch (error) {}\n  return getDefaultComponentFilters();\n}\n\nexport function setSavedComponentFilters(\n  componentFilters: Array<ComponentFilter>,\n): void {\n  localStorageSetItem(\n    LOCAL_STORAGE_COMPONENT_FILTER_PREFERENCES_KEY,\n    JSON.stringify(filterOutLocationComponentFilters(componentFilters)),\n  );\n}\n\n// Following __debugSource removal from Fiber, the new approach for finding the source location\n// of a component, represented by the Fiber, is based on lazily generating and parsing component stack frames\n// To find the original location, React DevTools will perform symbolication, source maps are required for that.\n// In order to start filtering Fibers, we need to find location for all of them, which can't be done lazily.\n// Eager symbolication can become quite expensive for large applications.\nexport function filterOutLocationComponentFilters(\n  componentFilters: Array<ComponentFilter>,\n): Array<ComponentFilter> {\n  // This is just an additional check to preserve the previous state\n  // Filters can be stored on the backend side or in user land (in a window object)\n  if (!Array.isArray(componentFilters)) {\n    return componentFilters;\n  }\n\n  return componentFilters.filter(f => f.type !== ComponentFilterLocation);\n}\n\nexport function getDefaultOpenInEditorURL(): string {\n  return typeof process.env.EDITOR_URL === 'string'\n    ? process.env.EDITOR_URL\n    : '';\n}\n\nexport function getOpenInEditorURL(): string {\n  try {\n    const raw = localStorageGetItem(LOCAL_STORAGE_OPEN_IN_EDITOR_URL);\n    if (raw != null) {\n      return JSON.parse(raw);\n    }\n  } catch (error) {}\n  return getDefaultOpenInEditorURL();\n}\n\ntype ParseElementDisplayNameFromBackendReturn = {\n  formattedDisplayName: string | null,\n  hocDisplayNames: Array<string> | null,\n  compiledWithForget: boolean,\n};\nexport function parseElementDisplayNameFromBackend(\n  displayName: string | null,\n  type: ElementType,\n): ParseElementDisplayNameFromBackendReturn {\n  if (displayName === null) {\n    return {\n      formattedDisplayName: null,\n      hocDisplayNames: null,\n      compiledWithForget: false,\n    };\n  }\n\n  if (displayName.startsWith('Forget(')) {\n    const displayNameWithoutForgetWrapper = displayName.slice(\n      7,\n      displayName.length - 1,\n    );\n\n    const {formattedDisplayName, hocDisplayNames} =\n      parseElementDisplayNameFromBackend(displayNameWithoutForgetWrapper, type);\n    return {formattedDisplayName, hocDisplayNames, compiledWithForget: true};\n  }\n\n  let hocDisplayNames = null;\n  switch (type) {\n    case ElementTypeClass:\n    case ElementTypeForwardRef:\n    case ElementTypeFunction:\n    case ElementTypeMemo:\n    case ElementTypeVirtual:\n      if (displayName.indexOf('(') >= 0) {\n        const matches = displayName.match(/[^()]+/g);\n        if (matches != null) {\n          // $FlowFixMe[incompatible-type]\n          displayName = matches.pop();\n          hocDisplayNames = matches;\n        }\n      }\n      break;\n    default:\n      break;\n  }\n\n  return {\n    // $FlowFixMe[incompatible-return]\n    formattedDisplayName: displayName,\n    hocDisplayNames,\n    compiledWithForget: false,\n  };\n}\n\n// Pulled from react-compat\n// https://github.com/developit/preact-compat/blob/7c5de00e7c85e2ffd011bf3af02899b63f699d3a/src/index.js#L349\nexport function shallowDiffers(prev: Object, next: Object): boolean {\n  for (const attribute in prev) {\n    if (!(attribute in next)) {\n      return true;\n    }\n  }\n  for (const attribute in next) {\n    if (prev[attribute] !== next[attribute]) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function getInObject(object: Object, path: Array<string | number>): any {\n  return path.reduce((reduced: Object, attr: any): any => {\n    if (reduced) {\n      if (hasOwnProperty.call(reduced, attr)) {\n        return reduced[attr];\n      }\n      if (typeof reduced[Symbol.iterator] === 'function') {\n        // Convert iterable to array and return array[index]\n        //\n        // TRICKY\n        // Don't use [...spread] syntax for this purpose.\n        // This project uses @babel/plugin-transform-spread in \"loose\" mode which only works with Array values.\n        // Other types (e.g. typed arrays, Sets) will not spread correctly.\n        return Array.from(reduced)[attr];\n      }\n    }\n\n    return null;\n  }, object);\n}\n\nexport function deletePathInObject(\n  object: Object,\n  path: Array<string | number>,\n) {\n  const length = path.length;\n  const last = path[length - 1];\n  if (object != null) {\n    const parent = getInObject(object, path.slice(0, length - 1));\n    if (parent) {\n      if (isArray(parent)) {\n        parent.splice(((last: any): number), 1);\n      } else {\n        delete parent[last];\n      }\n    }\n  }\n}\n\nexport function renamePathInObject(\n  object: Object,\n  oldPath: Array<string | number>,\n  newPath: Array<string | number>,\n) {\n  const length = oldPath.length;\n  if (object != null) {\n    const parent = getInObject(object, oldPath.slice(0, length - 1));\n    if (parent) {\n      const lastOld = oldPath[length - 1];\n      const lastNew = newPath[length - 1];\n      parent[lastNew] = parent[lastOld];\n      if (isArray(parent)) {\n        parent.splice(((lastOld: any): number), 1);\n      } else {\n        delete parent[lastOld];\n      }\n    }\n  }\n}\n\nexport function setInObject(\n  object: Object,\n  path: Array<string | number>,\n  value: any,\n) {\n  const length = path.length;\n  const last = path[length - 1];\n  if (object != null) {\n    const parent = getInObject(object, path.slice(0, length - 1));\n    if (parent) {\n      parent[last] = value;\n    }\n  }\n}\n\nexport type DataType =\n  | 'array'\n  | 'array_buffer'\n  | 'bigint'\n  | 'boolean'\n  | 'class_instance'\n  | 'data_view'\n  | 'date'\n  | 'function'\n  | 'html_all_collection'\n  | 'html_element'\n  | 'infinity'\n  | 'iterator'\n  | 'opaque_iterator'\n  | 'nan'\n  | 'null'\n  | 'number'\n  | 'object'\n  | 'react_element'\n  | 'regexp'\n  | 'string'\n  | 'symbol'\n  | 'typed_array'\n  | 'undefined'\n  | 'unknown';\n\n/**\n * Get a enhanced/artificial type string based on the object instance\n */\nexport function getDataType(data: Object): DataType {\n  if (data === null) {\n    return 'null';\n  } else if (data === undefined) {\n    return 'undefined';\n  }\n\n  if (typeof HTMLElement !== 'undefined' && data instanceof HTMLElement) {\n    return 'html_element';\n  }\n\n  const type = typeof data;\n  switch (type) {\n    case 'bigint':\n      return 'bigint';\n    case 'boolean':\n      return 'boolean';\n    case 'function':\n      return 'function';\n    case 'number':\n      if (Number.isNaN(data)) {\n        return 'nan';\n      } else if (!Number.isFinite(data)) {\n        return 'infinity';\n      } else {\n        return 'number';\n      }\n    case 'object':\n      if (\n        data.$$typeof === REACT_ELEMENT_TYPE ||\n        data.$$typeof === REACT_LEGACY_ELEMENT_TYPE\n      ) {\n        return 'react_element';\n      }\n      if (isArray(data)) {\n        return 'array';\n      } else if (ArrayBuffer.isView(data)) {\n        return hasOwnProperty.call(data.constructor, 'BYTES_PER_ELEMENT')\n          ? 'typed_array'\n          : 'data_view';\n      } else if (data.constructor && data.constructor.name === 'ArrayBuffer') {\n        // HACK This ArrayBuffer check is gross; is there a better way?\n        // We could try to create a new DataView with the value.\n        // If it doesn't error, we know it's an ArrayBuffer,\n        // but this seems kind of awkward and expensive.\n        return 'array_buffer';\n      } else if (typeof data[Symbol.iterator] === 'function') {\n        const iterator = data[Symbol.iterator]();\n        if (!iterator) {\n          // Proxies might break assumptoins about iterators.\n          // See github.com/facebook/react/issues/21654\n        } else {\n          return iterator === data ? 'opaque_iterator' : 'iterator';\n        }\n      } else if (data.constructor && data.constructor.name === 'RegExp') {\n        return 'regexp';\n      } else {\n        // $FlowFixMe[method-unbinding]\n        const toStringValue = Object.prototype.toString.call(data);\n        if (toStringValue === '[object Date]') {\n          return 'date';\n        } else if (toStringValue === '[object HTMLAllCollection]') {\n          return 'html_all_collection';\n        }\n      }\n\n      if (!isPlainObject(data)) {\n        return 'class_instance';\n      }\n\n      return 'object';\n    case 'string':\n      return 'string';\n    case 'symbol':\n      return 'symbol';\n    case 'undefined':\n      if (\n        // $FlowFixMe[method-unbinding]\n        Object.prototype.toString.call(data) === '[object HTMLAllCollection]'\n      ) {\n        return 'html_all_collection';\n      }\n      return 'undefined';\n    default:\n      return 'unknown';\n  }\n}\n\n// Fork of packages/react-is/src/ReactIs.js:30, but with legacy element type\n// Which has been changed in https://github.com/facebook/react/pull/28813\nfunction typeOfWithLegacyElementSymbol(object: any): mixed {\n  if (typeof object === 'object' && object !== null) {\n    const $$typeof = object.$$typeof;\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n      case REACT_LEGACY_ELEMENT_TYPE:\n        const type = object.type;\n\n        switch (type) {\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n          case REACT_SUSPENSE_LIST_TYPE:\n            return type;\n          default:\n            const $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n                return $$typeofType;\n              case REACT_CONSUMER_TYPE:\n                if (enableRenderableContext) {\n                  return $$typeofType;\n                }\n              // Fall through\n              case REACT_PROVIDER_TYPE:\n                if (!enableRenderableContext) {\n                  return $$typeofType;\n                }\n              // Fall through\n              default:\n                return $$typeof;\n            }\n        }\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n}\n\nexport function getDisplayNameForReactElement(\n  element: React$Element<any>,\n): string | null {\n  const elementType = typeOfWithLegacyElementSymbol(element);\n  switch (elementType) {\n    case REACT_CONSUMER_TYPE:\n      return 'ContextConsumer';\n    case REACT_PROVIDER_TYPE:\n      return 'ContextProvider';\n    case REACT_CONTEXT_TYPE:\n      return 'Context';\n    case REACT_FORWARD_REF_TYPE:\n      return 'ForwardRef';\n    case REACT_FRAGMENT_TYPE:\n      return 'Fragment';\n    case REACT_LAZY_TYPE:\n      return 'Lazy';\n    case REACT_MEMO_TYPE:\n      return 'Memo';\n    case REACT_PORTAL_TYPE:\n      return 'Portal';\n    case REACT_PROFILER_TYPE:\n      return 'Profiler';\n    case REACT_STRICT_MODE_TYPE:\n      return 'StrictMode';\n    case REACT_SUSPENSE_TYPE:\n      return 'Suspense';\n    case REACT_SUSPENSE_LIST_TYPE:\n      return 'SuspenseList';\n    case REACT_TRACING_MARKER_TYPE:\n      return 'TracingMarker';\n    default:\n      const {type} = element;\n      if (typeof type === 'string') {\n        return type;\n      } else if (typeof type === 'function') {\n        return getDisplayName(type, 'Anonymous');\n      } else if (type != null) {\n        return 'NotImplementedInDevtools';\n      } else {\n        return 'Element';\n      }\n  }\n}\n\nconst MAX_PREVIEW_STRING_LENGTH = 50;\n\nfunction truncateForDisplay(\n  string: string,\n  length: number = MAX_PREVIEW_STRING_LENGTH,\n) {\n  if (string.length > length) {\n    return string.slice(0, length) + '…';\n  } else {\n    return string;\n  }\n}\n\n// Attempts to mimic Chrome's inline preview for values.\n// For example, the following value...\n//   {\n//      foo: 123,\n//      bar: \"abc\",\n//      baz: [true, false],\n//      qux: { ab: 1, cd: 2 }\n//   };\n//\n// Would show a preview of...\n//   {foo: 123, bar: \"abc\", baz: Array(2), qux: {…}}\n//\n// And the following value...\n//   [\n//     123,\n//     \"abc\",\n//     [true, false],\n//     { foo: 123, bar: \"abc\" }\n//   ];\n//\n// Would show a preview of...\n//   [123, \"abc\", Array(2), {…}]\nexport function formatDataForPreview(\n  data: any,\n  showFormattedValue: boolean,\n): string {\n  if (data != null && hasOwnProperty.call(data, meta.type)) {\n    return showFormattedValue\n      ? data[meta.preview_long]\n      : data[meta.preview_short];\n  }\n\n  const type = getDataType(data);\n\n  switch (type) {\n    case 'html_element':\n      return `<${truncateForDisplay(data.tagName.toLowerCase())} />`;\n    case 'function':\n      if (typeof data.name === 'function' || data.name === '') {\n        return '() => {}';\n      }\n      return `${truncateForDisplay(data.name)}() {}`;\n    case 'string':\n      return `\"${data}\"`;\n    case 'bigint':\n      return truncateForDisplay(data.toString() + 'n');\n    case 'regexp':\n      return truncateForDisplay(data.toString());\n    case 'symbol':\n      return truncateForDisplay(data.toString());\n    case 'react_element':\n      return `<${truncateForDisplay(\n        getDisplayNameForReactElement(data) || 'Unknown',\n      )} />`;\n    case 'array_buffer':\n      return `ArrayBuffer(${data.byteLength})`;\n    case 'data_view':\n      return `DataView(${data.buffer.byteLength})`;\n    case 'array':\n      if (showFormattedValue) {\n        let formatted = '';\n        for (let i = 0; i < data.length; i++) {\n          if (i > 0) {\n            formatted += ', ';\n          }\n          formatted += formatDataForPreview(data[i], false);\n          if (formatted.length > MAX_PREVIEW_STRING_LENGTH) {\n            // Prevent doing a lot of unnecessary iteration...\n            break;\n          }\n        }\n        return `[${truncateForDisplay(formatted)}]`;\n      } else {\n        const length = hasOwnProperty.call(data, meta.size)\n          ? data[meta.size]\n          : data.length;\n        return `Array(${length})`;\n      }\n    case 'typed_array':\n      const shortName = `${data.constructor.name}(${data.length})`;\n      if (showFormattedValue) {\n        let formatted = '';\n        for (let i = 0; i < data.length; i++) {\n          if (i > 0) {\n            formatted += ', ';\n          }\n          formatted += data[i];\n          if (formatted.length > MAX_PREVIEW_STRING_LENGTH) {\n            // Prevent doing a lot of unnecessary iteration...\n            break;\n          }\n        }\n        return `${shortName} [${truncateForDisplay(formatted)}]`;\n      } else {\n        return shortName;\n      }\n    case 'iterator':\n      const name = data.constructor.name;\n\n      if (showFormattedValue) {\n        // TRICKY\n        // Don't use [...spread] syntax for this purpose.\n        // This project uses @babel/plugin-transform-spread in \"loose\" mode which only works with Array values.\n        // Other types (e.g. typed arrays, Sets) will not spread correctly.\n        const array = Array.from(data);\n\n        let formatted = '';\n        for (let i = 0; i < array.length; i++) {\n          const entryOrEntries = array[i];\n\n          if (i > 0) {\n            formatted += ', ';\n          }\n\n          // TRICKY\n          // Browsers display Maps and Sets differently.\n          // To mimic their behavior, detect if we've been given an entries tuple.\n          //   Map(2) {\"abc\" => 123, \"def\" => 123}\n          //   Set(2) {\"abc\", 123}\n          if (isArray(entryOrEntries)) {\n            const key = formatDataForPreview(entryOrEntries[0], true);\n            const value = formatDataForPreview(entryOrEntries[1], false);\n            formatted += `${key} => ${value}`;\n          } else {\n            formatted += formatDataForPreview(entryOrEntries, false);\n          }\n\n          if (formatted.length > MAX_PREVIEW_STRING_LENGTH) {\n            // Prevent doing a lot of unnecessary iteration...\n            break;\n          }\n        }\n\n        return `${name}(${data.size}) {${truncateForDisplay(formatted)}}`;\n      } else {\n        return `${name}(${data.size})`;\n      }\n    case 'opaque_iterator': {\n      return data[Symbol.toStringTag];\n    }\n    case 'date':\n      return data.toString();\n    case 'class_instance':\n      return data.constructor.name;\n    case 'object':\n      if (showFormattedValue) {\n        const keys = Array.from(getAllEnumerableKeys(data)).sort(alphaSortKeys);\n\n        let formatted = '';\n        for (let i = 0; i < keys.length; i++) {\n          const key = keys[i];\n          if (i > 0) {\n            formatted += ', ';\n          }\n          formatted += `${key.toString()}: ${formatDataForPreview(\n            data[key],\n            false,\n          )}`;\n          if (formatted.length > MAX_PREVIEW_STRING_LENGTH) {\n            // Prevent doing a lot of unnecessary iteration...\n            break;\n          }\n        }\n        return `{${truncateForDisplay(formatted)}}`;\n      } else {\n        return '{…}';\n      }\n    case 'boolean':\n    case 'number':\n    case 'infinity':\n    case 'nan':\n    case 'null':\n    case 'undefined':\n      return data;\n    default:\n      try {\n        return truncateForDisplay(String(data));\n      } catch (error) {\n        return 'unserializable';\n      }\n  }\n}\n\n// Basically checking that the object only has Object in its prototype chain\nexport const isPlainObject = (object: Object): boolean => {\n  const objectPrototype = Object.getPrototypeOf(object);\n  if (!objectPrototype) return true;\n\n  const objectParentPrototype = Object.getPrototypeOf(objectPrototype);\n  return !objectParentPrototype;\n};\n\nexport function backendToFrontendSerializedElementMapper(\n  element: SerializedElementBackend,\n): SerializedElementFrontend {\n  const {formattedDisplayName, hocDisplayNames, compiledWithForget} =\n    parseElementDisplayNameFromBackend(element.displayName, element.type);\n\n  return {\n    ...element,\n    displayName: formattedDisplayName,\n    hocDisplayNames,\n    compiledWithForget,\n  };\n}\n\n// Chrome normalizes urls like webpack-internals:// but new URL don't, so cannot use new URL here.\nexport function normalizeUrl(url: string): string {\n  return url.replace('/./', '/');\n}\n\nexport function getIsReloadAndProfileSupported(): boolean {\n  // Notify the frontend if the backend supports the Storage API (e.g. localStorage).\n  // If not, features like reload-and-profile will not work correctly and must be disabled.\n  let isBackendStorageAPISupported = false;\n  try {\n    localStorage.getItem('test');\n    isBackendStorageAPISupported = true;\n  } catch (error) {}\n\n  return isBackendStorageAPISupported && isSynchronousXHRSupported();\n}\n\n// Expected to be used only by browser extension and react-devtools-inline\nexport function getIfReloadedAndProfiling(): boolean {\n  return (\n    sessionStorageGetItem(SESSION_STORAGE_RELOAD_AND_PROFILE_KEY) === 'true'\n  );\n}\n\nexport function getProfilingSettings(): ProfilingSettings {\n  return {\n    recordChangeDescriptions:\n      sessionStorageGetItem(SESSION_STORAGE_RECORD_CHANGE_DESCRIPTIONS_KEY) ===\n      'true',\n    recordTimeline:\n      sessionStorageGetItem(SESSION_STORAGE_RECORD_TIMELINE_KEY) === 'true',\n  };\n}\n\nexport function onReloadAndProfile(\n  recordChangeDescriptions: boolean,\n  recordTimeline: boolean,\n): void {\n  sessionStorageSetItem(SESSION_STORAGE_RELOAD_AND_PROFILE_KEY, 'true');\n  sessionStorageSetItem(\n    SESSION_STORAGE_RECORD_CHANGE_DESCRIPTIONS_KEY,\n    recordChangeDescriptions ? 'true' : 'false',\n  );\n  sessionStorageSetItem(\n    SESSION_STORAGE_RECORD_TIMELINE_KEY,\n    recordTimeline ? 'true' : 'false',\n  );\n}\n\nexport function onReloadAndProfileFlagsReset(): void {\n  sessionStorageRemoveItem(SESSION_STORAGE_RELOAD_AND_PROFILE_KEY);\n  sessionStorageRemoveItem(SESSION_STORAGE_RECORD_CHANGE_DESCRIPTIONS_KEY);\n  sessionStorageRemoveItem(SESSION_STORAGE_RECORD_TIMELINE_KEY);\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {renameElementSymbol} from 'shared/ReactFeatureFlags';\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n\n// The Symbol used to tag the ReactElement-like types.\nexport const REACT_LEGACY_ELEMENT_TYPE: symbol = Symbol.for('react.element');\nexport const REACT_ELEMENT_TYPE: symbol = renameElementSymbol\n  ? Symbol.for('react.transitional.element')\n  : REACT_LEGACY_ELEMENT_TYPE;\nexport const REACT_PORTAL_TYPE: symbol = Symbol.for('react.portal');\nexport const REACT_FRAGMENT_TYPE: symbol = Symbol.for('react.fragment');\nexport const REACT_STRICT_MODE_TYPE: symbol = Symbol.for('react.strict_mode');\nexport const REACT_PROFILER_TYPE: symbol = Symbol.for('react.profiler');\nexport const REACT_PROVIDER_TYPE: symbol = Symbol.for('react.provider'); // TODO: Delete with enableRenderableContext\nexport const REACT_CONSUMER_TYPE: symbol = Symbol.for('react.consumer');\nexport const REACT_CONTEXT_TYPE: symbol = Symbol.for('react.context');\nexport const REACT_FORWARD_REF_TYPE: symbol = Symbol.for('react.forward_ref');\nexport const REACT_SUSPENSE_TYPE: symbol = Symbol.for('react.suspense');\nexport const REACT_SUSPENSE_LIST_TYPE: symbol = Symbol.for(\n  'react.suspense_list',\n);\nexport const REACT_MEMO_TYPE: symbol = Symbol.for('react.memo');\nexport const REACT_LAZY_TYPE: symbol = Symbol.for('react.lazy');\nexport const REACT_SCOPE_TYPE: symbol = Symbol.for('react.scope');\nexport const REACT_DEBUG_TRACING_MODE_TYPE: symbol = Symbol.for(\n  'react.debug_trace_mode',\n);\nexport const REACT_OFFSCREEN_TYPE: symbol = Symbol.for('react.offscreen');\nexport const REACT_LEGACY_HIDDEN_TYPE: symbol = Symbol.for(\n  'react.legacy_hidden',\n);\nexport const REACT_TRACING_MARKER_TYPE: symbol = Symbol.for(\n  'react.tracing_marker',\n);\n\nexport const REACT_MEMO_CACHE_SENTINEL: symbol = Symbol.for(\n  'react.memo_cache_sentinel',\n);\n\nexport const REACT_POSTPONE_TYPE: symbol = Symbol.for('react.postpone');\n\nconst MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nconst FAUX_ITERATOR_SYMBOL = '@@iterator';\n\nexport function getIteratorFn(maybeIterable: ?any): ?() => ?Iterator<any> {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n  const maybeIterator =\n    (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n    maybeIterable[FAUX_ITERATOR_SYMBOL];\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n  return null;\n}\n\nexport const ASYNC_ITERATOR = Symbol.asyncIterator;\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {\n  getDataType,\n  getDisplayNameForReactElement,\n  getAllEnumerableKeys,\n  getInObject,\n  formatDataForPreview,\n  setInObject,\n} from 'react-devtools-shared/src/utils';\n\nimport type {\n  DehydratedData,\n  InspectedElementPath,\n} from 'react-devtools-shared/src/frontend/types';\n\nexport const meta = {\n  inspectable: (Symbol('inspectable'): symbol),\n  inspected: (Symbol('inspected'): symbol),\n  name: (Symbol('name'): symbol),\n  preview_long: (Symbol('preview_long'): symbol),\n  preview_short: (Symbol('preview_short'): symbol),\n  readonly: (Symbol('readonly'): symbol),\n  size: (Symbol('size'): symbol),\n  type: (Symbol('type'): symbol),\n  unserializable: (Symbol('unserializable'): symbol),\n};\n\nexport type Dehydrated = {\n  inspectable: boolean,\n  name: string | null,\n  preview_long: string | null,\n  preview_short: string | null,\n  readonly?: boolean,\n  size?: number,\n  type: string,\n};\n\n// Typed arrays and other complex iteratable objects (e.g. Map, Set, ImmutableJS) need special handling.\n// These objects can't be serialized without losing type information,\n// so a \"Unserializable\" type wrapper is used (with meta-data keys) to send nested values-\n// while preserving the original type and name.\nexport type Unserializable = {\n  name: string | null,\n  preview_long: string | null,\n  preview_short: string | null,\n  readonly?: boolean,\n  size?: number,\n  type: string,\n  unserializable: boolean,\n  [string | number]: any,\n};\n\n// This threshold determines the depth at which the bridge \"dehydrates\" nested data.\n// Dehydration means that we don't serialize the data for e.g. postMessage or stringify,\n// unless the frontend explicitly requests it (e.g. a user clicks to expand a props object).\n//\n// Reducing this threshold will improve the speed of initial component inspection,\n// but may decrease the responsiveness of expanding objects/arrays to inspect further.\nconst LEVEL_THRESHOLD = 2;\n\n/**\n * Generate the dehydrated metadata for complex object instances\n */\nfunction createDehydrated(\n  type: string,\n  inspectable: boolean,\n  data: Object,\n  cleaned: Array<Array<string | number>>,\n  path: Array<string | number>,\n): Dehydrated {\n  cleaned.push(path);\n\n  const dehydrated: Dehydrated = {\n    inspectable,\n    type,\n    preview_long: formatDataForPreview(data, true),\n    preview_short: formatDataForPreview(data, false),\n    name:\n      typeof data.constructor !== 'function' ||\n      typeof data.constructor.name !== 'string' ||\n      data.constructor.name === 'Object'\n        ? ''\n        : data.constructor.name,\n  };\n\n  if (type === 'array' || type === 'typed_array') {\n    dehydrated.size = data.length;\n  } else if (type === 'object') {\n    dehydrated.size = Object.keys(data).length;\n  }\n\n  if (type === 'iterator' || type === 'typed_array') {\n    dehydrated.readonly = true;\n  }\n\n  return dehydrated;\n}\n\n/**\n * Strip out complex data (instances, functions, and data nested > LEVEL_THRESHOLD levels deep).\n * The paths of the stripped out objects are appended to the `cleaned` list.\n * On the other side of the barrier, the cleaned list is used to \"re-hydrate\" the cleaned representation into\n * an object with symbols as attributes, so that a sanitized object can be distinguished from a normal object.\n *\n * Input: {\"some\": {\"attr\": fn()}, \"other\": AnInstance}\n * Output: {\n *   \"some\": {\n *     \"attr\": {\"name\": the fn.name, type: \"function\"}\n *   },\n *   \"other\": {\n *     \"name\": \"AnInstance\",\n *     \"type\": \"object\",\n *   },\n * }\n * and cleaned = [[\"some\", \"attr\"], [\"other\"]]\n */\nexport function dehydrate(\n  data: Object,\n  cleaned: Array<Array<string | number>>,\n  unserializable: Array<Array<string | number>>,\n  path: Array<string | number>,\n  isPathAllowed: (path: Array<string | number>) => boolean,\n  level: number = 0,\n): $PropertyType<DehydratedData, 'data'> {\n  const type = getDataType(data);\n\n  let isPathAllowedCheck;\n\n  switch (type) {\n    case 'html_element':\n      cleaned.push(path);\n      return {\n        inspectable: false,\n        preview_short: formatDataForPreview(data, false),\n        preview_long: formatDataForPreview(data, true),\n        name: data.tagName,\n        type,\n      };\n\n    case 'function':\n      cleaned.push(path);\n      return {\n        inspectable: false,\n        preview_short: formatDataForPreview(data, false),\n        preview_long: formatDataForPreview(data, true),\n        name:\n          typeof data.name === 'function' || !data.name\n            ? 'function'\n            : data.name,\n        type,\n      };\n\n    case 'string':\n      isPathAllowedCheck = isPathAllowed(path);\n      if (isPathAllowedCheck) {\n        return data;\n      } else {\n        return data.length <= 500 ? data : data.slice(0, 500) + '...';\n      }\n\n    case 'bigint':\n      cleaned.push(path);\n      return {\n        inspectable: false,\n        preview_short: formatDataForPreview(data, false),\n        preview_long: formatDataForPreview(data, true),\n        name: data.toString(),\n        type,\n      };\n\n    case 'symbol':\n      cleaned.push(path);\n      return {\n        inspectable: false,\n        preview_short: formatDataForPreview(data, false),\n        preview_long: formatDataForPreview(data, true),\n        name: data.toString(),\n        type,\n      };\n\n    // React Elements aren't very inspector-friendly,\n    // and often contain private fields or circular references.\n    case 'react_element':\n      cleaned.push(path);\n      return {\n        inspectable: false,\n        preview_short: formatDataForPreview(data, false),\n        preview_long: formatDataForPreview(data, true),\n        name: getDisplayNameForReactElement(data) || 'Unknown',\n        type,\n      };\n\n    // ArrayBuffers error if you try to inspect them.\n    case 'array_buffer':\n    case 'data_view':\n      cleaned.push(path);\n      return {\n        inspectable: false,\n        preview_short: formatDataForPreview(data, false),\n        preview_long: formatDataForPreview(data, true),\n        name: type === 'data_view' ? 'DataView' : 'ArrayBuffer',\n        size: data.byteLength,\n        type,\n      };\n\n    case 'array':\n      isPathAllowedCheck = isPathAllowed(path);\n      if (level >= LEVEL_THRESHOLD && !isPathAllowedCheck) {\n        return createDehydrated(type, true, data, cleaned, path);\n      }\n      const arr: Array<Object> = [];\n      for (let i = 0; i < data.length; i++) {\n        arr[i] = dehydrateKey(\n          data,\n          i,\n          cleaned,\n          unserializable,\n          path.concat([i]),\n          isPathAllowed,\n          isPathAllowedCheck ? 1 : level + 1,\n        );\n      }\n      return arr;\n\n    case 'html_all_collection':\n    case 'typed_array':\n    case 'iterator':\n      isPathAllowedCheck = isPathAllowed(path);\n      if (level >= LEVEL_THRESHOLD && !isPathAllowedCheck) {\n        return createDehydrated(type, true, data, cleaned, path);\n      } else {\n        const unserializableValue: Unserializable = {\n          unserializable: true,\n          type: type,\n          readonly: true,\n          size: type === 'typed_array' ? data.length : undefined,\n          preview_short: formatDataForPreview(data, false),\n          preview_long: formatDataForPreview(data, true),\n          name:\n            typeof data.constructor !== 'function' ||\n            typeof data.constructor.name !== 'string' ||\n            data.constructor.name === 'Object'\n              ? ''\n              : data.constructor.name,\n        };\n\n        // TRICKY\n        // Don't use [...spread] syntax for this purpose.\n        // This project uses @babel/plugin-transform-spread in \"loose\" mode which only works with Array values.\n        // Other types (e.g. typed arrays, Sets) will not spread correctly.\n        Array.from(data).forEach(\n          (item, i) =>\n            (unserializableValue[i] = dehydrate(\n              item,\n              cleaned,\n              unserializable,\n              path.concat([i]),\n              isPathAllowed,\n              isPathAllowedCheck ? 1 : level + 1,\n            )),\n        );\n\n        unserializable.push(path);\n\n        return unserializableValue;\n      }\n\n    case 'opaque_iterator':\n      cleaned.push(path);\n      return {\n        inspectable: false,\n        preview_short: formatDataForPreview(data, false),\n        preview_long: formatDataForPreview(data, true),\n        name: data[Symbol.toStringTag],\n        type,\n      };\n\n    case 'date':\n      cleaned.push(path);\n      return {\n        inspectable: false,\n        preview_short: formatDataForPreview(data, false),\n        preview_long: formatDataForPreview(data, true),\n        name: data.toString(),\n        type,\n      };\n\n    case 'regexp':\n      cleaned.push(path);\n      return {\n        inspectable: false,\n        preview_short: formatDataForPreview(data, false),\n        preview_long: formatDataForPreview(data, true),\n        name: data.toString(),\n        type,\n      };\n\n    case 'object':\n      isPathAllowedCheck = isPathAllowed(path);\n\n      if (level >= LEVEL_THRESHOLD && !isPathAllowedCheck) {\n        return createDehydrated(type, true, data, cleaned, path);\n      } else {\n        const object: {\n          [string]: $PropertyType<DehydratedData, 'data'>,\n        } = {};\n        getAllEnumerableKeys(data).forEach(key => {\n          const name = key.toString();\n          object[name] = dehydrateKey(\n            data,\n            key,\n            cleaned,\n            unserializable,\n            path.concat([name]),\n            isPathAllowed,\n            isPathAllowedCheck ? 1 : level + 1,\n          );\n        });\n        return object;\n      }\n\n    case 'class_instance':\n      isPathAllowedCheck = isPathAllowed(path);\n\n      if (level >= LEVEL_THRESHOLD && !isPathAllowedCheck) {\n        return createDehydrated(type, true, data, cleaned, path);\n      }\n\n      const value: Unserializable = {\n        unserializable: true,\n        type,\n        readonly: true,\n        preview_short: formatDataForPreview(data, false),\n        preview_long: formatDataForPreview(data, true),\n        name:\n          typeof data.constructor !== 'function' ||\n          typeof data.constructor.name !== 'string'\n            ? ''\n            : data.constructor.name,\n      };\n\n      getAllEnumerableKeys(data).forEach(key => {\n        const keyAsString = key.toString();\n\n        value[keyAsString] = dehydrate(\n          data[key],\n          cleaned,\n          unserializable,\n          path.concat([keyAsString]),\n          isPathAllowed,\n          isPathAllowedCheck ? 1 : level + 1,\n        );\n      });\n\n      unserializable.push(path);\n\n      return value;\n\n    case 'infinity':\n    case 'nan':\n    case 'undefined':\n      // Some values are lossy when sent through a WebSocket.\n      // We dehydrate+rehydrate them to preserve their type.\n      cleaned.push(path);\n      return {type};\n\n    default:\n      return data;\n  }\n}\n\nfunction dehydrateKey(\n  parent: Object,\n  key: number | string | symbol,\n  cleaned: Array<Array<string | number>>,\n  unserializable: Array<Array<string | number>>,\n  path: Array<string | number>,\n  isPathAllowed: (path: Array<string | number>) => boolean,\n  level: number = 0,\n): $PropertyType<DehydratedData, 'data'> {\n  try {\n    return dehydrate(\n      parent[key],\n      cleaned,\n      unserializable,\n      path,\n      isPathAllowed,\n      level,\n    );\n  } catch (error) {\n    let preview = '';\n    if (\n      typeof error === 'object' &&\n      error !== null &&\n      typeof error.stack === 'string'\n    ) {\n      preview = error.stack;\n    } else if (typeof error === 'string') {\n      preview = error;\n    }\n    cleaned.push(path);\n    return {\n      inspectable: false,\n      preview_short: '[Exception]',\n      preview_long: preview ? '[Exception: ' + preview + ']' : '[Exception]',\n      name: preview,\n      type: 'unknown',\n    };\n  }\n}\n\nexport function fillInPath(\n  object: Object,\n  data: DehydratedData,\n  path: InspectedElementPath,\n  value: any,\n) {\n  const target = getInObject(object, path);\n  if (target != null) {\n    if (!target[meta.unserializable]) {\n      delete target[meta.inspectable];\n      delete target[meta.inspected];\n      delete target[meta.name];\n      delete target[meta.preview_long];\n      delete target[meta.preview_short];\n      delete target[meta.readonly];\n      delete target[meta.size];\n      delete target[meta.type];\n    }\n  }\n\n  if (value !== null && data.unserializable.length > 0) {\n    const unserializablePath = data.unserializable[0];\n    let isMatch = unserializablePath.length === path.length;\n    for (let i = 0; i < path.length; i++) {\n      if (path[i] !== unserializablePath[i]) {\n        isMatch = false;\n        break;\n      }\n    }\n    if (isMatch) {\n      upgradeUnserializable(value, value);\n    }\n  }\n\n  setInObject(object, path, value);\n}\n\nexport function hydrate(\n  object: any,\n  cleaned: Array<Array<string | number>>,\n  unserializable: Array<Array<string | number>>,\n): Object {\n  cleaned.forEach((path: Array<string | number>) => {\n    const length = path.length;\n    const last = path[length - 1];\n    const parent = getInObject(object, path.slice(0, length - 1));\n    if (!parent || !parent.hasOwnProperty(last)) {\n      return;\n    }\n\n    const value = parent[last];\n\n    if (!value) {\n      return;\n    } else if (value.type === 'infinity') {\n      parent[last] = Infinity;\n    } else if (value.type === 'nan') {\n      parent[last] = NaN;\n    } else if (value.type === 'undefined') {\n      parent[last] = undefined;\n    } else {\n      // Replace the string keys with Symbols so they're non-enumerable.\n      const replaced: {[key: symbol]: boolean | string} = {};\n      replaced[meta.inspectable] = !!value.inspectable;\n      replaced[meta.inspected] = false;\n      replaced[meta.name] = value.name;\n      replaced[meta.preview_long] = value.preview_long;\n      replaced[meta.preview_short] = value.preview_short;\n      replaced[meta.size] = value.size;\n      replaced[meta.readonly] = !!value.readonly;\n      replaced[meta.type] = value.type;\n\n      parent[last] = replaced;\n    }\n  });\n  unserializable.forEach((path: Array<string | number>) => {\n    const length = path.length;\n    const last = path[length - 1];\n    const parent = getInObject(object, path.slice(0, length - 1));\n    if (!parent || !parent.hasOwnProperty(last)) {\n      return;\n    }\n\n    const node = parent[last];\n\n    const replacement = {\n      ...node,\n    };\n\n    upgradeUnserializable(replacement, node);\n\n    parent[last] = replacement;\n  });\n  return object;\n}\n\nfunction upgradeUnserializable(destination: Object, source: Object) {\n  Object.defineProperties(destination, {\n    // $FlowFixMe[invalid-computed-prop]\n    [meta.inspected]: {\n      configurable: true,\n      enumerable: false,\n      value: !!source.inspected,\n    },\n    // $FlowFixMe[invalid-computed-prop]\n    [meta.name]: {\n      configurable: true,\n      enumerable: false,\n      value: source.name,\n    },\n    // $FlowFixMe[invalid-computed-prop]\n    [meta.preview_long]: {\n      configurable: true,\n      enumerable: false,\n      value: source.preview_long,\n    },\n    // $FlowFixMe[invalid-computed-prop]\n    [meta.preview_short]: {\n      configurable: true,\n      enumerable: false,\n      value: source.preview_short,\n    },\n    // $FlowFixMe[invalid-computed-prop]\n    [meta.size]: {\n      configurable: true,\n      enumerable: false,\n      value: source.size,\n    },\n    // $FlowFixMe[invalid-computed-prop]\n    [meta.readonly]: {\n      configurable: true,\n      enumerable: false,\n      value: !!source.readonly,\n    },\n    // $FlowFixMe[invalid-computed-prop]\n    [meta.type]: {\n      configurable: true,\n      enumerable: false,\n      value: source.type,\n    },\n    // $FlowFixMe[invalid-computed-prop]\n    [meta.unserializable]: {\n      configurable: true,\n      enumerable: false,\n      value: !!source.unserializable,\n    },\n  });\n\n  delete destination.inspected;\n  delete destination.name;\n  delete destination.preview_long;\n  delete destination.preview_short;\n  delete destination.size;\n  delete destination.readonly;\n  delete destination.type;\n  delete destination.unserializable;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nconst isArray = Array.isArray;\n\nexport default isArray;\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\ndeclare function isArray(a: mixed): boolean %checks(Array.isArray(a));\n\nconst isArrayImpl = Array.isArray;\n\nfunction isArray(a: mixed): boolean {\n  return isArrayImpl(a);\n}\n\nexport default isArray;\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {PROFILER_EXPORT_VERSION} from 'react-devtools-shared/src/constants';\nimport {backendToFrontendSerializedElementMapper} from 'react-devtools-shared/src/utils';\n\nimport type {ProfilingDataBackend} from 'react-devtools-shared/src/backend/types';\nimport type {\n  ProfilingDataExport,\n  ProfilingDataForRootExport,\n  ProfilingDataForRootFrontend,\n  ProfilingDataFrontend,\n  SnapshotNode,\n} from './types';\nimport type {\n  TimelineData,\n  TimelineDataExport,\n} from 'react-devtools-timeline/src/types';\n\nconst commitGradient = [\n  'var(--color-commit-gradient-0)',\n  'var(--color-commit-gradient-1)',\n  'var(--color-commit-gradient-2)',\n  'var(--color-commit-gradient-3)',\n  'var(--color-commit-gradient-4)',\n  'var(--color-commit-gradient-5)',\n  'var(--color-commit-gradient-6)',\n  'var(--color-commit-gradient-7)',\n  'var(--color-commit-gradient-8)',\n  'var(--color-commit-gradient-9)',\n];\n\n// Combines info from the Store (frontend) and renderer interfaces (backend) into the format required by the Profiler UI.\n// This format can then be quickly exported (and re-imported).\nexport function prepareProfilingDataFrontendFromBackendAndStore(\n  dataBackends: Array<ProfilingDataBackend>,\n  operationsByRootID: Map<number, Array<Array<number>>>,\n  snapshotsByRootID: Map<number, Map<number, SnapshotNode>>,\n): ProfilingDataFrontend {\n  const dataForRoots: Map<number, ProfilingDataForRootFrontend> = new Map();\n\n  const timelineDataArray = [];\n\n  dataBackends.forEach(dataBackend => {\n    const {timelineData} = dataBackend;\n    if (timelineData != null) {\n      const {\n        batchUIDToMeasuresKeyValueArray,\n        internalModuleSourceToRanges,\n        laneToLabelKeyValueArray,\n        laneToReactMeasureKeyValueArray,\n        ...rest\n      } = timelineData;\n\n      timelineDataArray.push({\n        ...rest,\n\n        // Most of the data is safe to parse as-is,\n        // but we need to convert the nested Arrays back to Maps.\n        batchUIDToMeasuresMap: new Map(batchUIDToMeasuresKeyValueArray),\n        internalModuleSourceToRanges: new Map(internalModuleSourceToRanges),\n        laneToLabelMap: new Map(laneToLabelKeyValueArray),\n        laneToReactMeasureMap: new Map(laneToReactMeasureKeyValueArray),\n      });\n    }\n\n    dataBackend.dataForRoots.forEach(\n      ({commitData, displayName, initialTreeBaseDurations, rootID}) => {\n        const operations = operationsByRootID.get(rootID);\n        if (operations == null) {\n          throw Error(\n            `Could not find profiling operations for root \"${rootID}\"`,\n          );\n        }\n\n        const snapshots = snapshotsByRootID.get(rootID);\n        if (snapshots == null) {\n          throw Error(\n            `Could not find profiling snapshots for root \"${rootID}\"`,\n          );\n        }\n\n        // Do not filter empty commits from the profiler data!\n        // Hiding \"empty\" commits might cause confusion too.\n        // A commit *did happen* even if none of the components the Profiler is showing were involved.\n        const convertedCommitData = commitData.map(\n          (commitDataBackend, commitIndex) => ({\n            changeDescriptions:\n              commitDataBackend.changeDescriptions != null\n                ? new Map(commitDataBackend.changeDescriptions)\n                : null,\n            duration: commitDataBackend.duration,\n            effectDuration: commitDataBackend.effectDuration,\n            fiberActualDurations: new Map(\n              commitDataBackend.fiberActualDurations,\n            ),\n            fiberSelfDurations: new Map(commitDataBackend.fiberSelfDurations),\n            passiveEffectDuration: commitDataBackend.passiveEffectDuration,\n            priorityLevel: commitDataBackend.priorityLevel,\n            timestamp: commitDataBackend.timestamp,\n            updaters:\n              commitDataBackend.updaters !== null\n                ? commitDataBackend.updaters.map(\n                    backendToFrontendSerializedElementMapper,\n                  )\n                : null,\n          }),\n        );\n\n        dataForRoots.set(rootID, {\n          commitData: convertedCommitData,\n          displayName,\n          initialTreeBaseDurations: new Map(initialTreeBaseDurations),\n          operations,\n          rootID,\n          snapshots,\n        });\n      },\n    );\n  });\n\n  return {dataForRoots, imported: false, timelineData: timelineDataArray};\n}\n\n// Converts a Profiling data export into the format required by the Store.\nexport function prepareProfilingDataFrontendFromExport(\n  profilingDataExport: ProfilingDataExport,\n): ProfilingDataFrontend {\n  const {version} = profilingDataExport;\n\n  if (version !== PROFILER_EXPORT_VERSION) {\n    throw Error(\n      `Unsupported profile export version \"${version}\". Supported version is \"${PROFILER_EXPORT_VERSION}\".`,\n    );\n  }\n\n  const timelineData: Array<TimelineData> = profilingDataExport.timelineData\n    ? profilingDataExport.timelineData.map(\n        ({\n          batchUIDToMeasuresKeyValueArray,\n          componentMeasures,\n          duration,\n          flamechart,\n          internalModuleSourceToRanges,\n          laneToLabelKeyValueArray,\n          laneToReactMeasureKeyValueArray,\n          nativeEvents,\n          networkMeasures,\n          otherUserTimingMarks,\n          reactVersion,\n          schedulingEvents,\n          snapshots,\n          snapshotHeight,\n          startTime,\n          suspenseEvents,\n          thrownErrors,\n        }) => ({\n          // Most of the data is safe to parse as-is,\n          // but we need to convert the nested Arrays back to Maps.\n          batchUIDToMeasuresMap: new Map(batchUIDToMeasuresKeyValueArray),\n          componentMeasures,\n          duration,\n          flamechart,\n          internalModuleSourceToRanges: new Map(internalModuleSourceToRanges),\n          laneToLabelMap: new Map(laneToLabelKeyValueArray),\n          laneToReactMeasureMap: new Map(laneToReactMeasureKeyValueArray),\n          nativeEvents,\n          networkMeasures,\n          otherUserTimingMarks,\n          reactVersion,\n          schedulingEvents,\n          snapshots,\n          snapshotHeight,\n          startTime,\n          suspenseEvents,\n          thrownErrors,\n        }),\n      )\n    : [];\n\n  const dataForRoots: Map<number, ProfilingDataForRootFrontend> = new Map();\n  profilingDataExport.dataForRoots.forEach(\n    ({\n      commitData,\n      displayName,\n      initialTreeBaseDurations,\n      operations,\n      rootID,\n      snapshots,\n    }) => {\n      dataForRoots.set(rootID, {\n        commitData: commitData.map(\n          ({\n            changeDescriptions,\n            duration,\n            effectDuration,\n            fiberActualDurations,\n            fiberSelfDurations,\n            passiveEffectDuration,\n            priorityLevel,\n            timestamp,\n            updaters,\n          }) => ({\n            changeDescriptions:\n              changeDescriptions != null ? new Map(changeDescriptions) : null,\n            duration,\n            effectDuration,\n            fiberActualDurations: new Map(fiberActualDurations),\n            fiberSelfDurations: new Map(fiberSelfDurations),\n            passiveEffectDuration,\n            priorityLevel,\n            timestamp,\n            updaters,\n          }),\n        ),\n        displayName,\n        initialTreeBaseDurations: new Map(initialTreeBaseDurations),\n        operations,\n        rootID,\n        snapshots: new Map(snapshots),\n      });\n    },\n  );\n\n  return {\n    dataForRoots,\n    imported: true,\n    timelineData,\n  };\n}\n\n// Converts a Store Profiling data into a format that can be safely (JSON) serialized for export.\nexport function prepareProfilingDataExport(\n  profilingDataFrontend: ProfilingDataFrontend,\n): ProfilingDataExport {\n  const timelineData: Array<TimelineDataExport> =\n    profilingDataFrontend.timelineData.map(\n      ({\n        batchUIDToMeasuresMap,\n        componentMeasures,\n        duration,\n        flamechart,\n        internalModuleSourceToRanges,\n        laneToLabelMap,\n        laneToReactMeasureMap,\n        nativeEvents,\n        networkMeasures,\n        otherUserTimingMarks,\n        reactVersion,\n        schedulingEvents,\n        snapshots,\n        snapshotHeight,\n        startTime,\n        suspenseEvents,\n        thrownErrors,\n      }) => ({\n        // Most of the data is safe to serialize as-is,\n        // but we need to convert the Maps to nested Arrays.\n        batchUIDToMeasuresKeyValueArray: Array.from(\n          batchUIDToMeasuresMap.entries(),\n        ),\n        componentMeasures: componentMeasures,\n        duration,\n        flamechart,\n        internalModuleSourceToRanges: Array.from(\n          internalModuleSourceToRanges.entries(),\n        ),\n        laneToLabelKeyValueArray: Array.from(laneToLabelMap.entries()),\n        laneToReactMeasureKeyValueArray: Array.from(\n          laneToReactMeasureMap.entries(),\n        ),\n        nativeEvents,\n        networkMeasures,\n        otherUserTimingMarks,\n        reactVersion,\n        schedulingEvents,\n        snapshots,\n        snapshotHeight,\n        startTime,\n        suspenseEvents,\n        thrownErrors,\n      }),\n    );\n\n  const dataForRoots: Array<ProfilingDataForRootExport> = [];\n  profilingDataFrontend.dataForRoots.forEach(\n    ({\n      commitData,\n      displayName,\n      initialTreeBaseDurations,\n      operations,\n      rootID,\n      snapshots,\n    }) => {\n      dataForRoots.push({\n        commitData: commitData.map(\n          ({\n            changeDescriptions,\n            duration,\n            effectDuration,\n            fiberActualDurations,\n            fiberSelfDurations,\n            passiveEffectDuration,\n            priorityLevel,\n            timestamp,\n            updaters,\n          }) => ({\n            changeDescriptions:\n              changeDescriptions != null\n                ? Array.from(changeDescriptions.entries())\n                : null,\n            duration,\n            effectDuration,\n            fiberActualDurations: Array.from(fiberActualDurations.entries()),\n            fiberSelfDurations: Array.from(fiberSelfDurations.entries()),\n            passiveEffectDuration,\n            priorityLevel,\n            timestamp,\n            updaters,\n          }),\n        ),\n        displayName,\n        initialTreeBaseDurations: Array.from(\n          initialTreeBaseDurations.entries(),\n        ),\n        operations,\n        rootID,\n        snapshots: Array.from(snapshots.entries()),\n      });\n    },\n  );\n\n  return {\n    version: PROFILER_EXPORT_VERSION,\n    dataForRoots,\n    timelineData,\n  };\n}\n\nexport const getGradientColor = (value: number): string => {\n  const maxIndex = commitGradient.length - 1;\n  let index;\n  if (Number.isNaN(value)) {\n    index = 0;\n  } else if (!Number.isFinite(value)) {\n    index = maxIndex;\n  } else {\n    index = Math.max(0, Math.min(maxIndex, value)) * maxIndex;\n  }\n  return commitGradient[Math.round(index)];\n};\n\nexport const formatDuration = (duration: number): number | string =>\n  Math.round(duration * 10) / 10 || '<0.1';\nexport const formatPercentage = (percentage: number): number =>\n  Math.round(percentage * 100);\nexport const formatTime = (timestamp: number): number =>\n  Math.round(Math.round(timestamp) / 100) / 10;\n\nexport const scale =\n  (\n    minValue: number,\n    maxValue: number,\n    minRange: number,\n    maxRange: number,\n  ): ((value: number, fallbackValue: number) => number) =>\n  (value: number, fallbackValue: number) =>\n    maxValue - minValue === 0\n      ? fallbackValue\n      : ((value - minValue) / (maxValue - minValue)) * (maxRange - minRange);\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {\n  __DEBUG__,\n  TREE_OPERATION_ADD,\n  TREE_OPERATION_REMOVE,\n  TREE_OPERATION_REMOVE_ROOT,\n  TREE_OPERATION_REORDER_CHILDREN,\n  TREE_OPERATION_SET_SUBTREE_MODE,\n  TREE_OPERATION_UPDATE_TREE_BASE_DURATION,\n  TREE_OPERATION_UPDATE_ERRORS_OR_WARNINGS,\n} from 'react-devtools-shared/src/constants';\nimport {\n  parseElementDisplayNameFromBackend,\n  utfDecodeStringWithRanges,\n} from 'react-devtools-shared/src/utils';\nimport {ElementTypeRoot} from 'react-devtools-shared/src/frontend/types';\nimport ProfilerStore from 'react-devtools-shared/src/devtools/ProfilerStore';\n\nimport type {ElementType} from 'react-devtools-shared/src/frontend/types';\nimport type {\n  CommitTree,\n  CommitTreeNode,\n  ProfilingDataForRootFrontend,\n} from 'react-devtools-shared/src/devtools/views/Profiler/types';\n\nconst debug = (methodName: string, ...args: Array<string>) => {\n  if (__DEBUG__) {\n    console.log(\n      `%cCommitTreeBuilder %c${methodName}`,\n      'color: pink; font-weight: bold;',\n      'font-weight: bold;',\n      ...args,\n    );\n  }\n};\n\nconst rootToCommitTreeMap: Map<number, Array<CommitTree>> = new Map();\n\nexport function getCommitTree({\n  commitIndex,\n  profilerStore,\n  rootID,\n}: {\n  commitIndex: number,\n  profilerStore: ProfilerStore,\n  rootID: number,\n}): CommitTree {\n  if (!rootToCommitTreeMap.has(rootID)) {\n    rootToCommitTreeMap.set(rootID, []);\n  }\n\n  const commitTrees = ((rootToCommitTreeMap.get(\n    rootID,\n  ): any): Array<CommitTree>);\n  if (commitIndex < commitTrees.length) {\n    return commitTrees[commitIndex];\n  }\n\n  const {profilingData} = profilerStore;\n  if (profilingData === null) {\n    throw Error(`No profiling data available`);\n  }\n\n  const dataForRoot = profilingData.dataForRoots.get(rootID);\n  if (dataForRoot == null) {\n    throw Error(`Could not find profiling data for root \"${rootID}\"`);\n  }\n\n  const {operations} = dataForRoot;\n  if (operations.length <= commitIndex) {\n    throw Error(\n      `getCommitTree(): Invalid commit \"${commitIndex}\" for root \"${rootID}\". There are only \"${operations.length}\" commits.`,\n    );\n  }\n\n  let commitTree: CommitTree = ((null: any): CommitTree);\n  for (let index = commitTrees.length; index <= commitIndex; index++) {\n    // Commits are generated sequentially and cached.\n    // If this is the very first commit, start with the cached snapshot and apply the first mutation.\n    // Otherwise load (or generate) the previous commit and append a mutation to it.\n    if (index === 0) {\n      const nodes = new Map<number, CommitTreeNode>();\n\n      // Construct the initial tree.\n      recursivelyInitializeTree(rootID, 0, nodes, dataForRoot);\n\n      // Mutate the tree\n      if (operations != null && index < operations.length) {\n        commitTree = updateTree({nodes, rootID}, operations[index]);\n\n        if (__DEBUG__) {\n          __printTree(commitTree);\n        }\n\n        commitTrees.push(commitTree);\n      }\n    } else {\n      const previousCommitTree = commitTrees[index - 1];\n      commitTree = updateTree(previousCommitTree, operations[index]);\n\n      if (__DEBUG__) {\n        __printTree(commitTree);\n      }\n\n      commitTrees.push(commitTree);\n    }\n  }\n\n  return commitTree;\n}\n\nfunction recursivelyInitializeTree(\n  id: number,\n  parentID: number,\n  nodes: Map<number, CommitTreeNode>,\n  dataForRoot: ProfilingDataForRootFrontend,\n): void {\n  const node = dataForRoot.snapshots.get(id);\n  if (node != null) {\n    nodes.set(id, {\n      id,\n      children: node.children,\n      displayName: node.displayName,\n      hocDisplayNames: node.hocDisplayNames,\n      key: node.key,\n      parentID,\n      treeBaseDuration: ((dataForRoot.initialTreeBaseDurations.get(\n        id,\n      ): any): number),\n      type: node.type,\n      compiledWithForget: node.compiledWithForget,\n    });\n\n    node.children.forEach(childID =>\n      recursivelyInitializeTree(childID, id, nodes, dataForRoot),\n    );\n  }\n}\n\nfunction updateTree(\n  commitTree: CommitTree,\n  operations: Array<number>,\n): CommitTree {\n  // Clone the original tree so edits don't affect it.\n  const nodes = new Map(commitTree.nodes);\n\n  // Clone nodes before mutating them so edits don't affect them.\n  const getClonedNode = (id: number): CommitTreeNode => {\n    // $FlowFixMe[prop-missing] - recommended fix is to use object spread operator\n    const clonedNode = ((Object.assign(\n      {},\n      nodes.get(id),\n    ): any): CommitTreeNode);\n    nodes.set(id, clonedNode);\n    return clonedNode;\n  };\n\n  let i = 2;\n  let id: number = ((null: any): number);\n\n  // Reassemble the string table.\n  const stringTable: Array<null | string> = [\n    null, // ID = 0 corresponds to the null string.\n  ];\n  const stringTableSize = operations[i++];\n  const stringTableEnd = i + stringTableSize;\n  while (i < stringTableEnd) {\n    const nextLength = operations[i++];\n    const nextString = utfDecodeStringWithRanges(\n      operations,\n      i,\n      i + nextLength - 1,\n    );\n    stringTable.push(nextString);\n    i += nextLength;\n  }\n\n  while (i < operations.length) {\n    const operation = operations[i];\n\n    switch (operation) {\n      case TREE_OPERATION_ADD: {\n        id = ((operations[i + 1]: any): number);\n        const type = ((operations[i + 2]: any): ElementType);\n\n        i += 3;\n\n        if (nodes.has(id)) {\n          throw new Error(\n            `Commit tree already contains fiber \"${id}\". This is a bug in React DevTools.`,\n          );\n        }\n\n        if (type === ElementTypeRoot) {\n          i++; // isStrictModeCompliant\n          i++; // Profiling flag\n          i++; // supportsStrictMode flag\n          i++; // hasOwnerMetadata flag\n\n          if (__DEBUG__) {\n            debug('Add', `new root fiber ${id}`);\n          }\n\n          const node: CommitTreeNode = {\n            children: [],\n            displayName: null,\n            hocDisplayNames: null,\n            id,\n            key: null,\n            parentID: 0,\n            treeBaseDuration: 0, // This will be updated by a subsequent operation\n            type,\n            compiledWithForget: false,\n          };\n\n          nodes.set(id, node);\n        } else {\n          const parentID = ((operations[i]: any): number);\n          i++;\n\n          i++; // ownerID\n\n          const displayNameStringID = operations[i];\n          const displayName = stringTable[displayNameStringID];\n          i++;\n\n          const keyStringID = operations[i];\n          const key = stringTable[keyStringID];\n          i++;\n\n          if (__DEBUG__) {\n            debug(\n              'Add',\n              `fiber ${id} (${displayName || 'null'}) as child of ${parentID}`,\n            );\n          }\n\n          const parentNode = getClonedNode(parentID);\n          parentNode.children = parentNode.children.concat(id);\n\n          const {formattedDisplayName, hocDisplayNames, compiledWithForget} =\n            parseElementDisplayNameFromBackend(displayName, type);\n\n          const node: CommitTreeNode = {\n            children: [],\n            displayName: formattedDisplayName,\n            hocDisplayNames: hocDisplayNames,\n            id,\n            key,\n            parentID,\n            treeBaseDuration: 0, // This will be updated by a subsequent operation\n            type,\n            compiledWithForget,\n          };\n\n          nodes.set(id, node);\n        }\n\n        break;\n      }\n      case TREE_OPERATION_REMOVE: {\n        const removeLength = ((operations[i + 1]: any): number);\n        i += 2;\n\n        for (let removeIndex = 0; removeIndex < removeLength; removeIndex++) {\n          id = ((operations[i]: any): number);\n          i++;\n\n          if (!nodes.has(id)) {\n            throw new Error(\n              `Commit tree does not contain fiber \"${id}\". This is a bug in React DevTools.`,\n            );\n          }\n\n          const node = getClonedNode(id);\n          const parentID = node.parentID;\n\n          nodes.delete(id);\n\n          if (!nodes.has(parentID)) {\n            // No-op\n          } else {\n            const parentNode = getClonedNode(parentID);\n\n            if (__DEBUG__) {\n              debug('Remove', `fiber ${id} from parent ${parentID}`);\n            }\n\n            parentNode.children = parentNode.children.filter(\n              childID => childID !== id,\n            );\n          }\n        }\n        break;\n      }\n      case TREE_OPERATION_REMOVE_ROOT: {\n        throw Error('Operation REMOVE_ROOT is not supported while profiling.');\n      }\n      case TREE_OPERATION_REORDER_CHILDREN: {\n        id = ((operations[i + 1]: any): number);\n        const numChildren = ((operations[i + 2]: any): number);\n        const children = ((operations.slice(\n          i + 3,\n          i + 3 + numChildren,\n        ): any): Array<number>);\n\n        i = i + 3 + numChildren;\n\n        if (__DEBUG__) {\n          debug('Re-order', `fiber ${id} children ${children.join(',')}`);\n        }\n\n        const node = getClonedNode(id);\n        node.children = Array.from(children);\n\n        break;\n      }\n      case TREE_OPERATION_SET_SUBTREE_MODE: {\n        id = operations[i + 1];\n        const mode = operations[i + 1];\n\n        i += 3;\n\n        if (__DEBUG__) {\n          debug('Subtree mode', `Subtree with root ${id} set to mode ${mode}`);\n        }\n        break;\n      }\n      case TREE_OPERATION_UPDATE_TREE_BASE_DURATION: {\n        id = operations[i + 1];\n\n        const node = getClonedNode(id);\n        node.treeBaseDuration = operations[i + 2] / 1000; // Convert microseconds back to milliseconds;\n\n        if (__DEBUG__) {\n          debug(\n            'Update',\n            `fiber ${id} treeBaseDuration to ${node.treeBaseDuration}`,\n          );\n        }\n\n        i += 3;\n        break;\n      }\n      case TREE_OPERATION_UPDATE_ERRORS_OR_WARNINGS: {\n        id = operations[i + 1];\n        const numErrors = operations[i + 2];\n        const numWarnings = operations[i + 3];\n\n        i += 4;\n\n        if (__DEBUG__) {\n          debug(\n            'Warnings and Errors update',\n            `fiber ${id} has ${numErrors} errors and ${numWarnings} warnings`,\n          );\n        }\n        break;\n      }\n\n      default:\n        throw Error(`Unsupported Bridge operation \"${operation}\"`);\n    }\n  }\n\n  return {\n    nodes,\n    rootID: commitTree.rootID,\n  };\n}\n\nexport function invalidateCommitTrees(): void {\n  rootToCommitTreeMap.clear();\n}\n\n// DEBUG\nconst __printTree = (commitTree: CommitTree) => {\n  if (__DEBUG__) {\n    const {nodes, rootID} = commitTree;\n    console.group('__printTree()');\n    const queue = [rootID, 0];\n    while (queue.length > 0) {\n      const id = queue.shift();\n      const depth = queue.shift();\n\n      // $FlowFixMe[incompatible-call]\n      const node = nodes.get(id);\n      if (node == null) {\n        // $FlowFixMe[incompatible-type]\n        throw Error(`Could not find node with id \"${id}\" in commit tree`);\n      }\n\n      console.log(\n        // $FlowFixMe[incompatible-call]\n        `${'•'.repeat(depth)}${node.id}:${node.displayName || ''} ${\n          node.key ? `key:\"${node.key}\"` : ''\n        } (${node.treeBaseDuration})`,\n      );\n\n      node.children.forEach(childID => {\n        // $FlowFixMe[unsafe-addition]\n        queue.push(childID, depth + 1);\n      });\n    }\n    console.groupEnd();\n  }\n};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {formatDuration} from './utils';\nimport ProfilerStore from 'react-devtools-shared/src/devtools/ProfilerStore';\n\nimport type {CommitTree} from './types';\n\nexport type ChartNode = {\n  actualDuration: number,\n  didRender: boolean,\n  id: number,\n  label: string,\n  name: string,\n  offset: number,\n  selfDuration: number,\n  treeBaseDuration: number,\n};\n\nexport type ChartData = {\n  baseDuration: number,\n  depth: number,\n  idToDepthMap: Map<number, number>,\n  maxSelfDuration: number,\n  renderPathNodes: Set<number>,\n  rows: Array<Array<ChartNode>>,\n};\n\nconst cachedChartData: Map<string, ChartData> = new Map();\n\nexport function getChartData({\n  commitIndex,\n  commitTree,\n  profilerStore,\n  rootID,\n}: {\n  commitIndex: number,\n  commitTree: CommitTree,\n  profilerStore: ProfilerStore,\n  rootID: number,\n}): ChartData {\n  const commitDatum = profilerStore.getCommitData(rootID, commitIndex);\n\n  const {fiberActualDurations, fiberSelfDurations} = commitDatum;\n  const {nodes} = commitTree;\n\n  const chartDataKey = `${rootID}-${commitIndex}`;\n  if (cachedChartData.has(chartDataKey)) {\n    return ((cachedChartData.get(chartDataKey): any): ChartData);\n  }\n\n  const idToDepthMap: Map<number, number> = new Map();\n  const renderPathNodes: Set<number> = new Set();\n  const rows: Array<Array<ChartNode>> = [];\n\n  let maxDepth = 0;\n  let maxSelfDuration = 0;\n\n  // Generate flame graph structure using tree base durations.\n  const walkTree = (\n    id: number,\n    rightOffset: number,\n    currentDepth: number,\n  ): ChartNode => {\n    idToDepthMap.set(id, currentDepth);\n\n    const node = nodes.get(id);\n    if (node == null) {\n      throw Error(`Could not find node with id \"${id}\" in commit tree`);\n    }\n\n    const {\n      children,\n      displayName,\n      hocDisplayNames,\n      key,\n      treeBaseDuration,\n      compiledWithForget,\n    } = node;\n\n    const actualDuration = fiberActualDurations.get(id) || 0;\n    const selfDuration = fiberSelfDurations.get(id) || 0;\n    const didRender = fiberActualDurations.has(id);\n\n    const name = displayName || 'Anonymous';\n    const maybeKey = key !== null ? ` key=\"${key}\"` : '';\n\n    let maybeBadge = '';\n    const maybeForgetBadge = compiledWithForget ? '✨ ' : '';\n\n    if (hocDisplayNames !== null && hocDisplayNames.length > 0) {\n      maybeBadge = ` (${hocDisplayNames[0]})`;\n    }\n\n    let label = `${maybeForgetBadge}${name}${maybeBadge}${maybeKey}`;\n    if (didRender) {\n      label += ` (${formatDuration(selfDuration)}ms of ${formatDuration(\n        actualDuration,\n      )}ms)`;\n    }\n\n    maxDepth = Math.max(maxDepth, currentDepth);\n    maxSelfDuration = Math.max(maxSelfDuration, selfDuration);\n\n    const chartNode: ChartNode = {\n      actualDuration,\n      didRender,\n      id,\n      label,\n      name,\n      offset: rightOffset - treeBaseDuration,\n      selfDuration,\n      treeBaseDuration,\n    };\n\n    if (currentDepth > rows.length) {\n      rows.push([chartNode]);\n    } else {\n      rows[currentDepth - 1].push(chartNode);\n    }\n\n    for (let i = children.length - 1; i >= 0; i--) {\n      const childID = children[i];\n      const childChartNode: $FlowFixMe = walkTree(\n        childID,\n        rightOffset,\n        currentDepth + 1,\n      );\n      rightOffset -= childChartNode.treeBaseDuration;\n    }\n\n    return chartNode;\n  };\n\n  let baseDuration = 0;\n\n  // Special case to handle unmounted roots.\n  if (nodes.size > 0) {\n    // Skip over the root; we don't want to show it in the flamegraph.\n    const root = nodes.get(rootID);\n    if (root == null) {\n      throw Error(\n        `Could not find root node with id \"${rootID}\" in commit tree`,\n      );\n    }\n\n    // Don't assume a single root.\n    // Component filters or Fragments might lead to multiple \"roots\" in a flame graph.\n    for (let i = root.children.length - 1; i >= 0; i--) {\n      const id = root.children[i];\n      const node = nodes.get(id);\n      if (node == null) {\n        throw Error(`Could not find node with id \"${id}\" in commit tree`);\n      }\n      baseDuration += node.treeBaseDuration;\n      walkTree(id, baseDuration, 1);\n    }\n\n    fiberActualDurations.forEach((duration, id) => {\n      let node = nodes.get(id);\n      if (node != null) {\n        let currentID = node.parentID;\n        while (currentID !== 0) {\n          if (renderPathNodes.has(currentID)) {\n            // We've already walked this path; we can skip it.\n            break;\n          } else {\n            renderPathNodes.add(currentID);\n          }\n\n          node = nodes.get(currentID);\n          currentID = node != null ? node.parentID : 0;\n        }\n      }\n    });\n  }\n\n  const chartData = {\n    baseDuration,\n    depth: maxDepth,\n    idToDepthMap,\n    maxSelfDuration,\n    renderPathNodes,\n    rows,\n  };\n\n  cachedChartData.set(chartDataKey, chartData);\n\n  return chartData;\n}\n\nexport function invalidateChartData(): void {\n  cachedChartData.clear();\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {\n  ElementTypeForwardRef,\n  ElementTypeMemo,\n} from 'react-devtools-shared/src/frontend/types';\nimport {formatDuration} from './utils';\nimport ProfilerStore from 'react-devtools-shared/src/devtools/ProfilerStore';\n\nimport type {CommitTree} from './types';\n\nexport type ChartNode = {\n  id: number,\n  label: string,\n  name: string,\n  value: number,\n};\n\nexport type ChartData = {\n  maxValue: number,\n  nodes: Array<ChartNode>,\n};\n\nconst cachedChartData: Map<string, ChartData> = new Map();\n\nexport function getChartData({\n  commitIndex,\n  commitTree,\n  profilerStore,\n  rootID,\n}: {\n  commitIndex: number,\n  commitTree: CommitTree,\n  profilerStore: ProfilerStore,\n  rootID: number,\n}): ChartData {\n  const commitDatum = profilerStore.getCommitData(rootID, commitIndex);\n\n  const {fiberActualDurations, fiberSelfDurations} = commitDatum;\n  const {nodes} = commitTree;\n\n  const chartDataKey = `${rootID}-${commitIndex}`;\n  if (cachedChartData.has(chartDataKey)) {\n    return ((cachedChartData.get(chartDataKey): any): ChartData);\n  }\n\n  let maxSelfDuration = 0;\n\n  const chartNodes: Array<ChartNode> = [];\n  fiberActualDurations.forEach((actualDuration, id) => {\n    const node = nodes.get(id);\n\n    if (node == null) {\n      throw Error(`Could not find node with id \"${id}\" in commit tree`);\n    }\n\n    const {displayName, key, parentID, type, compiledWithForget} = node;\n\n    // Don't show the root node in this chart.\n    if (parentID === 0) {\n      return;\n    }\n    const selfDuration = fiberSelfDurations.get(id) || 0;\n    maxSelfDuration = Math.max(maxSelfDuration, selfDuration);\n\n    const name = displayName || 'Anonymous';\n    const maybeKey = key !== null ? ` key=\"${key}\"` : '';\n    const maybeForgetBadge = compiledWithForget ? '✨ ' : '';\n\n    let maybeBadge = '';\n    if (type === ElementTypeForwardRef) {\n      maybeBadge = ' (ForwardRef)';\n    } else if (type === ElementTypeMemo) {\n      maybeBadge = ' (Memo)';\n    }\n\n    const label = `${maybeForgetBadge}${name}${maybeBadge}${maybeKey} (${formatDuration(\n      selfDuration,\n    )}ms)`;\n    chartNodes.push({\n      id,\n      label,\n      name,\n      value: selfDuration,\n    });\n  });\n\n  const chartData = {\n    maxValue: maxSelfDuration,\n    nodes: chartNodes.sort((a, b) => b.value - a.value),\n  };\n\n  cachedChartData.set(chartDataKey, chartData);\n\n  return chartData;\n}\n\nexport function invalidateChartData(): void {\n  cachedChartData.clear();\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport ProfilerStore from './ProfilerStore';\nimport {\n  getCommitTree,\n  invalidateCommitTrees,\n} from 'react-devtools-shared/src/devtools/views/Profiler/CommitTreeBuilder';\nimport {\n  getChartData as getFlamegraphChartData,\n  invalidateChartData as invalidateFlamegraphChartData,\n} from 'react-devtools-shared/src/devtools/views/Profiler/FlamegraphChartBuilder';\nimport {\n  getChartData as getRankedChartData,\n  invalidateChartData as invalidateRankedChartData,\n} from 'react-devtools-shared/src/devtools/views/Profiler/RankedChartBuilder';\n\nimport type {CommitTree} from 'react-devtools-shared/src/devtools/views/Profiler/types';\nimport type {ChartData as FlamegraphChartData} from 'react-devtools-shared/src/devtools/views/Profiler/FlamegraphChartBuilder';\nimport type {ChartData as RankedChartData} from 'react-devtools-shared/src/devtools/views/Profiler/RankedChartBuilder';\n\nexport default class ProfilingCache {\n  _fiberCommits: Map<number, Array<number>> = new Map();\n  _profilerStore: ProfilerStore;\n\n  constructor(profilerStore: ProfilerStore) {\n    this._profilerStore = profilerStore;\n  }\n\n  getCommitTree: ({commitIndex: number, rootID: number}) => CommitTree = ({\n    commitIndex,\n    rootID,\n  }) =>\n    getCommitTree({\n      commitIndex,\n      profilerStore: this._profilerStore,\n      rootID,\n    });\n\n  getFiberCommits: ({fiberID: number, rootID: number}) => Array<number> = ({\n    fiberID,\n    rootID,\n  }) => {\n    const cachedFiberCommits = this._fiberCommits.get(fiberID);\n    if (cachedFiberCommits != null) {\n      return cachedFiberCommits;\n    }\n\n    const fiberCommits = [];\n    const dataForRoot = this._profilerStore.getDataForRoot(rootID);\n    dataForRoot.commitData.forEach((commitDatum, commitIndex) => {\n      if (commitDatum.fiberActualDurations.has(fiberID)) {\n        fiberCommits.push(commitIndex);\n      }\n    });\n\n    this._fiberCommits.set(fiberID, fiberCommits);\n\n    return fiberCommits;\n  };\n\n  getFlamegraphChartData: ({\n    commitIndex: number,\n    commitTree: CommitTree,\n    rootID: number,\n  }) => FlamegraphChartData = ({commitIndex, commitTree, rootID}) =>\n    getFlamegraphChartData({\n      commitIndex,\n      commitTree,\n      profilerStore: this._profilerStore,\n      rootID,\n    });\n\n  getRankedChartData: ({\n    commitIndex: number,\n    commitTree: CommitTree,\n    rootID: number,\n  }) => RankedChartData = ({commitIndex, commitTree, rootID}) =>\n    getRankedChartData({\n      commitIndex,\n      commitTree,\n      profilerStore: this._profilerStore,\n      rootID,\n    });\n\n  invalidate() {\n    this._fiberCommits.clear();\n\n    invalidateCommitTrees();\n    invalidateFlamegraphChartData();\n    invalidateRankedChartData();\n  }\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n */\n\nimport {enableLogger} from 'react-devtools-feature-flags';\n\nexport type LoggerEvent =\n  | {\n      +event_name: 'loaded-dev-tools',\n    }\n  | {\n      +event_name: 'error',\n      +error_message: string | null,\n      +error_stack: string | null,\n      +error_component_stack: string | null,\n    }\n  | {\n      +event_name: 'selected-components-tab',\n    }\n  | {\n      +event_name: 'selected-profiler-tab',\n    }\n  | {\n      +event_name: 'load-hook-names',\n      +event_status: 'success' | 'error' | 'timeout' | 'unknown',\n      +duration_ms: number,\n      +inspected_element_display_name: string | null,\n      +inspected_element_number_of_hooks: number | null,\n    }\n  | {\n      +event_name: 'select-element',\n      +metadata: {\n        +source: string,\n      },\n    }\n  | {\n      +event_name: 'inspect-element-button-clicked',\n    }\n  | {\n      +event_name: 'profiling-start',\n      +metadata: {\n        +current_tab: string,\n      },\n    }\n  | {\n      +event_name: 'profiler-tab-changed',\n      +metadata: {\n        +tabId: string,\n      },\n    }\n  | {\n      +event_name: 'settings-changed',\n      +metadata: {\n        +key: string,\n        +value: any,\n        ...\n      },\n    };\n\nexport type LogFunction = LoggerEvent => void | Promise<void>;\n\nlet logFunctions: Array<LogFunction> = [];\nexport const logEvent: LogFunction =\n  enableLogger === true\n    ? function logEvent(event: LoggerEvent): void {\n        logFunctions.forEach(log => {\n          log(event);\n        });\n      }\n    : function logEvent() {};\n\nexport const registerEventLogger: (logFunction: LogFunction) => () => void =\n  enableLogger === true\n    ? function registerEventLogger(logFunction: LogFunction): () => void {\n        if (enableLogger) {\n          logFunctions.push(logFunction);\n          return function unregisterEventLogger() {\n            logFunctions = logFunctions.filter(log => log !== logFunction);\n          };\n        }\n        return () => {};\n      }\n    : function registerEventLogger(logFunction: LogFunction) {\n        return () => {};\n      };\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport EventEmitter from '../events';\nimport {prepareProfilingDataFrontendFromBackendAndStore} from './views/Profiler/utils';\nimport ProfilingCache from './ProfilingCache';\nimport Store from './store';\nimport {logEvent} from 'react-devtools-shared/src/Logger';\n\nimport type {FrontendBridge} from 'react-devtools-shared/src/bridge';\nimport type {ProfilingDataBackend} from 'react-devtools-shared/src/backend/types';\nimport type {\n  CommitDataFrontend,\n  ProfilingDataForRootFrontend,\n  ProfilingDataFrontend,\n  SnapshotNode,\n} from './views/Profiler/types';\n\nexport default class ProfilerStore extends EventEmitter<{\n  isProcessingData: [],\n  isProfiling: [],\n  profilingData: [],\n}> {\n  _bridge: FrontendBridge;\n\n  // Suspense cache for lazily calculating derived profiling data.\n  _cache: ProfilingCache;\n\n  // Temporary store of profiling data from the backend renderer(s).\n  // This data will be converted to the ProfilingDataFrontend format after being collected from all renderers.\n  _dataBackends: Array<ProfilingDataBackend> = [];\n\n  // Data from the most recently completed profiling session,\n  // or data that has been imported from a previously exported session.\n  // This object contains all necessary data to drive the Profiler UI interface,\n  // even though some of it is lazily parsed/derived via the ProfilingCache.\n  _dataFrontend: ProfilingDataFrontend | null = null;\n\n  // Snapshot of all attached renderer IDs.\n  // Once profiling is finished, this snapshot will be used to query renderers for profiling data.\n  //\n  // This map is initialized when profiling starts and updated when a new root is added while profiling;\n  // Upon completion, it is converted into the exportable ProfilingDataFrontend format.\n  _initialRendererIDs: Set<number> = new Set();\n\n  // Snapshot of the state of the main Store (including all roots) when profiling started.\n  // Once profiling is finished, this snapshot can be used along with \"operations\" messages emitted during profiling,\n  // to reconstruct the state of each root for each commit.\n  // It's okay to use a single root to store this information because node IDs are unique across all roots.\n  //\n  // This map is initialized when profiling starts and updated when a new root is added while profiling;\n  // Upon completion, it is converted into the exportable ProfilingDataFrontend format.\n  _initialSnapshotsByRootID: Map<number, Map<number, SnapshotNode>> = new Map();\n\n  // Map of root (id) to a list of tree mutation that occur during profiling.\n  // Once profiling is finished, these mutations can be used, along with the initial tree snapshots,\n  // to reconstruct the state of each root for each commit.\n  //\n  // This map is only updated while profiling is in progress;\n  // Upon completion, it is converted into the exportable ProfilingDataFrontend format.\n  _inProgressOperationsByRootID: Map<number, Array<Array<number>>> = new Map();\n\n  // The backend is currently profiling.\n  // When profiling is in progress, operations are stored so that we can later reconstruct past commit trees.\n  _isBackendProfiling: boolean = false;\n\n  // Mainly used for optimistic UI.\n  // This could be false, but at the same time _isBackendProfiling could be true\n  // for cases when Backend is busy serializing a chunky payload.\n  _isProfilingBasedOnUserInput: boolean = false;\n\n  // Tracks whether a specific renderer logged any profiling data during the most recent session.\n  _rendererIDsThatReportedProfilingData: Set<number> = new Set();\n\n  // After profiling, data is requested from each attached renderer using this queue.\n  // So long as this queue is not empty, the store is retrieving and processing profiling data from the backend.\n  _rendererQueue: Set<number> = new Set();\n\n  _store: Store;\n\n  constructor(\n    bridge: FrontendBridge,\n    store: Store,\n    defaultIsProfiling: boolean,\n  ) {\n    super();\n\n    this._bridge = bridge;\n    this._isBackendProfiling = defaultIsProfiling;\n    this._isProfilingBasedOnUserInput = defaultIsProfiling;\n    this._store = store;\n\n    bridge.addListener('operations', this.onBridgeOperations);\n    bridge.addListener('profilingData', this.onBridgeProfilingData);\n    bridge.addListener('profilingStatus', this.onProfilingStatus);\n    bridge.addListener('shutdown', this.onBridgeShutdown);\n\n    // It's possible that profiling has already started (e.g. \"reload and start profiling\")\n    // so the frontend needs to ask the backend for its status after mounting.\n    bridge.send('getProfilingStatus');\n\n    this._cache = new ProfilingCache(this);\n  }\n\n  getCommitData(rootID: number, commitIndex: number): CommitDataFrontend {\n    if (this._dataFrontend !== null) {\n      const dataForRoot = this._dataFrontend.dataForRoots.get(rootID);\n      if (dataForRoot != null) {\n        const commitDatum = dataForRoot.commitData[commitIndex];\n        if (commitDatum != null) {\n          return commitDatum;\n        }\n      }\n    }\n\n    throw Error(\n      `Could not find commit data for root \"${rootID}\" and commit \"${commitIndex}\"`,\n    );\n  }\n\n  getDataForRoot(rootID: number): ProfilingDataForRootFrontend {\n    if (this._dataFrontend !== null) {\n      const dataForRoot = this._dataFrontend.dataForRoots.get(rootID);\n      if (dataForRoot != null) {\n        return dataForRoot;\n      }\n    }\n\n    throw Error(`Could not find commit data for root \"${rootID}\"`);\n  }\n\n  // Profiling data has been recorded for at least one root.\n  get didRecordCommits(): boolean {\n    return (\n      this._dataFrontend !== null && this._dataFrontend.dataForRoots.size > 0\n    );\n  }\n\n  get isProcessingData(): boolean {\n    return this._rendererQueue.size > 0 || this._dataBackends.length > 0;\n  }\n\n  get isProfilingBasedOnUserInput(): boolean {\n    return this._isProfilingBasedOnUserInput;\n  }\n\n  get profilingCache(): ProfilingCache {\n    return this._cache;\n  }\n\n  get profilingData(): ProfilingDataFrontend | null {\n    return this._dataFrontend;\n  }\n  set profilingData(value: ProfilingDataFrontend | null): void {\n    if (this._isBackendProfiling) {\n      console.warn(\n        'Profiling data cannot be updated while profiling is in progress.',\n      );\n      return;\n    }\n\n    this._dataBackends.splice(0);\n    this._dataFrontend = value;\n    this._initialRendererIDs.clear();\n    this._initialSnapshotsByRootID.clear();\n    this._inProgressOperationsByRootID.clear();\n    this._cache.invalidate();\n\n    this.emit('profilingData');\n  }\n\n  clear(): void {\n    this._dataBackends.splice(0);\n    this._dataFrontend = null;\n    this._initialRendererIDs.clear();\n    this._initialSnapshotsByRootID.clear();\n    this._inProgressOperationsByRootID.clear();\n    this._rendererQueue.clear();\n\n    // Invalidate suspense cache if profiling data is being (re-)recorded.\n    // Note that we clear now because any existing data is \"stale\".\n    this._cache.invalidate();\n\n    this.emit('profilingData');\n  }\n\n  startProfiling(): void {\n    this._bridge.send('startProfiling', {\n      recordChangeDescriptions: this._store.recordChangeDescriptions,\n      recordTimeline: this._store.supportsTimeline,\n    });\n\n    this._isProfilingBasedOnUserInput = true;\n    this.emit('isProfiling');\n\n    // Don't actually update the local profiling boolean yet!\n    // Wait for onProfilingStatus() to confirm the status has changed.\n    // This ensures the frontend and backend are in sync wrt which commits were profiled.\n    // We do this to avoid mismatches on e.g. CommitTreeBuilder that would cause errors.\n  }\n\n  stopProfiling(): void {\n    this._bridge.send('stopProfiling');\n\n    // Backend might be busy serializing the payload, so we are going to display\n    // optimistic UI to the user that profiling is stopping.\n    this._isProfilingBasedOnUserInput = false;\n    this.emit('isProfiling');\n\n    // Wait for onProfilingStatus() to confirm the status has changed, this will update _isBackendProfiling.\n    // This ensures the frontend and backend are in sync wrt which commits were profiled.\n    // We do this to avoid mismatches on e.g. CommitTreeBuilder that would cause errors.\n  }\n\n  _takeProfilingSnapshotRecursive: (\n    elementID: number,\n    profilingSnapshots: Map<number, SnapshotNode>,\n  ) => void = (elementID, profilingSnapshots) => {\n    const element = this._store.getElementByID(elementID);\n    if (element !== null) {\n      const snapshotNode: SnapshotNode = {\n        id: elementID,\n        children: element.children.slice(0),\n        displayName: element.displayName,\n        hocDisplayNames: element.hocDisplayNames,\n        key: element.key,\n        type: element.type,\n        compiledWithForget: element.compiledWithForget,\n      };\n      profilingSnapshots.set(elementID, snapshotNode);\n\n      element.children.forEach(childID =>\n        this._takeProfilingSnapshotRecursive(childID, profilingSnapshots),\n      );\n    }\n  };\n\n  onBridgeOperations: (operations: Array<number>) => void = operations => {\n    // The first two values are always rendererID and rootID\n    const rendererID = operations[0];\n    const rootID = operations[1];\n\n    if (this._isBackendProfiling) {\n      let profilingOperations = this._inProgressOperationsByRootID.get(rootID);\n      if (profilingOperations == null) {\n        profilingOperations = [operations];\n        this._inProgressOperationsByRootID.set(rootID, profilingOperations);\n      } else {\n        profilingOperations.push(operations);\n      }\n\n      if (!this._initialRendererIDs.has(rendererID)) {\n        this._initialRendererIDs.add(rendererID);\n      }\n\n      if (!this._initialSnapshotsByRootID.has(rootID)) {\n        this._initialSnapshotsByRootID.set(rootID, new Map());\n      }\n\n      this._rendererIDsThatReportedProfilingData.add(rendererID);\n    }\n  };\n\n  onBridgeProfilingData: (dataBackend: ProfilingDataBackend) => void =\n    dataBackend => {\n      if (this._isBackendProfiling) {\n        // This should never happen, but if it does, then ignore previous profiling data.\n        return;\n      }\n\n      const {rendererID} = dataBackend;\n\n      if (!this._rendererQueue.has(rendererID)) {\n        throw Error(\n          `Unexpected profiling data update from renderer \"${rendererID}\"`,\n        );\n      }\n\n      this._dataBackends.push(dataBackend);\n      this._rendererQueue.delete(rendererID);\n\n      if (this._rendererQueue.size === 0) {\n        this._dataFrontend = prepareProfilingDataFrontendFromBackendAndStore(\n          this._dataBackends,\n          this._inProgressOperationsByRootID,\n          this._initialSnapshotsByRootID,\n        );\n\n        this._dataBackends.splice(0);\n\n        this.emit('isProcessingData');\n      }\n    };\n\n  onBridgeShutdown: () => void = () => {\n    this._bridge.removeListener('operations', this.onBridgeOperations);\n    this._bridge.removeListener('profilingData', this.onBridgeProfilingData);\n    this._bridge.removeListener('profilingStatus', this.onProfilingStatus);\n    this._bridge.removeListener('shutdown', this.onBridgeShutdown);\n  };\n\n  onProfilingStatus: (isProfiling: boolean) => void = isProfiling => {\n    if (this._isBackendProfiling === isProfiling) {\n      return;\n    }\n\n    if (isProfiling) {\n      this._dataBackends.splice(0);\n      this._dataFrontend = null;\n      this._initialRendererIDs.clear();\n      this._initialSnapshotsByRootID.clear();\n      this._inProgressOperationsByRootID.clear();\n      this._rendererIDsThatReportedProfilingData.clear();\n      this._rendererQueue.clear();\n\n      // Record all renderer IDs initially too (in case of unmount)\n      // eslint-disable-next-line no-for-of-loops/no-for-of-loops\n      for (const rendererID of this._store.rootIDToRendererID.values()) {\n        if (!this._initialRendererIDs.has(rendererID)) {\n          this._initialRendererIDs.add(rendererID);\n        }\n      }\n\n      // Record snapshot of tree at the time profiling is started.\n      // This info is required to handle cases of e.g. nodes being removed during profiling.\n      this._store.roots.forEach(rootID => {\n        const profilingSnapshots = new Map<number, SnapshotNode>();\n        this._initialSnapshotsByRootID.set(rootID, profilingSnapshots);\n        this._takeProfilingSnapshotRecursive(rootID, profilingSnapshots);\n      });\n    }\n\n    this._isBackendProfiling = isProfiling;\n    // _isProfilingBasedOnUserInput should already be updated from startProfiling, stopProfiling, or constructor.\n    if (this._isProfilingBasedOnUserInput !== isProfiling) {\n      logEvent({\n        event_name: 'error',\n        error_message: `Unexpected profiling status. Expected ${this._isProfilingBasedOnUserInput.toString()}, but received ${isProfiling.toString()}.`,\n        error_stack: new Error().stack,\n        error_component_stack: null,\n      });\n\n      // If happened, fallback to displaying the value from Backend\n      this._isProfilingBasedOnUserInput = isProfiling;\n    }\n\n    // Invalidate suspense cache if profiling data is being (re-)recorded.\n    // Note that we clear again, in case any views read from the cache while profiling.\n    // (That would have resolved a now-stale value without any profiling data.)\n    this._cache.invalidate();\n\n    // If we've just finished a profiling session, we need to fetch data stored in each renderer interface\n    // and re-assemble it on the front-end into a format (ProfilingDataFrontend) that can power the Profiler UI.\n    // During this time, DevTools UI should probably not be interactive.\n    if (!isProfiling) {\n      this._dataBackends.splice(0);\n      this._rendererQueue.clear();\n\n      // Only request data from renderers that actually logged it.\n      // This avoids unnecessary bridge requests and also avoids edge case mixed renderer bugs.\n      // (e.g. when v15 and v16 are both present)\n      this._rendererIDsThatReportedProfilingData.forEach(rendererID => {\n        if (!this._rendererQueue.has(rendererID)) {\n          this._rendererQueue.add(rendererID);\n\n          this._bridge.send('getProfilingData', {rendererID});\n        }\n      });\n\n      this.emit('isProcessingData');\n    }\n  };\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nexport default class UnsupportedBridgeOperationError extends Error {\n  constructor(message: string) {\n    super(message);\n\n    // Maintains proper stack trace for where our error was thrown (only available on V8)\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, UnsupportedBridgeOperationError);\n    }\n\n    this.name = 'UnsupportedBridgeOperationError';\n  }\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {copy} from 'clipboard-js';\nimport EventEmitter from '../events';\nimport {inspect} from 'util';\nimport {\n  PROFILING_FLAG_BASIC_SUPPORT,\n  PROFILING_FLAG_TIMELINE_SUPPORT,\n  TREE_OPERATION_ADD,\n  TREE_OPERATION_REMOVE,\n  TREE_OPERATION_REMOVE_ROOT,\n  TREE_OPERATION_REORDER_CHILDREN,\n  TREE_OPERATION_SET_SUBTREE_MODE,\n  TREE_OPERATION_UPDATE_ERRORS_OR_WARNINGS,\n  TREE_OPERATION_UPDATE_TREE_BASE_DURATION,\n} from '../constants';\nimport {ElementTypeRoot} from '../frontend/types';\nimport {\n  getSavedComponentFilters,\n  setSavedComponentFilters,\n  shallowDiffers,\n  utfDecodeStringWithRanges,\n  parseElementDisplayNameFromBackend,\n} from '../utils';\nimport {localStorageGetItem, localStorageSetItem} from '../storage';\nimport {__DEBUG__} from '../constants';\nimport {printStore} from './utils';\nimport ProfilerStore from './ProfilerStore';\nimport {\n  BRIDGE_PROTOCOL,\n  currentBridgeProtocol,\n} from 'react-devtools-shared/src/bridge';\nimport {StrictMode} from 'react-devtools-shared/src/frontend/types';\n\nimport type {\n  Element,\n  ComponentFilter,\n  ElementType,\n} from 'react-devtools-shared/src/frontend/types';\nimport type {\n  FrontendBridge,\n  BridgeProtocol,\n} from 'react-devtools-shared/src/bridge';\nimport UnsupportedBridgeOperationError from 'react-devtools-shared/src/UnsupportedBridgeOperationError';\nimport type {DevToolsHookSettings} from '../backend/types';\n\nconst debug = (methodName: string, ...args: Array<string>) => {\n  if (__DEBUG__) {\n    console.log(\n      `%cStore %c${methodName}`,\n      'color: green; font-weight: bold;',\n      'font-weight: bold;',\n      ...args,\n    );\n  }\n};\n\nconst LOCAL_STORAGE_COLLAPSE_ROOTS_BY_DEFAULT_KEY =\n  'React::DevTools::collapseNodesByDefault';\nconst LOCAL_STORAGE_RECORD_CHANGE_DESCRIPTIONS_KEY =\n  'React::DevTools::recordChangeDescriptions';\n\ntype ErrorAndWarningTuples = Array<{id: number, index: number}>;\n\nexport type Config = {\n  checkBridgeProtocolCompatibility?: boolean,\n  isProfiling?: boolean,\n  supportsInspectMatchingDOMElement?: boolean,\n  supportsClickToInspect?: boolean,\n  supportsReloadAndProfile?: boolean,\n  supportsTimeline?: boolean,\n  supportsTraceUpdates?: boolean,\n};\n\nexport type Capabilities = {\n  supportsBasicProfiling: boolean,\n  hasOwnerMetadata: boolean,\n  supportsStrictMode: boolean,\n  supportsTimeline: boolean,\n};\n\n/**\n * The store is the single source of truth for updates from the backend.\n * ContextProviders can subscribe to the Store for specific things they want to provide.\n */\nexport default class Store extends EventEmitter<{\n  backendVersion: [],\n  collapseNodesByDefault: [],\n  componentFilters: [],\n  error: [Error],\n  hookSettings: [$ReadOnly<DevToolsHookSettings>],\n  settingsUpdated: [$ReadOnly<DevToolsHookSettings>],\n  mutated: [[Array<number>, Map<number, number>]],\n  recordChangeDescriptions: [],\n  roots: [],\n  rootSupportsBasicProfiling: [],\n  rootSupportsTimelineProfiling: [],\n  supportsNativeStyleEditor: [],\n  supportsReloadAndProfile: [],\n  unsupportedBridgeProtocolDetected: [],\n  unsupportedRendererVersionDetected: [],\n}> {\n  // If the backend version is new enough to report its (NPM) version, this is it.\n  // This version may be displayed by the frontend for debugging purposes.\n  _backendVersion: string | null = null;\n\n  _bridge: FrontendBridge;\n\n  // Computed whenever _errorsAndWarnings Map changes.\n  _cachedComponentWithErrorCount: number = 0;\n  _cachedComponentWithWarningCount: number = 0;\n  _cachedErrorAndWarningTuples: ErrorAndWarningTuples | null = null;\n\n  // Should new nodes be collapsed by default when added to the tree?\n  _collapseNodesByDefault: boolean = true;\n\n  _componentFilters: Array<ComponentFilter>;\n\n  // Map of ID to number of recorded error and warning message IDs.\n  _errorsAndWarnings: Map<number, {errorCount: number, warningCount: number}> =\n    new Map();\n\n  // At least one of the injected renderers contains (DEV only) owner metadata.\n  _hasOwnerMetadata: boolean = false;\n\n  // Map of ID to (mutable) Element.\n  // Elements are mutated to avoid excessive cloning during tree updates.\n  // The InspectedElement Suspense cache also relies on this mutability for its WeakMap usage.\n  _idToElement: Map<number, Element> = new Map();\n\n  // Should the React Native style editor panel be shown?\n  _isNativeStyleEditorSupported: boolean = false;\n\n  _nativeStyleEditorValidAttributes: $ReadOnlyArray<string> | null = null;\n\n  // Older backends don't support an explicit bridge protocol,\n  // so we should timeout eventually and show a downgrade message.\n  _onBridgeProtocolTimeoutID: TimeoutID | null = null;\n\n  // Map of element (id) to the set of elements (ids) it owns.\n  // This map enables getOwnersListForElement() to avoid traversing the entire tree.\n  _ownersMap: Map<number, Set<number>> = new Map();\n\n  _profilerStore: ProfilerStore;\n\n  _recordChangeDescriptions: boolean = false;\n\n  // Incremented each time the store is mutated.\n  // This enables a passive effect to detect a mutation between render and commit phase.\n  _revision: number = 0;\n\n  // This Array must be treated as immutable!\n  // Passive effects will check it for changes between render and mount.\n  _roots: $ReadOnlyArray<number> = [];\n\n  _rootIDToCapabilities: Map<number, Capabilities> = new Map();\n\n  // Renderer ID is needed to support inspection fiber props, state, and hooks.\n  _rootIDToRendererID: Map<number, number> = new Map();\n\n  // These options may be initially set by a configuration option when constructing the Store.\n  _supportsInspectMatchingDOMElement: boolean = false;\n  _supportsClickToInspect: boolean = false;\n  _supportsTimeline: boolean = false;\n  _supportsTraceUpdates: boolean = false;\n\n  _isReloadAndProfileFrontendSupported: boolean = false;\n  _isReloadAndProfileBackendSupported: boolean = false;\n\n  // These options default to false but may be updated as roots are added and removed.\n  _rootSupportsBasicProfiling: boolean = false;\n  _rootSupportsTimelineProfiling: boolean = false;\n\n  _bridgeProtocol: BridgeProtocol | null = null;\n  _unsupportedBridgeProtocolDetected: boolean = false;\n  _unsupportedRendererVersionDetected: boolean = false;\n\n  // Total number of visible elements (within all roots).\n  // Used for windowing purposes.\n  _weightAcrossRoots: number = 0;\n\n  _shouldCheckBridgeProtocolCompatibility: boolean = false;\n  _hookSettings: $ReadOnly<DevToolsHookSettings> | null = null;\n  _shouldShowWarningsAndErrors: boolean = false;\n\n  constructor(bridge: FrontendBridge, config?: Config) {\n    super();\n\n    if (__DEBUG__) {\n      debug('constructor', 'subscribing to Bridge');\n    }\n\n    this._collapseNodesByDefault =\n      localStorageGetItem(LOCAL_STORAGE_COLLAPSE_ROOTS_BY_DEFAULT_KEY) ===\n      'true';\n\n    this._recordChangeDescriptions =\n      localStorageGetItem(LOCAL_STORAGE_RECORD_CHANGE_DESCRIPTIONS_KEY) ===\n      'true';\n\n    this._componentFilters = getSavedComponentFilters();\n\n    let isProfiling = false;\n    if (config != null) {\n      isProfiling = config.isProfiling === true;\n\n      const {\n        supportsInspectMatchingDOMElement,\n        supportsClickToInspect,\n        supportsReloadAndProfile,\n        supportsTimeline,\n        supportsTraceUpdates,\n        checkBridgeProtocolCompatibility,\n      } = config;\n      if (supportsInspectMatchingDOMElement) {\n        this._supportsInspectMatchingDOMElement = true;\n      }\n      if (supportsClickToInspect) {\n        this._supportsClickToInspect = true;\n      }\n      if (supportsReloadAndProfile) {\n        this._isReloadAndProfileFrontendSupported = true;\n      }\n      if (supportsTimeline) {\n        this._supportsTimeline = true;\n      }\n      if (supportsTraceUpdates) {\n        this._supportsTraceUpdates = true;\n      }\n      if (checkBridgeProtocolCompatibility) {\n        this._shouldCheckBridgeProtocolCompatibility = true;\n      }\n    }\n\n    this._bridge = bridge;\n    bridge.addListener('operations', this.onBridgeOperations);\n    bridge.addListener(\n      'overrideComponentFilters',\n      this.onBridgeOverrideComponentFilters,\n    );\n    bridge.addListener('shutdown', this.onBridgeShutdown);\n    bridge.addListener(\n      'isReloadAndProfileSupportedByBackend',\n      this.onBackendReloadAndProfileSupported,\n    );\n    bridge.addListener(\n      'isNativeStyleEditorSupported',\n      this.onBridgeNativeStyleEditorSupported,\n    );\n    bridge.addListener(\n      'unsupportedRendererVersion',\n      this.onBridgeUnsupportedRendererVersion,\n    );\n\n    this._profilerStore = new ProfilerStore(bridge, this, isProfiling);\n\n    bridge.addListener('backendVersion', this.onBridgeBackendVersion);\n    bridge.addListener('saveToClipboard', this.onSaveToClipboard);\n    bridge.addListener('hookSettings', this.onHookSettings);\n    bridge.addListener('backendInitialized', this.onBackendInitialized);\n  }\n\n  // This is only used in tests to avoid memory leaks.\n  assertExpectedRootMapSizes() {\n    if (this.roots.length === 0) {\n      // The only safe time to assert these maps are empty is when the store is empty.\n      this.assertMapSizeMatchesRootCount(this._idToElement, '_idToElement');\n      this.assertMapSizeMatchesRootCount(this._ownersMap, '_ownersMap');\n    }\n\n    // These maps should always be the same size as the number of roots\n    this.assertMapSizeMatchesRootCount(\n      this._rootIDToCapabilities,\n      '_rootIDToCapabilities',\n    );\n    this.assertMapSizeMatchesRootCount(\n      this._rootIDToRendererID,\n      '_rootIDToRendererID',\n    );\n  }\n\n  // This is only used in tests to avoid memory leaks.\n  assertMapSizeMatchesRootCount(map: Map<any, any>, mapName: string) {\n    const expectedSize = this.roots.length;\n    if (map.size !== expectedSize) {\n      this._throwAndEmitError(\n        Error(\n          `Expected ${mapName} to contain ${expectedSize} items, but it contains ${\n            map.size\n          } items\\n\\n${inspect(map, {\n            depth: 20,\n          })}`,\n        ),\n      );\n    }\n  }\n\n  get backendVersion(): string | null {\n    return this._backendVersion;\n  }\n\n  get collapseNodesByDefault(): boolean {\n    return this._collapseNodesByDefault;\n  }\n  set collapseNodesByDefault(value: boolean): void {\n    this._collapseNodesByDefault = value;\n\n    localStorageSetItem(\n      LOCAL_STORAGE_COLLAPSE_ROOTS_BY_DEFAULT_KEY,\n      value ? 'true' : 'false',\n    );\n\n    this.emit('collapseNodesByDefault');\n  }\n\n  get componentFilters(): Array<ComponentFilter> {\n    return this._componentFilters;\n  }\n  set componentFilters(value: Array<ComponentFilter>): void {\n    if (this._profilerStore.isProfilingBasedOnUserInput) {\n      // Re-mounting a tree while profiling is in progress might break a lot of assumptions.\n      // If necessary, we could support this- but it doesn't seem like a necessary use case.\n      this._throwAndEmitError(\n        Error('Cannot modify filter preferences while profiling'),\n      );\n    }\n\n    // Filter updates are expensive to apply (since they impact the entire tree).\n    // Let's determine if they've changed and avoid doing this work if they haven't.\n    const prevEnabledComponentFilters = this._componentFilters.filter(\n      filter => filter.isEnabled,\n    );\n    const nextEnabledComponentFilters = value.filter(\n      filter => filter.isEnabled,\n    );\n    let haveEnabledFiltersChanged =\n      prevEnabledComponentFilters.length !== nextEnabledComponentFilters.length;\n    if (!haveEnabledFiltersChanged) {\n      for (let i = 0; i < nextEnabledComponentFilters.length; i++) {\n        const prevFilter = prevEnabledComponentFilters[i];\n        const nextFilter = nextEnabledComponentFilters[i];\n        if (shallowDiffers(prevFilter, nextFilter)) {\n          haveEnabledFiltersChanged = true;\n          break;\n        }\n      }\n    }\n\n    this._componentFilters = value;\n\n    // Update persisted filter preferences stored in localStorage.\n    setSavedComponentFilters(value);\n\n    // Notify the renderer that filter preferences have changed.\n    // This is an expensive operation; it unmounts and remounts the entire tree,\n    // so only do it if the set of enabled component filters has changed.\n    if (haveEnabledFiltersChanged) {\n      this._bridge.send('updateComponentFilters', value);\n    }\n\n    this.emit('componentFilters');\n  }\n\n  get bridgeProtocol(): BridgeProtocol | null {\n    return this._bridgeProtocol;\n  }\n\n  get componentWithErrorCount(): number {\n    if (!this._shouldShowWarningsAndErrors) {\n      return 0;\n    }\n\n    return this._cachedComponentWithErrorCount;\n  }\n\n  get componentWithWarningCount(): number {\n    if (!this._shouldShowWarningsAndErrors) {\n      return 0;\n    }\n\n    return this._cachedComponentWithWarningCount;\n  }\n\n  get displayingErrorsAndWarningsEnabled(): boolean {\n    return this._shouldShowWarningsAndErrors;\n  }\n\n  get hasOwnerMetadata(): boolean {\n    return this._hasOwnerMetadata;\n  }\n\n  get nativeStyleEditorValidAttributes(): $ReadOnlyArray<string> | null {\n    return this._nativeStyleEditorValidAttributes;\n  }\n\n  get numElements(): number {\n    return this._weightAcrossRoots;\n  }\n\n  get profilerStore(): ProfilerStore {\n    return this._profilerStore;\n  }\n\n  get recordChangeDescriptions(): boolean {\n    return this._recordChangeDescriptions;\n  }\n  set recordChangeDescriptions(value: boolean): void {\n    this._recordChangeDescriptions = value;\n\n    localStorageSetItem(\n      LOCAL_STORAGE_RECORD_CHANGE_DESCRIPTIONS_KEY,\n      value ? 'true' : 'false',\n    );\n\n    this.emit('recordChangeDescriptions');\n  }\n\n  get revision(): number {\n    return this._revision;\n  }\n\n  get rootIDToRendererID(): Map<number, number> {\n    return this._rootIDToRendererID;\n  }\n\n  get roots(): $ReadOnlyArray<number> {\n    return this._roots;\n  }\n\n  // At least one of the currently mounted roots support the Legacy profiler.\n  get rootSupportsBasicProfiling(): boolean {\n    return this._rootSupportsBasicProfiling;\n  }\n\n  // At least one of the currently mounted roots support the Timeline profiler.\n  get rootSupportsTimelineProfiling(): boolean {\n    return this._rootSupportsTimelineProfiling;\n  }\n\n  get supportsInspectMatchingDOMElement(): boolean {\n    return this._supportsInspectMatchingDOMElement;\n  }\n\n  get supportsClickToInspect(): boolean {\n    return this._supportsClickToInspect;\n  }\n\n  get supportsNativeStyleEditor(): boolean {\n    return this._isNativeStyleEditorSupported;\n  }\n\n  get supportsReloadAndProfile(): boolean {\n    return (\n      this._isReloadAndProfileFrontendSupported &&\n      this._isReloadAndProfileBackendSupported\n    );\n  }\n\n  // This build of DevTools supports the Timeline profiler.\n  // This is a static flag, controlled by the Store config.\n  get supportsTimeline(): boolean {\n    return this._supportsTimeline;\n  }\n\n  get supportsTraceUpdates(): boolean {\n    return this._supportsTraceUpdates;\n  }\n\n  get unsupportedBridgeProtocolDetected(): boolean {\n    return this._unsupportedBridgeProtocolDetected;\n  }\n\n  get unsupportedRendererVersionDetected(): boolean {\n    return this._unsupportedRendererVersionDetected;\n  }\n\n  containsElement(id: number): boolean {\n    return this._idToElement.has(id);\n  }\n\n  getElementAtIndex(index: number): Element | null {\n    if (index < 0 || index >= this.numElements) {\n      console.warn(\n        `Invalid index ${index} specified; store contains ${this.numElements} items.`,\n      );\n\n      return null;\n    }\n\n    // Find which root this element is in...\n    let root;\n    let rootWeight = 0;\n    for (let i = 0; i < this._roots.length; i++) {\n      const rootID = this._roots[i];\n      root = this._idToElement.get(rootID);\n\n      if (root === undefined) {\n        this._throwAndEmitError(\n          Error(\n            `Couldn't find root with id \"${rootID}\": no matching node was found in the Store.`,\n          ),\n        );\n\n        return null;\n      }\n\n      if (root.children.length === 0) {\n        continue;\n      }\n\n      if (rootWeight + root.weight > index) {\n        break;\n      } else {\n        rootWeight += root.weight;\n      }\n    }\n\n    if (root === undefined) {\n      return null;\n    }\n\n    // Find the element in the tree using the weight of each node...\n    // Skip over the root itself, because roots aren't visible in the Elements tree.\n    let currentElement: Element = root;\n    let currentWeight = rootWeight - 1;\n\n    while (index !== currentWeight) {\n      const numChildren = currentElement.children.length;\n      for (let i = 0; i < numChildren; i++) {\n        const childID = currentElement.children[i];\n        const child = this._idToElement.get(childID);\n\n        if (child === undefined) {\n          this._throwAndEmitError(\n            Error(\n              `Couldn't child element with id \"${childID}\": no matching node was found in the Store.`,\n            ),\n          );\n\n          return null;\n        }\n\n        const childWeight = child.isCollapsed ? 1 : child.weight;\n\n        if (index <= currentWeight + childWeight) {\n          currentWeight++;\n          currentElement = child;\n          break;\n        } else {\n          currentWeight += childWeight;\n        }\n      }\n    }\n\n    return currentElement || null;\n  }\n\n  getElementIDAtIndex(index: number): number | null {\n    const element = this.getElementAtIndex(index);\n    return element === null ? null : element.id;\n  }\n\n  getElementByID(id: number): Element | null {\n    const element = this._idToElement.get(id);\n    if (element === undefined) {\n      console.warn(`No element found with id \"${id}\"`);\n      return null;\n    }\n\n    return element;\n  }\n\n  // Returns a tuple of [id, index]\n  getElementsWithErrorsAndWarnings(): ErrorAndWarningTuples {\n    if (!this._shouldShowWarningsAndErrors) {\n      return [];\n    }\n\n    if (this._cachedErrorAndWarningTuples !== null) {\n      return this._cachedErrorAndWarningTuples;\n    }\n\n    const errorAndWarningTuples: ErrorAndWarningTuples = [];\n\n    this._errorsAndWarnings.forEach((_, id) => {\n      const index = this.getIndexOfElementID(id);\n      if (index !== null) {\n        let low = 0;\n        let high = errorAndWarningTuples.length;\n        while (low < high) {\n          const mid = (low + high) >> 1;\n          if (errorAndWarningTuples[mid].index > index) {\n            high = mid;\n          } else {\n            low = mid + 1;\n          }\n        }\n\n        errorAndWarningTuples.splice(low, 0, {id, index});\n      }\n    });\n\n    // Cache for later (at least until the tree changes again).\n    this._cachedErrorAndWarningTuples = errorAndWarningTuples;\n    return errorAndWarningTuples;\n  }\n\n  getErrorAndWarningCountForElementID(id: number): {\n    errorCount: number,\n    warningCount: number,\n  } {\n    if (!this._shouldShowWarningsAndErrors) {\n      return {errorCount: 0, warningCount: 0};\n    }\n\n    return this._errorsAndWarnings.get(id) || {errorCount: 0, warningCount: 0};\n  }\n\n  getIndexOfElementID(id: number): number | null {\n    const element = this.getElementByID(id);\n\n    if (element === null || element.parentID === 0) {\n      return null;\n    }\n\n    // Walk up the tree to the root.\n    // Increment the index by one for each node we encounter,\n    // and by the weight of all nodes to the left of the current one.\n    // This should be a relatively fast way of determining the index of a node within the tree.\n    let previousID = id;\n    let currentID = element.parentID;\n    let index = 0;\n    while (true) {\n      const current = this._idToElement.get(currentID);\n      if (current === undefined) {\n        return null;\n      }\n\n      const {children} = current;\n      for (let i = 0; i < children.length; i++) {\n        const childID = children[i];\n        if (childID === previousID) {\n          break;\n        }\n\n        const child = this._idToElement.get(childID);\n        if (child === undefined) {\n          return null;\n        }\n\n        index += child.isCollapsed ? 1 : child.weight;\n      }\n\n      if (current.parentID === 0) {\n        // We found the root; stop crawling.\n        break;\n      }\n\n      index++;\n\n      previousID = current.id;\n      currentID = current.parentID;\n    }\n\n    // At this point, the current ID is a root (from the previous loop).\n    // We also need to offset the index by previous root weights.\n    for (let i = 0; i < this._roots.length; i++) {\n      const rootID = this._roots[i];\n      if (rootID === currentID) {\n        break;\n      }\n\n      const root = this._idToElement.get(rootID);\n      if (root === undefined) {\n        return null;\n      }\n\n      index += root.weight;\n    }\n\n    return index;\n  }\n\n  getOwnersListForElement(ownerID: number): Array<Element> {\n    const list: Array<Element> = [];\n    const element = this._idToElement.get(ownerID);\n    if (element !== undefined) {\n      list.push({\n        ...element,\n        depth: 0,\n      });\n\n      const unsortedIDs = this._ownersMap.get(ownerID);\n      if (unsortedIDs !== undefined) {\n        const depthMap: Map<number, number> = new Map([[ownerID, 0]]);\n\n        // Items in a set are ordered based on insertion.\n        // This does not correlate with their order in the tree.\n        // So first we need to order them.\n        // I wish we could avoid this sorting operation; we could sort at insertion time,\n        // but then we'd have to pay sorting costs even if the owners list was never used.\n        // Seems better to defer the cost, since the set of ids is probably pretty small.\n        const sortedIDs = Array.from(unsortedIDs).sort(\n          (idA, idB) =>\n            (this.getIndexOfElementID(idA) || 0) -\n            (this.getIndexOfElementID(idB) || 0),\n        );\n\n        // Next we need to determine the appropriate depth for each element in the list.\n        // The depth in the list may not correspond to the depth in the tree,\n        // because the list has been filtered to remove intermediate components.\n        // Perhaps the easiest way to do this is to walk up the tree until we reach either:\n        // (1) another node that's already in the tree, or (2) the root (owner)\n        // at which point, our depth is just the depth of that node plus one.\n        sortedIDs.forEach(id => {\n          const innerElement = this._idToElement.get(id);\n          if (innerElement !== undefined) {\n            let parentID = innerElement.parentID;\n\n            let depth = 0;\n            while (parentID > 0) {\n              if (parentID === ownerID || unsortedIDs.has(parentID)) {\n                // $FlowFixMe[unsafe-addition] addition with possible null/undefined value\n                depth = depthMap.get(parentID) + 1;\n                depthMap.set(id, depth);\n                break;\n              }\n              const parent = this._idToElement.get(parentID);\n              if (parent === undefined) {\n                break;\n              }\n              parentID = parent.parentID;\n            }\n\n            if (depth === 0) {\n              this._throwAndEmitError(Error('Invalid owners list'));\n            }\n\n            list.push({...innerElement, depth});\n          }\n        });\n      }\n    }\n\n    return list;\n  }\n\n  getRendererIDForElement(id: number): number | null {\n    let current = this._idToElement.get(id);\n    while (current !== undefined) {\n      if (current.parentID === 0) {\n        const rendererID = this._rootIDToRendererID.get(current.id);\n        return rendererID == null ? null : rendererID;\n      } else {\n        current = this._idToElement.get(current.parentID);\n      }\n    }\n    return null;\n  }\n\n  getRootIDForElement(id: number): number | null {\n    let current = this._idToElement.get(id);\n    while (current !== undefined) {\n      if (current.parentID === 0) {\n        return current.id;\n      } else {\n        current = this._idToElement.get(current.parentID);\n      }\n    }\n    return null;\n  }\n\n  isInsideCollapsedSubTree(id: number): boolean {\n    let current = this._idToElement.get(id);\n    while (current != null) {\n      if (current.parentID === 0) {\n        return false;\n      } else {\n        current = this._idToElement.get(current.parentID);\n        if (current != null && current.isCollapsed) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  // TODO Maybe split this into two methods: expand() and collapse()\n  toggleIsCollapsed(id: number, isCollapsed: boolean): void {\n    let didMutate = false;\n\n    const element = this.getElementByID(id);\n    if (element !== null) {\n      if (isCollapsed) {\n        if (element.type === ElementTypeRoot) {\n          this._throwAndEmitError(Error('Root nodes cannot be collapsed'));\n        }\n\n        if (!element.isCollapsed) {\n          didMutate = true;\n          element.isCollapsed = true;\n\n          const weightDelta = 1 - element.weight;\n\n          let parentElement = this._idToElement.get(element.parentID);\n          while (parentElement !== undefined) {\n            // We don't need to break on a collapsed parent in the same way as the expand case below.\n            // That's because collapsing a node doesn't \"bubble\" and affect its parents.\n            parentElement.weight += weightDelta;\n            parentElement = this._idToElement.get(parentElement.parentID);\n          }\n        }\n      } else {\n        let currentElement: ?Element = element;\n        while (currentElement != null) {\n          const oldWeight = currentElement.isCollapsed\n            ? 1\n            : currentElement.weight;\n\n          if (currentElement.isCollapsed) {\n            didMutate = true;\n            currentElement.isCollapsed = false;\n\n            const newWeight = currentElement.isCollapsed\n              ? 1\n              : currentElement.weight;\n            const weightDelta = newWeight - oldWeight;\n\n            let parentElement = this._idToElement.get(currentElement.parentID);\n            while (parentElement !== undefined) {\n              parentElement.weight += weightDelta;\n              if (parentElement.isCollapsed) {\n                // It's important to break on a collapsed parent when expanding nodes.\n                // That's because expanding a node \"bubbles\" up and expands all parents as well.\n                // Breaking in this case prevents us from over-incrementing the expanded weights.\n                break;\n              }\n              parentElement = this._idToElement.get(parentElement.parentID);\n            }\n          }\n\n          currentElement =\n            currentElement.parentID !== 0\n              ? this.getElementByID(currentElement.parentID)\n              : null;\n        }\n      }\n\n      // Only re-calculate weights and emit an \"update\" event if the store was mutated.\n      if (didMutate) {\n        let weightAcrossRoots = 0;\n        this._roots.forEach(rootID => {\n          const {weight} = ((this.getElementByID(rootID): any): Element);\n          weightAcrossRoots += weight;\n        });\n        this._weightAcrossRoots = weightAcrossRoots;\n\n        // The Tree context's search reducer expects an explicit list of ids for nodes that were added or removed.\n        // In this  case, we can pass it empty arrays since nodes in a collapsed tree are still there (just hidden).\n        // Updating the selected search index later may require auto-expanding a collapsed subtree though.\n        this.emit('mutated', [[], new Map()]);\n      }\n    }\n  }\n\n  _adjustParentTreeWeight: (\n    parentElement: ?Element,\n    weightDelta: number,\n  ) => void = (parentElement, weightDelta) => {\n    let isInsideCollapsedSubTree = false;\n\n    while (parentElement != null) {\n      parentElement.weight += weightDelta;\n\n      // Additions and deletions within a collapsed subtree should not bubble beyond the collapsed parent.\n      // Their weight will bubble up when the parent is expanded.\n      if (parentElement.isCollapsed) {\n        isInsideCollapsedSubTree = true;\n        break;\n      }\n\n      parentElement = this._idToElement.get(parentElement.parentID);\n    }\n\n    // Additions and deletions within a collapsed subtree should not affect the overall number of elements.\n    if (!isInsideCollapsedSubTree) {\n      this._weightAcrossRoots += weightDelta;\n    }\n  };\n\n  _recursivelyUpdateSubtree(\n    id: number,\n    callback: (element: Element) => void,\n  ): void {\n    const element = this._idToElement.get(id);\n    if (element) {\n      callback(element);\n\n      element.children.forEach(child =>\n        this._recursivelyUpdateSubtree(child, callback),\n      );\n    }\n  }\n\n  onBridgeNativeStyleEditorSupported: ({\n    isSupported: boolean,\n    validAttributes: ?$ReadOnlyArray<string>,\n  }) => void = ({isSupported, validAttributes}) => {\n    this._isNativeStyleEditorSupported = isSupported;\n    this._nativeStyleEditorValidAttributes = validAttributes || null;\n\n    this.emit('supportsNativeStyleEditor');\n  };\n\n  onBridgeOperations: (operations: Array<number>) => void = operations => {\n    if (__DEBUG__) {\n      console.groupCollapsed('onBridgeOperations');\n      debug('onBridgeOperations', operations.join(','));\n    }\n\n    let haveRootsChanged = false;\n    let haveErrorsOrWarningsChanged = false;\n\n    // The first two values are always rendererID and rootID\n    const rendererID = operations[0];\n\n    const addedElementIDs: Array<number> = [];\n    // This is a mapping of removed ID -> parent ID:\n    const removedElementIDs: Map<number, number> = new Map();\n    // We'll use the parent ID to adjust selection if it gets deleted.\n\n    let i = 2;\n\n    // Reassemble the string table.\n    const stringTable: Array<string | null> = [\n      null, // ID = 0 corresponds to the null string.\n    ];\n    const stringTableSize = operations[i];\n    i++;\n\n    const stringTableEnd = i + stringTableSize;\n\n    while (i < stringTableEnd) {\n      const nextLength = operations[i];\n      i++;\n\n      const nextString = utfDecodeStringWithRanges(\n        operations,\n        i,\n        i + nextLength - 1,\n      );\n      stringTable.push(nextString);\n      i += nextLength;\n    }\n\n    while (i < operations.length) {\n      const operation = operations[i];\n      switch (operation) {\n        case TREE_OPERATION_ADD: {\n          const id = operations[i + 1];\n          const type = ((operations[i + 2]: any): ElementType);\n\n          i += 3;\n\n          if (this._idToElement.has(id)) {\n            this._throwAndEmitError(\n              Error(\n                `Cannot add node \"${id}\" because a node with that id is already in the Store.`,\n              ),\n            );\n          }\n\n          if (type === ElementTypeRoot) {\n            if (__DEBUG__) {\n              debug('Add', `new root node ${id}`);\n            }\n\n            const isStrictModeCompliant = operations[i] > 0;\n            i++;\n\n            const supportsBasicProfiling =\n              (operations[i] & PROFILING_FLAG_BASIC_SUPPORT) !== 0;\n            const supportsTimeline =\n              (operations[i] & PROFILING_FLAG_TIMELINE_SUPPORT) !== 0;\n            i++;\n\n            let supportsStrictMode = false;\n            let hasOwnerMetadata = false;\n\n            // If we don't know the bridge protocol, guess that we're dealing with the latest.\n            // If we do know it, we can take it into consideration when parsing operations.\n            if (\n              this._bridgeProtocol === null ||\n              this._bridgeProtocol.version >= 2\n            ) {\n              supportsStrictMode = operations[i] > 0;\n              i++;\n\n              hasOwnerMetadata = operations[i] > 0;\n              i++;\n            }\n\n            this._roots = this._roots.concat(id);\n            this._rootIDToRendererID.set(id, rendererID);\n            this._rootIDToCapabilities.set(id, {\n              supportsBasicProfiling,\n              hasOwnerMetadata,\n              supportsStrictMode,\n              supportsTimeline,\n            });\n\n            // Not all roots support StrictMode;\n            // don't flag a root as non-compliant unless it also supports StrictMode.\n            const isStrictModeNonCompliant =\n              !isStrictModeCompliant && supportsStrictMode;\n\n            this._idToElement.set(id, {\n              children: [],\n              depth: -1,\n              displayName: null,\n              hocDisplayNames: null,\n              id,\n              isCollapsed: false, // Never collapse roots; it would hide the entire tree.\n              isStrictModeNonCompliant,\n              key: null,\n              ownerID: 0,\n              parentID: 0,\n              type,\n              weight: 0,\n              compiledWithForget: false,\n            });\n\n            haveRootsChanged = true;\n          } else {\n            const parentID = operations[i];\n            i++;\n\n            const ownerID = operations[i];\n            i++;\n\n            const displayNameStringID = operations[i];\n            const displayName = stringTable[displayNameStringID];\n            i++;\n\n            const keyStringID = operations[i];\n            const key = stringTable[keyStringID];\n            i++;\n\n            if (__DEBUG__) {\n              debug(\n                'Add',\n                `node ${id} (${displayName || 'null'}) as child of ${parentID}`,\n              );\n            }\n\n            const parentElement = this._idToElement.get(parentID);\n            if (parentElement === undefined) {\n              this._throwAndEmitError(\n                Error(\n                  `Cannot add child \"${id}\" to parent \"${parentID}\" because parent node was not found in the Store.`,\n                ),\n              );\n\n              break;\n            }\n\n            parentElement.children.push(id);\n\n            const {\n              formattedDisplayName: displayNameWithoutHOCs,\n              hocDisplayNames,\n              compiledWithForget,\n            } = parseElementDisplayNameFromBackend(displayName, type);\n\n            const element: Element = {\n              children: [],\n              depth: parentElement.depth + 1,\n              displayName: displayNameWithoutHOCs,\n              hocDisplayNames,\n              id,\n              isCollapsed: this._collapseNodesByDefault,\n              isStrictModeNonCompliant: parentElement.isStrictModeNonCompliant,\n              key,\n              ownerID,\n              parentID,\n              type,\n              weight: 1,\n              compiledWithForget,\n            };\n\n            this._idToElement.set(id, element);\n            addedElementIDs.push(id);\n            this._adjustParentTreeWeight(parentElement, 1);\n\n            if (ownerID > 0) {\n              let set = this._ownersMap.get(ownerID);\n              if (set === undefined) {\n                set = new Set();\n                this._ownersMap.set(ownerID, set);\n              }\n              set.add(id);\n            }\n          }\n          break;\n        }\n        case TREE_OPERATION_REMOVE: {\n          const removeLength = operations[i + 1];\n          i += 2;\n\n          for (let removeIndex = 0; removeIndex < removeLength; removeIndex++) {\n            const id = operations[i];\n            const element = this._idToElement.get(id);\n\n            if (element === undefined) {\n              this._throwAndEmitError(\n                Error(\n                  `Cannot remove node \"${id}\" because no matching node was found in the Store.`,\n                ),\n              );\n\n              break;\n            }\n\n            i += 1;\n\n            const {children, ownerID, parentID, weight} = element;\n            if (children.length > 0) {\n              this._throwAndEmitError(\n                Error(`Node \"${id}\" was removed before its children.`),\n              );\n            }\n\n            this._idToElement.delete(id);\n\n            let parentElement: ?Element = null;\n            if (parentID === 0) {\n              if (__DEBUG__) {\n                debug('Remove', `node ${id} root`);\n              }\n\n              this._roots = this._roots.filter(rootID => rootID !== id);\n              this._rootIDToRendererID.delete(id);\n              this._rootIDToCapabilities.delete(id);\n\n              haveRootsChanged = true;\n            } else {\n              if (__DEBUG__) {\n                debug('Remove', `node ${id} from parent ${parentID}`);\n              }\n\n              parentElement = this._idToElement.get(parentID);\n              if (parentElement === undefined) {\n                this._throwAndEmitError(\n                  Error(\n                    `Cannot remove node \"${id}\" from parent \"${parentID}\" because no matching node was found in the Store.`,\n                  ),\n                );\n\n                break;\n              }\n\n              const index = parentElement.children.indexOf(id);\n              parentElement.children.splice(index, 1);\n            }\n\n            this._adjustParentTreeWeight(parentElement, -weight);\n            removedElementIDs.set(id, parentID);\n\n            this._ownersMap.delete(id);\n            if (ownerID > 0) {\n              const set = this._ownersMap.get(ownerID);\n              if (set !== undefined) {\n                set.delete(id);\n              }\n            }\n\n            if (this._errorsAndWarnings.has(id)) {\n              this._errorsAndWarnings.delete(id);\n              haveErrorsOrWarningsChanged = true;\n            }\n          }\n\n          break;\n        }\n        case TREE_OPERATION_REMOVE_ROOT: {\n          i += 1;\n\n          const id = operations[1];\n\n          if (__DEBUG__) {\n            debug(`Remove root ${id}`);\n          }\n\n          const recursivelyDeleteElements = (elementID: number) => {\n            const element = this._idToElement.get(elementID);\n            this._idToElement.delete(elementID);\n            if (element) {\n              // Mostly for Flow's sake\n              for (let index = 0; index < element.children.length; index++) {\n                recursivelyDeleteElements(element.children[index]);\n              }\n            }\n          };\n\n          const root = this._idToElement.get(id);\n          if (root === undefined) {\n            this._throwAndEmitError(\n              Error(\n                `Cannot remove root \"${id}\": no matching node was found in the Store.`,\n              ),\n            );\n\n            break;\n          }\n\n          recursivelyDeleteElements(id);\n\n          this._rootIDToCapabilities.delete(id);\n          this._rootIDToRendererID.delete(id);\n          this._roots = this._roots.filter(rootID => rootID !== id);\n          this._weightAcrossRoots -= root.weight;\n          break;\n        }\n        case TREE_OPERATION_REORDER_CHILDREN: {\n          const id = operations[i + 1];\n          const numChildren = operations[i + 2];\n          i += 3;\n\n          const element = this._idToElement.get(id);\n          if (element === undefined) {\n            this._throwAndEmitError(\n              Error(\n                `Cannot reorder children for node \"${id}\" because no matching node was found in the Store.`,\n              ),\n            );\n\n            break;\n          }\n\n          const children = element.children;\n          if (children.length !== numChildren) {\n            this._throwAndEmitError(\n              Error(\n                `Children cannot be added or removed during a reorder operation.`,\n              ),\n            );\n          }\n\n          for (let j = 0; j < numChildren; j++) {\n            const childID = operations[i + j];\n            children[j] = childID;\n            if (__DEV__) {\n              // This check is more expensive so it's gated by __DEV__.\n              const childElement = this._idToElement.get(childID);\n              if (childElement == null || childElement.parentID !== id) {\n                console.error(\n                  `Children cannot be added or removed during a reorder operation.`,\n                );\n              }\n            }\n          }\n          i += numChildren;\n\n          if (__DEBUG__) {\n            debug('Re-order', `Node ${id} children ${children.join(',')}`);\n          }\n          break;\n        }\n        case TREE_OPERATION_SET_SUBTREE_MODE: {\n          const id = operations[i + 1];\n          const mode = operations[i + 2];\n\n          i += 3;\n\n          // If elements have already been mounted in this subtree, update them.\n          // (In practice, this likely only applies to the root element.)\n          if (mode === StrictMode) {\n            this._recursivelyUpdateSubtree(id, element => {\n              element.isStrictModeNonCompliant = false;\n            });\n          }\n\n          if (__DEBUG__) {\n            debug(\n              'Subtree mode',\n              `Subtree with root ${id} set to mode ${mode}`,\n            );\n          }\n          break;\n        }\n        case TREE_OPERATION_UPDATE_TREE_BASE_DURATION:\n          // Base duration updates are only sent while profiling is in progress.\n          // We can ignore them at this point.\n          // The profiler UI uses them lazily in order to generate the tree.\n          i += 3;\n          break;\n        case TREE_OPERATION_UPDATE_ERRORS_OR_WARNINGS:\n          const id = operations[i + 1];\n          const errorCount = operations[i + 2];\n          const warningCount = operations[i + 3];\n\n          i += 4;\n\n          if (errorCount > 0 || warningCount > 0) {\n            this._errorsAndWarnings.set(id, {errorCount, warningCount});\n          } else if (this._errorsAndWarnings.has(id)) {\n            this._errorsAndWarnings.delete(id);\n          }\n          haveErrorsOrWarningsChanged = true;\n          break;\n        default:\n          this._throwAndEmitError(\n            new UnsupportedBridgeOperationError(\n              `Unsupported Bridge operation \"${operation}\"`,\n            ),\n          );\n      }\n    }\n\n    this._revision++;\n\n    // Any time the tree changes (e.g. elements added, removed, or reordered) cached indices may be invalid.\n    this._cachedErrorAndWarningTuples = null;\n\n    if (haveErrorsOrWarningsChanged) {\n      let componentWithErrorCount = 0;\n      let componentWithWarningCount = 0;\n\n      this._errorsAndWarnings.forEach(entry => {\n        if (entry.errorCount > 0) {\n          componentWithErrorCount++;\n        }\n\n        if (entry.warningCount > 0) {\n          componentWithWarningCount++;\n        }\n      });\n\n      this._cachedComponentWithErrorCount = componentWithErrorCount;\n      this._cachedComponentWithWarningCount = componentWithWarningCount;\n    }\n\n    if (haveRootsChanged) {\n      const prevRootSupportsProfiling = this._rootSupportsBasicProfiling;\n      const prevRootSupportsTimelineProfiling =\n        this._rootSupportsTimelineProfiling;\n\n      this._hasOwnerMetadata = false;\n      this._rootSupportsBasicProfiling = false;\n      this._rootSupportsTimelineProfiling = false;\n      this._rootIDToCapabilities.forEach(\n        ({supportsBasicProfiling, hasOwnerMetadata, supportsTimeline}) => {\n          if (supportsBasicProfiling) {\n            this._rootSupportsBasicProfiling = true;\n          }\n          if (hasOwnerMetadata) {\n            this._hasOwnerMetadata = true;\n          }\n          if (supportsTimeline) {\n            this._rootSupportsTimelineProfiling = true;\n          }\n        },\n      );\n\n      this.emit('roots');\n\n      if (this._rootSupportsBasicProfiling !== prevRootSupportsProfiling) {\n        this.emit('rootSupportsBasicProfiling');\n      }\n\n      if (\n        this._rootSupportsTimelineProfiling !==\n        prevRootSupportsTimelineProfiling\n      ) {\n        this.emit('rootSupportsTimelineProfiling');\n      }\n    }\n\n    if (__DEBUG__) {\n      console.log(printStore(this, true));\n      console.groupEnd();\n    }\n\n    this.emit('mutated', [addedElementIDs, removedElementIDs]);\n  };\n\n  // Certain backends save filters on a per-domain basis.\n  // In order to prevent filter preferences and applied filters from being out of sync,\n  // this message enables the backend to override the frontend's current (\"saved\") filters.\n  // This action should also override the saved filters too,\n  // else reloading the frontend without reloading the backend would leave things out of sync.\n  onBridgeOverrideComponentFilters: (\n    componentFilters: Array<ComponentFilter>,\n  ) => void = componentFilters => {\n    this._componentFilters = componentFilters;\n\n    setSavedComponentFilters(componentFilters);\n  };\n\n  onBridgeShutdown: () => void = () => {\n    if (__DEBUG__) {\n      debug('onBridgeShutdown', 'unsubscribing from Bridge');\n    }\n\n    const bridge = this._bridge;\n    bridge.removeListener('operations', this.onBridgeOperations);\n    bridge.removeListener(\n      'overrideComponentFilters',\n      this.onBridgeOverrideComponentFilters,\n    );\n    bridge.removeListener('shutdown', this.onBridgeShutdown);\n    bridge.removeListener(\n      'isReloadAndProfileSupportedByBackend',\n      this.onBackendReloadAndProfileSupported,\n    );\n    bridge.removeListener(\n      'isNativeStyleEditorSupported',\n      this.onBridgeNativeStyleEditorSupported,\n    );\n    bridge.removeListener(\n      'unsupportedRendererVersion',\n      this.onBridgeUnsupportedRendererVersion,\n    );\n    bridge.removeListener('backendVersion', this.onBridgeBackendVersion);\n    bridge.removeListener('bridgeProtocol', this.onBridgeProtocol);\n    bridge.removeListener('saveToClipboard', this.onSaveToClipboard);\n\n    if (this._onBridgeProtocolTimeoutID !== null) {\n      clearTimeout(this._onBridgeProtocolTimeoutID);\n      this._onBridgeProtocolTimeoutID = null;\n    }\n  };\n\n  onBackendReloadAndProfileSupported: (\n    isReloadAndProfileSupported: boolean,\n  ) => void = isReloadAndProfileSupported => {\n    this._isReloadAndProfileBackendSupported = isReloadAndProfileSupported;\n\n    this.emit('supportsReloadAndProfile');\n  };\n\n  onBridgeUnsupportedRendererVersion: () => void = () => {\n    this._unsupportedRendererVersionDetected = true;\n\n    this.emit('unsupportedRendererVersionDetected');\n  };\n\n  onBridgeBackendVersion: (backendVersion: string) => void = backendVersion => {\n    this._backendVersion = backendVersion;\n    this.emit('backendVersion');\n  };\n\n  onBridgeProtocol: (bridgeProtocol: BridgeProtocol) => void =\n    bridgeProtocol => {\n      if (this._onBridgeProtocolTimeoutID !== null) {\n        clearTimeout(this._onBridgeProtocolTimeoutID);\n        this._onBridgeProtocolTimeoutID = null;\n      }\n\n      this._bridgeProtocol = bridgeProtocol;\n\n      if (bridgeProtocol.version !== currentBridgeProtocol.version) {\n        // Technically newer versions of the frontend can, at least for now,\n        // gracefully handle older versions of the backend protocol.\n        // So for now we don't need to display the unsupported dialog.\n      }\n    };\n\n  onBridgeProtocolTimeout: () => void = () => {\n    this._onBridgeProtocolTimeoutID = null;\n\n    // If we timed out, that indicates the backend predates the bridge protocol,\n    // so we can set a fake version (0) to trigger the downgrade message.\n    this._bridgeProtocol = BRIDGE_PROTOCOL[0];\n\n    this.emit('unsupportedBridgeProtocolDetected');\n  };\n\n  onSaveToClipboard: (text: string) => void = text => {\n    copy(text);\n  };\n\n  onBackendInitialized: () => void = () => {\n    // Verify that the frontend version is compatible with the connected backend.\n    // See github.com/facebook/react/issues/21326\n    if (this._shouldCheckBridgeProtocolCompatibility) {\n      // Older backends don't support an explicit bridge protocol,\n      // so we should timeout eventually and show a downgrade message.\n      this._onBridgeProtocolTimeoutID = setTimeout(\n        this.onBridgeProtocolTimeout,\n        10000,\n      );\n\n      this._bridge.addListener('bridgeProtocol', this.onBridgeProtocol);\n      this._bridge.send('getBridgeProtocol');\n    }\n\n    this._bridge.send('getBackendVersion');\n    this._bridge.send('getIfHasUnsupportedRendererVersion');\n    this._bridge.send('getHookSettings'); // Warm up cached hook settings\n  };\n\n  getHookSettings: () => void = () => {\n    if (this._hookSettings != null) {\n      this.emit('hookSettings', this._hookSettings);\n    } else {\n      this._bridge.send('getHookSettings');\n    }\n  };\n\n  updateHookSettings: (settings: $ReadOnly<DevToolsHookSettings>) => void =\n    settings => {\n      this._hookSettings = settings;\n\n      this._bridge.send('updateHookSettings', settings);\n      this.emit('settingsUpdated', settings);\n    };\n\n  onHookSettings: (settings: $ReadOnly<DevToolsHookSettings>) => void =\n    settings => {\n      this._hookSettings = settings;\n\n      this.setShouldShowWarningsAndErrors(settings.showInlineWarningsAndErrors);\n      this.emit('hookSettings', settings);\n    };\n\n  setShouldShowWarningsAndErrors(status: boolean): void {\n    const previousStatus = this._shouldShowWarningsAndErrors;\n    this._shouldShowWarningsAndErrors = status;\n\n    if (previousStatus !== status) {\n      // Propagate to subscribers, although tree state has not changed\n      this.emit('mutated', [[], new Map()]);\n    }\n  }\n\n  // The Store should never throw an Error without also emitting an event.\n  // Otherwise Store errors will be invisible to users,\n  // but the downstream errors they cause will be reported as bugs.\n  // For example, https://github.com/facebook/react/issues/21402\n  // Emitting an error event allows the ErrorBoundary to show the original error.\n  _throwAndEmitError(error: Error): empty {\n    this.emit('error', error);\n\n    // Throwing is still valuable for local development\n    // and for unit testing the Store itself.\n    throw error;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"path\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"fs\");","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n */\n\nimport {__PERFORMANCE_PROFILE__} from './constants';\n\nconst supportsUserTiming =\n  typeof performance !== 'undefined' &&\n  // $FlowFixMe[method-unbinding]\n  typeof performance.mark === 'function' &&\n  // $FlowFixMe[method-unbinding]\n  typeof performance.clearMarks === 'function';\n\nconst supportsPerformanceNow =\n  // $FlowFixMe[method-unbinding]\n  typeof performance !== 'undefined' && typeof performance.now === 'function';\n\nfunction mark(markName: string): void {\n  if (supportsUserTiming) {\n    performance.mark(markName + '-start');\n  }\n}\n\nfunction measure(markName: string): void {\n  if (supportsUserTiming) {\n    performance.mark(markName + '-end');\n    performance.measure(markName, markName + '-start', markName + '-end');\n    performance.clearMarks(markName + '-start');\n    performance.clearMarks(markName + '-end');\n  }\n}\n\nfunction now(): number {\n  if (supportsPerformanceNow) {\n    return performance.now();\n  }\n  return Date.now();\n}\n\nexport async function withAsyncPerfMeasurements<TReturn>(\n  markName: string,\n  callback: () => Promise<TReturn>,\n  onComplete?: number => void,\n): Promise<TReturn> {\n  const start = now();\n  if (__PERFORMANCE_PROFILE__) {\n    mark(markName);\n  }\n  const result = await callback();\n\n  if (__PERFORMANCE_PROFILE__) {\n    measure(markName);\n  }\n\n  if (onComplete != null) {\n    const duration = now() - start;\n    onComplete(duration);\n  }\n\n  return result;\n}\n\nexport function withSyncPerfMeasurements<TReturn>(\n  markName: string,\n  callback: () => TReturn,\n  onComplete?: number => void,\n): TReturn {\n  const start = now();\n  if (__PERFORMANCE_PROFILE__) {\n    mark(markName);\n  }\n  const result = callback();\n\n  if (__PERFORMANCE_PROFILE__) {\n    measure(markName);\n  }\n\n  if (onComplete != null) {\n    const duration = now() - start;\n    onComplete(duration);\n  }\n\n  return result;\n}\n\nexport function withCallbackPerfMeasurements<TReturn>(\n  markName: string,\n  callback: (done: () => void) => TReturn,\n  onComplete?: number => void,\n): TReturn {\n  const start = now();\n  if (__PERFORMANCE_PROFILE__) {\n    mark(markName);\n  }\n\n  const done = () => {\n    if (__PERFORMANCE_PROFILE__) {\n      measure(markName);\n    }\n\n    if (onComplete != null) {\n      const duration = now() - start;\n      onComplete(duration);\n    }\n  };\n  return callback(done);\n}\n","export type SourceMapSegment =\n\t| [number]\n\t| [number, number, number, number]\n\t| [number, number, number, number, number];\nexport type SourceMapLine = SourceMapSegment[];\nexport type SourceMapMappings = SourceMapLine[];\n\nconst charToInteger: { [charCode: number]: number } = {};\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\nfor (let i = 0; i < chars.length; i++) {\n\tcharToInteger[chars.charCodeAt(i)] = i;\n}\n\nexport function decode(mappings: string): SourceMapMappings {\n\tconst decoded: SourceMapMappings = [];\n\tlet line: SourceMapLine = [];\n\tconst segment: SourceMapSegment = [\n\t\t0, // generated code column\n\t\t0, // source file index\n\t\t0, // source code line\n\t\t0, // source code column\n\t\t0, // name index\n\t];\n\n\tlet j = 0;\n\tfor (let i = 0, shift = 0, value = 0; i < mappings.length; i++) {\n\t\tconst c = mappings.charCodeAt(i);\n\n\t\tif (c === 44) { // \",\"\n\t\t\tsegmentify(line, segment, j);\n\t\t\tj = 0;\n\n\t\t} else if (c === 59) { // \";\"\n\t\t\tsegmentify(line, segment, j);\n\t\t\tj = 0;\n\t\t\tdecoded.push(line);\n\t\t\tline = [];\n\t\t\tsegment[0] = 0;\n\n\t\t} else {\n\t\t\tlet integer = charToInteger[c];\n\t\t\tif (integer === undefined) {\n\t\t\t\tthrow new Error('Invalid character (' + String.fromCharCode(c) + ')');\n\t\t\t}\n\n\t\t\tconst hasContinuationBit = integer & 32;\n\n\t\t\tinteger &= 31;\n\t\t\tvalue += integer << shift;\n\n\t\t\tif (hasContinuationBit) {\n\t\t\t\tshift += 5;\n\t\t\t} else {\n\t\t\t\tconst shouldNegate = value & 1;\n\t\t\t\tvalue >>>= 1;\n\n\t\t\t\tif (shouldNegate) {\n\t\t\t\t\tvalue = value === 0 ? -0x80000000 : -value;\n\t\t\t\t}\n\n\t\t\t\tsegment[j] += value;\n\t\t\t\tj++;\n\t\t\t\tvalue = shift = 0; // reset\n\t\t\t}\n\t\t}\n\t}\n\n\tsegmentify(line, segment, j);\n\tdecoded.push(line);\n\n\treturn decoded;\n}\n\nfunction segmentify(line: SourceMapSegment[], segment: SourceMapSegment, j: number) {\n\t// This looks ugly, but we're creating specialized arrays with a specific\n\t// length. This is much faster than creating a new array (which v8 expands to\n\t// a capacity of 17 after pushing the first item), or slicing out a subarray\n\t// (which is slow). Length 4 is assumed to be the most frequent, followed by\n\t// length 5 (since not everything will have an associated name), followed by\n\t// length 1 (it's probably rare for a source substring to not have an\n\t// associated segment data).\n\tif (j === 4) line.push([segment[0], segment[1], segment[2], segment[3]]);\n\telse if (j === 5) line.push([segment[0], segment[1], segment[2], segment[3], segment[4]]);\n\telse if (j === 1) line.push([segment[0]]);\n}\n\nexport function encode(decoded: SourceMapMappings): string {\n\tlet sourceFileIndex = 0;  // second field\n\tlet sourceCodeLine = 0;   // third field\n\tlet sourceCodeColumn = 0; // fourth field\n\tlet nameIndex = 0;        // fifth field\n\tlet mappings = '';\n\n\tfor (let i = 0; i < decoded.length; i++) {\n\t\tconst line = decoded[i];\n\t\tif (i > 0) mappings += ';';\n\t\tif (line.length === 0) continue;\n\n\t\tlet generatedCodeColumn = 0; // first field\n\n\t\tconst lineMappings: string[] = [];\n\n\t\tfor (const segment of line) {\n\t\t\tlet segmentMappings = encodeInteger(segment[0] - generatedCodeColumn);\n\t\t\tgeneratedCodeColumn = segment[0];\n\n\t\t\tif (segment.length > 1) {\n\t\t\t\tsegmentMappings +=\n\t\t\t\t\tencodeInteger(segment[1] - sourceFileIndex) +\n\t\t\t\t\tencodeInteger(segment[2] - sourceCodeLine) +\n\t\t\t\t\tencodeInteger(segment[3] - sourceCodeColumn);\n\n\t\t\t\tsourceFileIndex = segment[1];\n\t\t\t\tsourceCodeLine = segment[2];\n\t\t\t\tsourceCodeColumn = segment[3];\n\t\t\t}\n\n\t\t\tif (segment.length === 5) {\n\t\t\t\tsegmentMappings += encodeInteger(segment[4] - nameIndex);\n\t\t\t\tnameIndex = segment[4];\n\t\t\t}\n\n\t\t\tlineMappings.push(segmentMappings);\n\t\t}\n\n\t\tmappings += lineMappings.join(',');\n\t}\n\n\treturn mappings;\n}\n\nfunction encodeInteger(num: number): string {\n\tvar result = '';\n\tnum = num < 0 ? (-num << 1) | 1 : num << 1;\n\tdo {\n\t\tvar clamped = num & 31;\n\t\tnum >>>= 5;\n\t\tif (num > 0) {\n\t\t\tclamped |= 32;\n\t\t}\n\t\tresult += chars[clamped];\n\t} while (num > 0);\n\n\treturn result;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\nimport {withSyncPerfMeasurements} from 'react-devtools-shared/src/PerformanceLoggingUtils';\nimport {decode} from 'sourcemap-codec';\n\nimport type {\n  IndexSourceMap,\n  IndexSourceMapSection,\n  BasicSourceMap,\n  MixedSourceMap,\n} from './SourceMapTypes';\n\ntype SearchPosition = {\n  columnNumber: number,\n  lineNumber: number,\n};\n\ntype ResultPosition = {\n  column: number,\n  line: number,\n  sourceContent: string | null,\n  sourceURL: string | null,\n};\n\nexport type SourceMapConsumerType = {\n  originalPositionFor: SearchPosition => ResultPosition,\n};\n\ntype Mappings = Array<Array<Array<number>>>;\n\nexport default function SourceMapConsumer(\n  sourceMapJSON: MixedSourceMap | IndexSourceMapSection,\n): SourceMapConsumerType {\n  if (sourceMapJSON.sections != null) {\n    return IndexedSourceMapConsumer(((sourceMapJSON: any): IndexSourceMap));\n  } else {\n    return BasicSourceMapConsumer(((sourceMapJSON: any): BasicSourceMap));\n  }\n}\n\nfunction BasicSourceMapConsumer(sourceMapJSON: BasicSourceMap) {\n  const decodedMappings: Mappings = withSyncPerfMeasurements(\n    'Decoding source map mappings with sourcemap-codec',\n    () => decode(sourceMapJSON.mappings),\n  );\n\n  function originalPositionFor({\n    columnNumber,\n    lineNumber,\n  }: SearchPosition): ResultPosition {\n    // Error.prototype.stack columns are 1-based (like most IDEs) but ASTs are 0-based.\n    const targetColumnNumber = columnNumber - 1;\n\n    const lineMappings = decodedMappings[lineNumber - 1];\n\n    let nearestEntry = null;\n\n    let startIndex = 0;\n    let stopIndex = lineMappings.length - 1;\n    let index = -1;\n    while (startIndex <= stopIndex) {\n      index = Math.floor((stopIndex + startIndex) / 2);\n      nearestEntry = lineMappings[index];\n\n      const currentColumn = nearestEntry[0];\n      if (currentColumn === targetColumnNumber) {\n        break;\n      } else {\n        if (currentColumn > targetColumnNumber) {\n          if (stopIndex - index > 0) {\n            stopIndex = index;\n          } else {\n            index = stopIndex;\n            break;\n          }\n        } else {\n          if (index - startIndex > 0) {\n            startIndex = index;\n          } else {\n            index = startIndex;\n            break;\n          }\n        }\n      }\n    }\n\n    // We have found either the exact element, or the next-closest element.\n    // However there may be more than one such element.\n    // Make sure we always return the smallest of these.\n    while (index > 0) {\n      const previousEntry = lineMappings[index - 1];\n      const currentColumn = previousEntry[0];\n      if (currentColumn !== targetColumnNumber) {\n        break;\n      }\n      index--;\n    }\n\n    if (nearestEntry == null) {\n      // TODO maybe fall back to the runtime source instead of throwing?\n      throw Error(\n        `Could not find runtime location for line:${lineNumber} and column:${columnNumber}`,\n      );\n    }\n\n    const sourceIndex = nearestEntry[1];\n    const sourceContent =\n      sourceMapJSON.sourcesContent != null\n        ? sourceMapJSON.sourcesContent[sourceIndex]\n        : null;\n    const sourceURL = sourceMapJSON.sources[sourceIndex] ?? null;\n    const line = nearestEntry[2] + 1;\n    const column = nearestEntry[3];\n\n    return {\n      column,\n      line,\n      sourceContent: ((sourceContent: any): string | null),\n      sourceURL: ((sourceURL: any): string | null),\n    };\n  }\n\n  return (({\n    originalPositionFor,\n  }: any): SourceMapConsumerType);\n}\n\ntype Section = {\n  +generatedColumn: number,\n  +generatedLine: number,\n  +map: MixedSourceMap,\n\n  // Lazily parsed only when/as the section is needed.\n  sourceMapConsumer: SourceMapConsumerType | null,\n};\n\nfunction IndexedSourceMapConsumer(sourceMapJSON: IndexSourceMap) {\n  let lastOffset = {\n    line: -1,\n    column: 0,\n  };\n\n  const sections: Array<Section> = sourceMapJSON.sections.map(section => {\n    const offset = section.offset;\n    const offsetLine = offset.line;\n    const offsetColumn = offset.column;\n\n    if (\n      offsetLine < lastOffset.line ||\n      (offsetLine === lastOffset.line && offsetColumn < lastOffset.column)\n    ) {\n      throw new Error('Section offsets must be ordered and non-overlapping.');\n    }\n\n    lastOffset = offset;\n\n    return {\n      // The offset fields are 0-based, but we use 1-based indices when encoding/decoding from VLQ.\n      generatedLine: offsetLine + 1,\n      generatedColumn: offsetColumn + 1,\n      map: section.map,\n      sourceMapConsumer: null,\n    };\n  });\n\n  function originalPositionFor({\n    columnNumber,\n    lineNumber,\n  }: SearchPosition): ResultPosition {\n    // Error.prototype.stack columns are 1-based (like most IDEs) but ASTs are 0-based.\n    const targetColumnNumber = columnNumber - 1;\n\n    let section = null;\n\n    let startIndex = 0;\n    let stopIndex = sections.length - 1;\n    let index = -1;\n    while (startIndex <= stopIndex) {\n      index = Math.floor((stopIndex + startIndex) / 2);\n      section = sections[index];\n\n      const currentLine = section.generatedLine;\n      if (currentLine === lineNumber) {\n        const currentColumn = section.generatedColumn;\n        if (currentColumn === lineNumber) {\n          break;\n        } else {\n          if (currentColumn > targetColumnNumber) {\n            if (stopIndex - index > 0) {\n              stopIndex = index;\n            } else {\n              index = stopIndex;\n              break;\n            }\n          } else {\n            if (index - startIndex > 0) {\n              startIndex = index;\n            } else {\n              index = startIndex;\n              break;\n            }\n          }\n        }\n      } else {\n        if (currentLine > lineNumber) {\n          if (stopIndex - index > 0) {\n            stopIndex = index;\n          } else {\n            index = stopIndex;\n            break;\n          }\n        } else {\n          if (index - startIndex > 0) {\n            startIndex = index;\n          } else {\n            index = startIndex;\n            break;\n          }\n        }\n      }\n    }\n\n    if (section == null) {\n      // TODO maybe fall back to the runtime source instead of throwing?\n      throw Error(\n        `Could not find matching section for line:${lineNumber} and column:${columnNumber}`,\n      );\n    }\n\n    if (section.sourceMapConsumer === null) {\n      // Lazily parse the section only when it's needed.\n      // $FlowFixMe[invalid-constructor] Flow no longer supports calling new on functions\n      section.sourceMapConsumer = new SourceMapConsumer(section.map);\n    }\n\n    return section.sourceMapConsumer.originalPositionFor({\n      columnNumber,\n      lineNumber,\n    });\n  }\n\n  return (({\n    originalPositionFor,\n  }: any): SourceMapConsumerType);\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {normalizeUrl} from 'react-devtools-shared/src/utils';\nimport SourceMapConsumer from 'react-devtools-shared/src/hooks/SourceMapConsumer';\n\nimport type {Source} from 'react-devtools-shared/src/shared/types';\nimport type {FetchFileWithCaching} from 'react-devtools-shared/src/devtools/views/Components/FetchFileWithCachingContext';\n\nconst symbolicationCache: Map<string, Promise<Source | null>> = new Map();\n\nexport async function symbolicateSourceWithCache(\n  fetchFileWithCaching: FetchFileWithCaching,\n  sourceURL: string,\n  line: number, // 1-based\n  column: number, // 1-based\n): Promise<Source | null> {\n  const key = `${sourceURL}:${line}:${column}`;\n  const cachedPromise = symbolicationCache.get(key);\n  if (cachedPromise != null) {\n    return cachedPromise;\n  }\n\n  const promise = symbolicateSource(\n    fetchFileWithCaching,\n    sourceURL,\n    line,\n    column,\n  );\n  symbolicationCache.set(key, promise);\n\n  return promise;\n}\n\nconst SOURCE_MAP_ANNOTATION_PREFIX = 'sourceMappingURL=';\nexport async function symbolicateSource(\n  fetchFileWithCaching: FetchFileWithCaching,\n  sourceURL: string,\n  lineNumber: number, // 1-based\n  columnNumber: number, // 1-based\n): Promise<Source | null> {\n  const resource = await fetchFileWithCaching(sourceURL).catch(() => null);\n  if (resource == null) {\n    return null;\n  }\n\n  const resourceLines = resource.split(/[\\r\\n]+/);\n  for (let i = resourceLines.length - 1; i >= 0; --i) {\n    const resourceLine = resourceLines[i];\n\n    // In case there is empty last line\n    if (!resourceLine) continue;\n    // Not an annotation? Stop looking for a source mapping url.\n    if (!resourceLine.startsWith('//#')) break;\n\n    if (resourceLine.includes(SOURCE_MAP_ANNOTATION_PREFIX)) {\n      const sourceMapAnnotationStartIndex = resourceLine.indexOf(\n        SOURCE_MAP_ANNOTATION_PREFIX,\n      );\n      const sourceMapAt = resourceLine.slice(\n        sourceMapAnnotationStartIndex + SOURCE_MAP_ANNOTATION_PREFIX.length,\n        resourceLine.length,\n      );\n\n      const sourceMapURL = new URL(sourceMapAt, sourceURL).toString();\n      const sourceMap = await fetchFileWithCaching(sourceMapURL).catch(\n        () => null,\n      );\n      if (sourceMap != null) {\n        try {\n          const parsedSourceMap = JSON.parse(sourceMap);\n          const consumer = SourceMapConsumer(parsedSourceMap);\n          const {\n            sourceURL: possiblyURL,\n            line,\n            column,\n          } = consumer.originalPositionFor({\n            lineNumber, // 1-based\n            columnNumber, // 1-based\n          });\n\n          if (possiblyURL === null) {\n            return null;\n          }\n          try {\n            // sourceMapURL = https://react.dev/script.js.map\n            void new URL(possiblyURL); // test if it is a valid URL\n            const normalizedURL = normalizeUrl(possiblyURL);\n\n            return {sourceURL: normalizedURL, line, column};\n          } catch (e) {\n            // This is not valid URL\n            if (\n              // sourceMapURL = /file\n              possiblyURL.startsWith('/') ||\n              // sourceMapURL = C:\\\\...\n              possiblyURL.slice(1).startsWith(':\\\\\\\\')\n            ) {\n              // This is an absolute path\n              return {sourceURL: possiblyURL, line, column};\n            }\n\n            // This is a relative path\n            // possiblyURL = x.js.map, sourceMapURL = https://react.dev/script.js.map\n            const absoluteSourcePath = new URL(\n              possiblyURL,\n              sourceMapURL,\n            ).toString();\n            return {sourceURL: absoluteSourcePath, line, column};\n          }\n        } catch (e) {\n          return null;\n        }\n      }\n\n      return null;\n    }\n  }\n\n  return null;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport Bridge from 'react-devtools-shared/src/bridge';\nimport Store from 'react-devtools-shared/src/devtools/store';\nimport {getSavedComponentFilters} from 'react-devtools-shared/src/utils';\nimport {registerDevToolsEventLogger} from 'react-devtools-shared/src/registerDevToolsEventLogger';\nimport {Server} from 'ws';\nimport {join} from 'path';\nimport {readFileSync} from 'fs';\nimport {__DEBUG__} from 'react-devtools-shared/src/constants';\n\nimport type {FrontendBridge} from 'react-devtools-shared/src/bridge';\nimport {symbolicateSourceWithCache} from 'react-devtools-shared/src/symbolicateSource';\nimport type {InspectedElementPayload} from 'react-devtools-shared/src/backend/types';\nexport type StatusTypes = 'server-connected' | 'devtools-connected' | 'error';\nexport type StatusListener = (message: string, status: StatusTypes) => void;\nexport type OnDisconnectedCallback = () => void;\nexport type OnDataCallback = (data: InspectedElementPayload) => void;\n\nlet statusListener: StatusListener = (\n  message: string,\n  status?: StatusTypes,\n) => {\n  log('Status', message, status);\n};\nlet disconnectedCallback: OnDisconnectedCallback = () => {};\nlet dataCallback: OnDataCallback = () => {};\n\nfunction setStatusListener(value: StatusListener): DevtoolsType {\n  statusListener = value;\n  return Devtools;\n}\n\nfunction setDisconnectedCallback(value: OnDisconnectedCallback): DevtoolsType {\n  disconnectedCallback = value;\n  return Devtools;\n}\n\nfunction setDataCallback(value: OnDataCallback): DevtoolsType {\n  dataCallback = value;\n  return Devtools;\n}\n\nfunction startInspectingHost() {\n  if (!bridge || !store) {\n    console.log('no bridge or store');\n    return Devtools;\n  }\n  bridge.send('startInspectingHost');\n  return Devtools;\n}\n\nfunction stopInspectingHost() {\n  if (!bridge || !store) {\n    console.log('no bridge or store');\n    return Devtools;\n  }\n  bridge.send('stopInspectingHost', false);\n  return Devtools;\n}\n\nlet bridge: FrontendBridge | null = null;\nlet store: Store | null = null;\n\nconst log = (...args: Array<mixed>) => console.log('[React DevTools]', ...args);\nlog.warn = (...args: Array<mixed>) => console.warn('[React DevTools]', ...args);\nlog.error = (...args: Array<mixed>) =>\n  console.error('[React DevTools]', ...args);\n\nfunction debug(methodName: string, ...args: Array<mixed>) {\n  if (__DEBUG__) {\n    console.log(\n      `%c[core/standalone] %c${methodName}`,\n      'color: teal; font-weight: bold;',\n      'font-weight: bold;',\n      ...args,\n    );\n  }\n}\n\nlet i = 0;\n\nfunction reload() {\n  if (!bridge || !store) {\n    console.log('no bridge or store');\n    return;\n  }\n  const localBridge = bridge;\n  const localStore = store;\n\n  localBridge.addListener('selectElement', elementId => {\n    console.log('selected an element with id ', elementId);\n    const rendererID = localStore.getRendererIDForElement(elementId);\n    // const element = localStore.getElementByID(elementId);\n\n    if (rendererID === null) {\n      console.log('no renderer id');\n      return;\n    }\n\n    const payload = {\n      id: elementId,\n      rendererID,\n      requestID: i++,\n      path: null,\n      forceFullData: true,\n    };\n\n    localBridge.send('inspectElement', payload);\n  });\n\n  localBridge.addListener('inspectedElement', async data => {\n    if (data == null) return null;\n\n    if (data.type === 'full-data') {\n      console.log('devtools got full data', data);\n      if (data.value.source == null) return Promise.resolve(null);\n\n      const {sourceURL, line, column} = data.value.source;\n      const source = await symbolicateSourceWithCache(\n        fetchFileWithCaching,\n        sourceURL,\n        line,\n        column,\n      );\n      console.log('devtools symbolicated source', source);\n      if (source !== null) {\n        console.log('devtools symbolicated source', source);\n        data.value.source = source;\n      }\n      dataCallback(data);\n    } else {\n      dataCallback(data);\n    }\n  });\n}\n\nfunction onDisconnected() {\n  disconnectedCallback();\n}\n\nfunction onError({code, message}: $FlowFixMe) {\n  console.error(`Error: ${code} ${message}`);\n}\n\nfunction initialize(socket: WebSocket) {\n  const listeners = [];\n  socket.onmessage = event => {\n    let data;\n    try {\n      if (typeof event.data === 'string') {\n        data = JSON.parse(event.data);\n\n        if (__DEBUG__) {\n          debug('WebSocket.onmessage', data);\n        }\n      } else {\n        throw Error();\n      }\n    } catch (e) {\n      log.error('Failed to parse JSON', event.data);\n      return;\n    }\n    listeners.forEach(fn => {\n      try {\n        fn(data);\n      } catch (error) {\n        log.error('Error calling listener', data);\n        throw error;\n      }\n    });\n  };\n\n  bridge = new Bridge({\n    listen(fn) {\n      listeners.push(fn);\n      return () => {\n        const index = listeners.indexOf(fn);\n        if (index >= 0) {\n          listeners.splice(index, 1);\n        }\n      };\n    },\n    send(event: string, payload: any, transferable?: Array<any>) {\n      if (socket.readyState === socket.OPEN) {\n        socket.send(JSON.stringify({event, payload}));\n      }\n    },\n  });\n\n  ((bridge: any): FrontendBridge).addListener('shutdown', () => {\n    socket.close();\n  });\n\n  // $FlowFixMe[incompatible-call] found when upgrading Flow\n  store = new Store(bridge, {\n    checkBridgeProtocolCompatibility: true,\n    supportsTraceUpdates: true,\n    supportsClickToInspect: true,\n  });\n\n  log('Connected');\n  statusListener('DevTools initialized.', 'devtools-connected');\n  reload();\n}\n\nfunction connectToSocket(socket: WebSocket): {close(): void} {\n  socket.onerror = err => {\n    onDisconnected();\n    log.error('Error with websocket connection', err);\n  };\n  socket.onclose = () => {\n    onDisconnected();\n    log('Connection to RN closed');\n  };\n  initialize(socket);\n\n  return {\n    close: function () {\n      onDisconnected();\n    },\n  };\n}\n\ntype ServerOptions = {\n  key?: string,\n  cert?: string,\n};\n\ntype LoggerOptions = {\n  surface?: ?string,\n};\n\nfunction startServer(\n  port: number = 8097,\n  host: string = 'localhost',\n  httpsOptions?: ServerOptions,\n  loggerOptions?: LoggerOptions,\n  attempts: number = 0,\n): DevtoolsType {\n  registerDevToolsEventLogger(loggerOptions?.surface ?? 'standalone');\n\n  const useHttps = !!httpsOptions;\n  const httpServer = useHttps\n    ? require('https').createServer(httpsOptions)\n    : require('http').createServer();\n  const server = new Server({server: httpServer, maxPayload: 1e9});\n  let connected: WebSocket | null = null;\n\n  server.on('connection', (socket: WebSocket) => {\n    if (connected !== null) {\n      connected.close();\n      log.warn(\n        'Only one connection allowed at a time.',\n        'Closing the previous connection',\n      );\n    }\n    connected = socket;\n    socket.onerror = error => {\n      connected = null;\n      onDisconnected();\n      log.error('Error with websocket connection', error);\n    };\n    socket.onclose = () => {\n      connected = null;\n      onDisconnected();\n      log('Connection to RN closed');\n    };\n    initialize(socket);\n  });\n\n  function handleWSError(event: $FlowFixMe) {\n    if (event.code === 'EADDRINUSE') {\n      if (attempts < 10) {\n        log.warn(`Port ${port} in use, trying port ${port + 1}...`);\n        // Try next port\n        return startServer(\n          port + 1,\n          host,\n          httpsOptions,\n          loggerOptions,\n          attempts + 1,\n        );\n      } else {\n        onError(event);\n        statusListener(\n          'Failed to start the server after 10 attempts.',\n          'error',\n        );\n      }\n    } else {\n      onError(event);\n      statusListener('Failed to start the server.', 'error');\n    }\n    return Devtools;\n  }\n\n  server.on('error', handleWSError);\n\n  function handleError(event: $FlowFixMe) {\n    onError(event);\n    statusListener('Failed to start the server.', 'error');\n    return Devtools;\n  }\n\n  httpServer.on('error', handleError);\n\n  httpServer.on('request', (request: $FlowFixMe, response: $FlowFixMe) => {\n    // Serve a file that immediately sets up the connection.\n    const backendFile = readFileSync(join(__dirname, 'backend.js'));\n\n    const savedPreferencesString = `\n      window.__REACT_DEVTOOLS_COMPONENT_FILTERS__ = ${JSON.stringify(\n        getSavedComponentFilters(),\n      )};`;\n\n    response.end(\n      savedPreferencesString +\n        '\\n;' +\n        backendFile.toString() +\n        '\\n;' +\n        'ReactDevToolsBackend.initialize();' +\n        '\\n' +\n        `ReactDevToolsBackend.connectToDevTools({port: ${port}, host: '${host}', useHttps: ${\n          useHttps ? 'true' : 'false'\n        }});\n        `,\n    );\n  });\n\n  httpServer.listen(port, () => {\n    Devtools.currentPort = port;\n    statusListener(\n      'The server is listening on the port ' + port + '.',\n      'server-connected',\n    );\n  });\n\n  return Devtools;\n}\n\nconst resourceCache: Map<string, string> = new Map();\n\n// As a potential improvement, this should be done from the backend of RDT.\n// Browser extension is doing this via exchanging messages\n// between devtools_page and dedicated content script for it, see `fetchFileWithCaching.js`.\nasync function fetchFileWithCaching(url: string): Promise<string> {\n  if (resourceCache.has(url)) {\n    const content = resourceCache.get(url);\n    if (content != null) {\n      return Promise.resolve(content);\n    }\n  }\n\n  return fetch(url)\n    .then(data => data.text())\n    .then(content => {\n      resourceCache.set(url, content);\n\n      return content;\n    });\n}\n\nconst Devtools: DevtoolsType = {\n  currentPort: null,\n  connectToSocket,\n  setStatusListener,\n  setDisconnectedCallback,\n  startServer,\n  setDataCallback,\n  startInspectingHost,\n  stopInspectingHost,\n};\n\ntype DevtoolsType = {\n  currentPort: ?number,\n  connectToSocket: (socket: WebSocket) => {close(): void},\n  setStatusListener: (value: StatusListener) => DevtoolsType,\n  setDisconnectedCallback: (value: OnDisconnectedCallback) => DevtoolsType,\n  setDataCallback: (value: OnDataCallback) => DevtoolsType,\n  startInspectingHost: () => DevtoolsType,\n  stopInspectingHost: () => DevtoolsType,\n  startServer: (\n    port: number,\n    host: string,\n    httpsOptions?: ServerOptions,\n    loggerOptions?: LoggerOptions,\n  ) => DevtoolsType,\n};\n\nexport default Devtools;\n"],"names":["module","exports","document","addEventListener","_resolve","_dataType","_intercept","clipboard","copy","_data","_bogusSelection","cleanup","window","getSelection","removeAllRanges","e","key","clipboardData","setData","preventDefault","data","Promise","resolve","reject","Node","XMLSerializer","serializeToString","Object","triggerCopy","tryBogusSelect","execCommand","Error","sel","queryCommandEnabled","isCollapsed","range","createRange","selectNodeContents","body","addRange","bogusSelect","paste","getData","dataType","ClipboardEvent","a","b","apply","arguments","c","this","TypeError","_state","_value","_deferreds","i","f","d","push","j","onFulfilled","onRejected","then","g","call","length","h","immediateFn","setImmediate","setTimeout","k","Array","isArray","prototype","toString","all","slice","constructor","race","strData","definition","LRUCache","makeSymbol","Map","require","util","Yallist","MAX","Symbol","process","env","_nodeLRUCacheForceNoSymbol","LENGTH","LENGTH_CALCULATOR","ALLOW_STALE","MAX_AGE","DISPOSE","NO_DISPOSE_ON_SET","LRU_LIST","CACHE","naiveLength","options","max","Infinity","lc","stale","maxAge","dispose","noDisposeOnSet","reset","forEachStep","self","fn","node","thisp","hit","value","isStale","del","undefined","get","doUse","unshiftNode","diff","Date","now","trim","walker","tail","prev","delete","removeNode","Entry","defineProperty","set","mL","enumerable","allowStale","mA","lC","forEach","rforEach","head","next","keys","toArray","map","values","dump","v","filter","dumpLru","inspect","n","opts","str","extras","didFirst","item","split","join","val","len","has","unshift","peek","pop","load","arr","l","expiresAt","prune","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","run","marker","runClearTimeout","Item","array","noop","nextTick","args","title","browser","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","npm_package_name","npm_lifecycle_script","TEST_PSEUDOMAP","hasOwnProperty","PseudoMap","clear","kv","same","_index","find","s","res","size","create","configurable","writable","entries","WebSocket","createWebSocketStream","Server","Receiver","Sender","EMPTY_BUFFER","list","totalLength","target","Buffer","allocUnsafe","offset","buf","_mask","source","mask","output","_unmask","buffer","toArrayBuffer","byteLength","byteOffset","toBuffer","readOnly","isBuffer","ArrayBuffer","from","isView","bufferUtil","bu","BufferUtil","unmask","BINARY_TYPES","GUID","kStatusCode","kWebSocket","alloc","NOOP","Event","type","MessageEvent","super","CloseEvent","code","reason","wasClean","_closeFrameReceived","_closeFrameSent","OpenEvent","ErrorEvent","error","message","EventTarget","listener","onMessage","onClose","onError","onOpen","method","_listener","removeEventListener","tokenChars","dest","elem","format","extensions","extension","configurations","params","parse","header","offers","extensionName","paramName","mustUnescape","isEscaping","inQuotes","start","end","charCodeAt","SyntaxError","replace","token","kDone","kRun","concurrency","pending","jobs","add","job","shift","zlib","Limiter","TRAILER","kPerMessageDeflate","kTotalLength","kCallback","kBuffers","kError","zlibLimiter","deflateOnData","chunk","inflateOnData","_maxPayload","RangeError","inflateOnError","err","_inflate","isServer","maxPayload","_options","_threshold","threshold","_isServer","_deflate","concurrencyLimit","offer","serverNoContextTakeover","server_no_context_takeover","clientNoContextTakeover","client_no_context_takeover","serverMaxWindowBits","server_max_window_bits","clientMaxWindowBits","client_max_window_bits","accept","normalizeParams","acceptAsServer","acceptAsClient","close","callback","accepted","response","num","Number","isInteger","decompress","fin","done","_decompress","result","compress","_compress","endpoint","windowBits","Z_DEFAULT_WINDOWBITS","createInflateRaw","zlibInflateOptions","write","flush","_readableState","endEmitted","createDeflateRaw","zlibDeflateOptions","Z_SYNC_FLUSH","Writable","PerMessageDeflate","isValidStatusCode","isValidUTF8","ErrorCtor","prefix","statusCode","errorCode","captureStackTrace","binaryType","_binaryType","_extensions","_bufferedBytes","_buffers","_compressed","_payloadLength","_fragmented","_masked","_fin","_opcode","_totalPayloadLength","_messageLength","_fragments","_loop","_write","encoding","cb","startLoop","consume","dst","Uint8Array","getInfo","getPayloadLength16","getPayloadLength64","getMask","compressed","haveLength","readUInt16BE","readUInt32BE","Math","pow","controlMessage","dataMessage","er","messageLength","fragments","randomFillSync","applyMask","socket","_socket","_firstFragment","_deflating","_queue","static","merge","payloadLength","opcode","rsv1","writeUInt16BE","writeUInt32BE","enqueue","doClose","sendFrame","frame","ping","doPing","pong","doPong","send","perMessageDeflate","binary","dispatch","_","destroyed","dequeue","Reflect","cork","uncork","Duplex","emitClose","stream","duplexOnEnd","_writableState","finished","destroy","duplexOnError","listenerCount","ws","resumeOnReceiverDrain","terminateOnDestroy","receiverOnDrain","resume","readyState","CONNECTING","_receiver","duplex","autoDestroy","objectMode","writableObjectMode","msg","pause","_destroy","CLOSED","called","terminate","_final","_read","OPEN","CLOSING","needDrain","_isValidUTF8","Validation","EventEmitter","http","createHash","keyRegex","server","socketOnError","abortHandshake","headers","STATUS_CODES","Connection","handleProtocols","clientTracking","verifyClient","noServer","backlog","host","path","port","_server","createServer","req","writeHead","listen","emitConnection","bind","_removeListeners","event","addListeners","listening","upgrade","handleUpgrade","clients","Set","address","client","shouldHandle","index","url","indexOf","toLowerCase","test","info","origin","secure","authorized","encrypted","verified","completeUpgrade","readable","update","digest","protocol","_protocol","setSocket","https","net","tls","randomBytes","Readable","URL","readyStates","protocolVersions","protocols","_closeCode","_closeMessage","_closeTimer","_readyState","_sender","_bufferedAmount","_redirects","initAsClient","includes","bufferedAmount","onclose","onerror","onopen","onmessage","_url","receiver","receiverOnConclude","receiverOnError","receiverOnMessage","receiverOnPing","receiverOnPong","setNoDelay","socketOnClose","socketOnData","socketOnEnd","_req","errorEmitted","sendAfterClose","websocket","protocolVersion","followRedirects","maxRedirects","createConnection","socketPath","hostname","parsedUrl","href","isUnixSocket","pathname","emitErrorAndClose","isSecure","defaultPort","tlsConnect","netConnect","startsWith","Upgrade","search","handshakeTimeout","Origin","username","password","auth","parts","_originalUnixSocket","_originalSecure","_originalHostOrSocketPath","isSameHost","authorization","cookie","aborted","location","addr","abort","serverProt","protList","protError","secWebSocketExtensions","extensionNames","connect","servername","isIP","setHeader","receiverOnFinish","read","property","pushNode","forEachReverse","getReverse","mapReverse","reduce","initial","acc","reduceReverse","toArrayReverse","to","ret","sliceReverse","reverse","p","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","o","obj","prop","r","toStringTag","listenersMap","didThrow","caughtError","clonedListeners","splice","BRIDGE_PROTOCOL","minNpmVersion","maxNpmVersion","currentBridgeProtocol","wall","_messageQueue","_wall","_scheduledFlush","id","rendererID","wasForwarded","_wallUnlisten","payload","overrideValueAtPath","_isShutdown","console","warn","devtoolsJestTestScheduler","_flush","queueMicrotask","shutdown","wallUnlisten","__PERFORMANCE_PROFILE__","LOCAL_STORAGE_COMPONENT_FILTER_PREFERENCES_KEY","ElementTypeClass","ElementTypeFunction","ElementTypeForwardRef","ElementTypeMemo","ElementTypeVirtual","ComponentFilterLocation","localStorageGetItem","localStorage","getItem","localStorageSetItem","setItem","utfDecodeStringWithRanges","left","right","string","String","fromCodePoint","getSavedComponentFilters","raw","filterOutLocationComponentFilters","JSON","isEnabled","setSavedComponentFilters","componentFilters","stringify","parseElementDisplayNameFromBackend","displayName","formattedDisplayName","hocDisplayNames","compiledWithForget","displayNameWithoutForgetWrapper","matches","match","shallowDiffers","attribute","backendToFrontendSerializedElementMapper","element","for","iterator","asyncIterator","WeakMap","LRU","formatDuration","duration","round","rootToCommitTreeMap","recursivelyInitializeTree","parentID","nodes","dataForRoot","snapshots","children","treeBaseDuration","initialTreeBaseDurations","childID","updateTree","commitTree","operations","getClonedNode","clonedNode","assign","stringTable","stringTableSize","stringTableEnd","nextLength","nextString","operation","parentNode","removeLength","removeIndex","numChildren","rootID","cachedChartData","ProfilingCache","profilerStore","commitIndex","commitTrees","profilingData","dataForRoots","getCommitTree","_profilerStore","fiberID","cachedFiberCommits","_fiberCommits","fiberCommits","getDataForRoot","commitData","commitDatum","fiberActualDurations","getCommitData","fiberSelfDurations","chartDataKey","idToDepthMap","renderPathNodes","rows","maxDepth","maxSelfDuration","walkTree","rightOffset","currentDepth","actualDuration","selfDuration","didRender","maybeKey","maybeBadge","maybeForgetBadge","label","chartNode","baseDuration","root","currentID","chartData","depth","getFlamegraphChartData","chartNodes","maxValue","sort","getRankedChartData","invalidate","logEvent","ProfilerStore","bridge","store","defaultIsProfiling","elementID","profilingSnapshots","_store","getElementByID","snapshotNode","_takeProfilingSnapshotRecursive","_isBackendProfiling","profilingOperations","_inProgressOperationsByRootID","_initialRendererIDs","_initialSnapshotsByRootID","_rendererIDsThatReportedProfilingData","dataBackend","_rendererQueue","_dataBackends","_dataFrontend","dataBackends","operationsByRootID","snapshotsByRootID","timelineDataArray","timelineData","batchUIDToMeasuresKeyValueArray","internalModuleSourceToRanges","laneToLabelKeyValueArray","laneToReactMeasureKeyValueArray","rest","batchUIDToMeasuresMap","laneToLabelMap","laneToReactMeasureMap","convertedCommitData","commitDataBackend","changeDescriptions","effectDuration","passiveEffectDuration","priorityLevel","timestamp","updaters","imported","prepareProfilingDataFrontendFromBackendAndStore","_bridge","onBridgeOperations","onBridgeProfilingData","onProfilingStatus","onBridgeShutdown","isProfiling","rootIDToRendererID","roots","_isProfilingBasedOnUserInput","event_name","error_message","error_stack","stack","error_component_stack","_cache","didRecordCommits","isProcessingData","isProfilingBasedOnUserInput","profilingCache","startProfiling","recordChangeDescriptions","recordTimeline","supportsTimeline","stopProfiling","UnsupportedBridgeOperationError","LOCAL_STORAGE_COLLAPSE_ROOTS_BY_DEFAULT_KEY","LOCAL_STORAGE_RECORD_CHANGE_DESCRIPTIONS_KEY","Store","config","parentElement","weightDelta","isInsideCollapsedSubTree","weight","_idToElement","_weightAcrossRoots","isSupported","validAttributes","_isNativeStyleEditorSupported","_nativeStyleEditorValidAttributes","haveRootsChanged","haveErrorsOrWarningsChanged","addedElementIDs","removedElementIDs","_throwAndEmitError","isStrictModeCompliant","supportsBasicProfiling","supportsStrictMode","hasOwnerMetadata","_bridgeProtocol","_roots","_rootIDToRendererID","_rootIDToCapabilities","isStrictModeNonCompliant","ownerID","displayNameWithoutHOCs","_collapseNodesByDefault","_adjustParentTreeWeight","_ownersMap","_errorsAndWarnings","recursivelyDeleteElements","mode","_recursivelyUpdateSubtree","errorCount","warningCount","_revision","_cachedErrorAndWarningTuples","componentWithErrorCount","componentWithWarningCount","entry","_cachedComponentWithErrorCount","_cachedComponentWithWarningCount","prevRootSupportsProfiling","_rootSupportsBasicProfiling","prevRootSupportsTimelineProfiling","_rootSupportsTimelineProfiling","_hasOwnerMetadata","_componentFilters","onBridgeOverrideComponentFilters","onBackendReloadAndProfileSupported","onBridgeNativeStyleEditorSupported","onBridgeUnsupportedRendererVersion","onBridgeBackendVersion","onBridgeProtocol","onSaveToClipboard","_onBridgeProtocolTimeoutID","isReloadAndProfileSupported","_isReloadAndProfileBackendSupported","_unsupportedRendererVersionDetected","backendVersion","_backendVersion","bridgeProtocol","text","_shouldCheckBridgeProtocolCompatibility","onBridgeProtocolTimeout","_hookSettings","settings","setShouldShowWarningsAndErrors","showInlineWarningsAndErrors","_recordChangeDescriptions","supportsInspectMatchingDOMElement","supportsClickToInspect","supportsReloadAndProfile","supportsTraceUpdates","checkBridgeProtocolCompatibility","_supportsInspectMatchingDOMElement","_supportsClickToInspect","_isReloadAndProfileFrontendSupported","_supportsTimeline","_supportsTraceUpdates","onHookSettings","onBackendInitialized","assertExpectedRootMapSizes","assertMapSizeMatchesRootCount","mapName","expectedSize","collapseNodesByDefault","prevEnabledComponentFilters","nextEnabledComponentFilters","haveEnabledFiltersChanged","_shouldShowWarningsAndErrors","displayingErrorsAndWarningsEnabled","nativeStyleEditorValidAttributes","numElements","revision","rootSupportsBasicProfiling","rootSupportsTimelineProfiling","supportsNativeStyleEditor","unsupportedBridgeProtocolDetected","_unsupportedBridgeProtocolDetected","unsupportedRendererVersionDetected","containsElement","getElementAtIndex","rootWeight","currentElement","currentWeight","child","childWeight","getElementIDAtIndex","getElementsWithErrorsAndWarnings","errorAndWarningTuples","getIndexOfElementID","low","high","mid","getErrorAndWarningCountForElementID","previousID","current","getOwnersListForElement","unsortedIDs","depthMap","idA","idB","innerElement","parent","getRendererIDForElement","getRootIDForElement","toggleIsCollapsed","didMutate","oldWeight","weightAcrossRoots","status","previousStatus","supportsUserTiming","performance","mark","clearMarks","supportsPerformanceNow","charToInteger","chars","segmentify","line","segment","SourceMapConsumer","sourceMapJSON","sections","lastOffset","column","section","offsetLine","offsetColumn","generatedLine","generatedColumn","sourceMapConsumer","originalPositionFor","columnNumber","lineNumber","targetColumnNumber","startIndex","stopIndex","floor","currentLine","currentColumn","IndexedSourceMapConsumer","decodedMappings","markName","onComplete","mappings","decoded","integer","fromCharCode","hasContinuationBit","shouldNegate","decode","measure","withSyncPerfMeasurements","lineMappings","nearestEntry","sourceIndex","sourceContent","sourcesContent","sourceURL","sources","BasicSourceMapConsumer","symbolicationCache","SOURCE_MAP_ANNOTATION_PREFIX","statusListener","log","disconnectedCallback","dataCallback","onDisconnected","initialize","Bridge","transferable","localBridge","localStore","elementId","requestID","forceFullData","async","fetchFileWithCaching","cachedPromise","promise","resource","catch","resourceLines","resourceLine","sourceMapAnnotationStartIndex","sourceMapAt","sourceMapURL","sourceMap","consumer","possiblyURL","symbolicateSource","symbolicateSourceWithCache","reload","resourceCache","content","fetch","Devtools","currentPort","connectToSocket","setStatusListener","setDisconnectedCallback","startServer","httpsOptions","loggerOptions","attempts","surface","useHttps","httpServer","connected","request","backendFile","readFileSync","__dirname","savedPreferencesString","setDataCallback","startInspectingHost","stopInspectingHost"],"sourceRoot":""}